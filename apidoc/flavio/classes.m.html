<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>flavio.classes API documentation</title>
    <meta name="description" content="Base classes for `flavio`" />

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/public/plugins/katex/katex.min.css">
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

    .katex {
      font-size:1em;
    }
    .katex .mathit, .katex .mathrm {
      font-family: 'Noto Sans';
    }
  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Noto Sans", "Helvetica Neue", Helvetica, sans;
    font-weight: 400;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  }

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; }

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;

      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  pre { line-height: 125%; margin: 0; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
.codehilite .hll { background-color: #ffffcc }
.codehilite { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #0000FF } /* Name.Function.Magic */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .vm { color: #19177C } /* Name.Variable.Magic */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
    <script src="/public/plugins/katex/katex.min.js"></script>
    <script src="/public/plugins/katex/auto-render.min.js"></script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">
    <li class="set"><h3><a href="#header-variables">Module variables</a></h3>
      
  <ul>
    <li class="mono"><a href="#flavio.classes.config">config</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#flavio.classes.dicts">dicts</a></li>
    <li class="mono"><a href="#flavio.classes.tree">tree</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.AuxiliaryQuantity">AuxiliaryQuantity</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.get_implementation">get_implementation</a></li>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.prediction">prediction</a></li>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.prediction_central">prediction_central</a></li>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.set_description">set_description</a></li>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.clear_all">clear_all</a></li>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.del_instance">del_instance</a></li>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.find">find</a></li>
    <li class="mono"><a href="#flavio.classes.AuxiliaryQuantity.get_instance">get_instance</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.Constraints">Constraints</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.Constraints.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.add_constraint">add_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.copy">copy</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_1d_errors">get_1d_errors</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_1d_errors_random">get_1d_errors_random</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_1d_errors_rightleft">get_1d_errors_rightleft</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_central">get_central</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_central_all">get_central_all</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_logprobability_all">get_logprobability_all</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_logprobability_single">get_logprobability_single</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_random_all">get_random_all</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_yaml">get_yaml</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.get_yaml_dict">get_yaml_dict</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.remove_constraint">remove_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.remove_constraints">remove_constraints</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.set_constraint">set_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.from_yaml">from_yaml</a></li>
    <li class="mono"><a href="#flavio.classes.Constraints.from_yaml_dict">from_yaml_dict</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.Implementation">Implementation</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.Implementation.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.get">get</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.get_central">get_central</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.get_random">get_random</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.set_description">set_description</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.clear_all">clear_all</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.del_instance">del_instance</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.find">find</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.get_instance">get_instance</a></li>
    <li class="mono"><a href="#flavio.classes.Implementation.show_all">show_all</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.Measurement">Measurement</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.Measurement.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.add_constraint">add_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.copy">copy</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_1d_errors">get_1d_errors</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_1d_errors_random">get_1d_errors_random</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_1d_errors_rightleft">get_1d_errors_rightleft</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_central">get_central</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_central_all">get_central_all</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_logprobability_all">get_logprobability_all</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_logprobability_single">get_logprobability_single</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_random_all">get_random_all</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_yaml">get_yaml</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_yaml_dict">get_yaml_dict</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.remove_constraint">remove_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.remove_constraints">remove_constraints</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.set_constraint">set_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.set_description">set_description</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.clear_all">clear_all</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.del_instance">del_instance</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.find">find</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.from_yaml">from_yaml</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.from_yaml_dict">from_yaml_dict</a></li>
    <li class="mono"><a href="#flavio.classes.Measurement.get_instance">get_instance</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.NamedInstanceClass">NamedInstanceClass</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.NamedInstanceClass.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.NamedInstanceClass.set_description">set_description</a></li>
    <li class="mono"><a href="#flavio.classes.NamedInstanceClass.clear_all">clear_all</a></li>
    <li class="mono"><a href="#flavio.classes.NamedInstanceClass.del_instance">del_instance</a></li>
    <li class="mono"><a href="#flavio.classes.NamedInstanceClass.find">find</a></li>
    <li class="mono"><a href="#flavio.classes.NamedInstanceClass.get_instance">get_instance</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.NamedInstanceMetaclass">NamedInstanceMetaclass</a></span>
        
        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.Observable">Observable</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.Observable.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.add_taxonomy">add_taxonomy</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.get_measurements">get_measurements</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.prediction_central">prediction_central</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.prediction_par">prediction_par</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.set_description">set_description</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.set_prediction">set_prediction</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.theory_citations">theory_citations</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.argument_format">argument_format</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.clear_all">clear_all</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.del_instance">del_instance</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.find">find</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.from_function">from_function</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.get_instance">get_instance</a></li>
    <li class="mono"><a href="#flavio.classes.Observable.taxonomy_dict">taxonomy_dict</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.Parameter">Parameter</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.Parameter.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.Parameter.set_description">set_description</a></li>
    <li class="mono"><a href="#flavio.classes.Parameter.clear_all">clear_all</a></li>
    <li class="mono"><a href="#flavio.classes.Parameter.del_instance">del_instance</a></li>
    <li class="mono"><a href="#flavio.classes.Parameter.find">find</a></li>
    <li class="mono"><a href="#flavio.classes.Parameter.get_instance">get_instance</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.ParameterConstraints">ParameterConstraints</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.add_constraint">add_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.copy">copy</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_1d_errors">get_1d_errors</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_1d_errors_random">get_1d_errors_random</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_1d_errors_rightleft">get_1d_errors_rightleft</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_central">get_central</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_central_all">get_central_all</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_logprobability_all">get_logprobability_all</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_logprobability_single">get_logprobability_single</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_random_all">get_random_all</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_yaml">get_yaml</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.get_yaml_dict">get_yaml_dict</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.read_default">read_default</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.remove_constraint">remove_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.remove_constraints">remove_constraints</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.set_constraint">set_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.from_yaml">from_yaml</a></li>
    <li class="mono"><a href="#flavio.classes.ParameterConstraints.from_yaml_dict">from_yaml_dict</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.Prediction">Prediction</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.Prediction.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.Prediction.get_central">get_central</a></li>
    <li class="mono"><a href="#flavio.classes.Prediction.get_par">get_par</a></li>
  </ul>

        </li>
        <li class="mono">
        <span class="class_name"><a href="#flavio.classes.WilsonCoefficientPriors">WilsonCoefficientPriors</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.add_constraint">add_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.copy">copy</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_1d_errors">get_1d_errors</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_1d_errors_random">get_1d_errors_random</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_1d_errors_rightleft">get_1d_errors_rightleft</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_central">get_central</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_central_all">get_central_all</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_logprobability_all">get_logprobability_all</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_logprobability_single">get_logprobability_single</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_random_all">get_random_all</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_yaml">get_yaml</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.get_yaml_dict">get_yaml_dict</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.remove_constraint">remove_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.remove_constraints">remove_constraints</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.set_constraint">set_constraint</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.from_yaml">from_yaml</a></li>
    <li class="mono"><a href="#flavio.classes.WilsonCoefficientPriors.from_yaml_dict">from_yaml_dict</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">flavio.classes</span> module</h1>
  <p>Base classes for <code>flavio</code></p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes" class="source">
    <div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;Base classes for `flavio`&quot;&quot;&quot;</span>


<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">.config</span> <span class="kn">import</span> <span class="n">config</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span><span class="p">,</span> <span class="n">defaultdict</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">flavio</span>
<span class="kn">from</span> <span class="nn">flavio._parse_errors</span> <span class="kn">import</span> <span class="n">constraints_from_string</span><span class="p">,</span> \
    <span class="n">convolve_distributions</span><span class="p">,</span> <span class="n">dict2dist</span>
<span class="kn">from</span> <span class="nn">flavio.statistics.probability</span> <span class="kn">import</span> <span class="n">string_to_class</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">pkgutil</span>


<span class="k">class</span> <span class="nc">NamedInstanceMetaclass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="c1"># this is just needed to implement the getitem method on NamedInstanceClass</span>
    <span class="c1"># to allow the syntax MyClass[&#39;instancename&#39;] as shorthand for</span>
    <span class="c1"># MyClass.get_instance(&#39;instancename&#39;); same for</span>
    <span class="c1"># del MyClass[&#39;instancename&#39;] instead of MyClass.del_instance(&#39;instancename&#39;)</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_instance</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">del_instance</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">NamedInstanceClass</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">NamedInstanceMetaclass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for classes that have named instances that can be accessed</span>
<span class="sd">    by their name.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">     - name: string</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">     - del_instance(name)</span>
<span class="sd">         Delete an instance</span>
<span class="sd">     - get_instance(name)</span>
<span class="sd">         Get an instance</span>
<span class="sd">     - set_description(description)</span>
<span class="sd">         Set the description</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="s1">&#39;instances&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">del_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">clear_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete all instances.&quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find all instance names matching the regular expression `regex`.&quot;&quot;&quot;</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">rc</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>


<span class="k">class</span> <span class="nc">Parameter</span><span class="p">(</span><span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class holds parameters (e.g. masses and lifetimes). It requires a</span>
<span class="sd">    name string and also allows to set a LaTeX name and description as</span>
<span class="sd">    attributes. Note that numerical values for the Parameters are not attributes</span>
<span class="sd">    of the Parameter class.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">     - name: string</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">     - tex: string</span>
<span class="sd">     - description: string</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Parameter(&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_markdown_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">md</span> <span class="o">=</span> <span class="s2">&quot;### Parameter `</span><span class="si">{}</span><span class="s2">`</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Parameter: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Description: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">md</span>


<span class="k">class</span> <span class="nc">Constraints</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constraints are collections of probability distributions associated</span>
<span class="sd">    to objects like parameters or measurements. This is the base class of</span>
<span class="sd">    ParameterConstraints (that holds the numerical values and uncertainties</span>
<span class="sd">    of all the parameters) and Measurements (that holds the numerical values</span>
<span class="sd">    and uncertainties of all the experimental measurements.)</span>

<span class="sd">    Since this class is not meant for direct use, see these child classes for</span>
<span class="sd">    documentation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="c1"># Here we have two data structures. _constraints has the form</span>
            <span class="c1"># [ (&lt;constraint1&gt;, [parameter1, parameter2, ...]), (&lt;constraint2&gt;, ...) ]</span>
            <span class="c1"># where the &lt;constraint&gt;s are instances of ProbabilityDistribution</span>
            <span class="c1"># and the parameters string names, while _parameters has the form</span>
            <span class="c1"># { parameter1: (num1, &lt;constraint1&gt;)} where num1 is 0 for a</span>
            <span class="c1"># univariate constraint and otherwise gives the position of</span>
            <span class="c1"># parameter1 in the multivariate vector.</span>
            <span class="c1"># In summary, having this list and dictionary allow a bijective mapping between</span>
            <span class="c1"># constraints and parameters.</span>
            <span class="c1"># Note that one constraint can apply to multiple parameters (e.g.</span>
            <span class="c1"># in case of correlated uncertainties), but a parameter can only</span>
            <span class="c1"># have a single constraint (changed in v0.16!).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all parameters/observables constrained.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">add_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the constraint on one or several parameters/observables.</span>

<span class="sd">        `constraint` must be an instance of a child of ProbabilityDistribution.</span>

<span class="sd">        Note that if there already exists a constraint, it will be removed.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
            <span class="c1"># remove constraint if there is one</span>
            <span class="k">if</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
        <span class="c1"># populate the dictionaries defined in __init__</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">constraint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraint_string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                        <span class="n">constraint_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Set the constraint on a parameter/observable by specifying a string</span>
<span class="sd">        or a dictionary. If several constraints (e.g. several types of</span>
<span class="sd">        uncertainty) are given, the total constraint will be the convolution</span>
<span class="sd">        of the individual distributions. Existing constraints will be removed.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - parameter: parameter string (or tuple)</span>
<span class="sd">        - constraint_string: string specifying the constraint that can be e.g.</span>
<span class="sd">          of the form `&#39;1.55(3)(1)&#39;` or `&#39;4.0±0.1&#39;`.</span>
<span class="sd">        - constraint_dict: dictionary or list of several dictionaries of the</span>
<span class="sd">          form `{&#39;distribution&#39;: &#39;distribution_name&#39;, &#39;arg1&#39;: val1, ...}`, where</span>
<span class="sd">          &#39;distribution_name&#39; is a string name associated to each probability</span>
<span class="sd">          distribution (see `flavio.statistics.probability.class_from_string`)</span>
<span class="sd">          and `&#39;arg1&#39;`, `val1` are argument/value pairs of the arguments of</span>
<span class="sd">          the distribution class&#39;s constructor (e.g.`central_value`,</span>
<span class="sd">          `standard_deviation` for a normal distribution).</span>

<span class="sd">        `constraint_string` and `constraint_dict` must not be present</span>
<span class="sd">        simultaneously.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;constraint_string and constraint_dict cannot&quot;</span>
                             <span class="s2">&quot; be used at the same time.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pds</span> <span class="o">=</span> <span class="n">constraints_from_string</span><span class="p">(</span><span class="n">constraint_string</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">constraint_dict</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Either constraint_string or constraint_dict have&quot;</span>
                            <span class="s2">&quot; to be specified.&quot;</span><span class="p">)</span>
        <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">([</span><span class="n">parameter</span><span class="p">],</span> <span class="n">combined_pd</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove existing constraint on a parameter.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `remove_constraint` &quot;</span>
                      <span class="s2">&quot;in v0.16 and will be removed in the future.&quot;</span><span class="p">,</span>
                      <span class="ne">DeprecationWarning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the central value of a parameter&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No constraints applied to parameter/observable &#39;</span> <span class="o">+</span> <span class="n">parameter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
            <span class="n">cv</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">central_value</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cv</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cv</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
                <span class="c1"># return the num-th entry of the central value vector</span>
                <span class="k">return</span> <span class="n">cv</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">cv</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Something went wrong when getting the central value of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_central_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get central values of all constrained parameters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">parameter</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>

    <span class="k">def</span> <span class="nf">get_random_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get random values for all constrained parameters where they are</span>
<span class="sd">        distributed according to the probability distribution applied.</span>

<span class="sd">        If `size` is not None, the dictionary values will be arrays with length</span>
<span class="sd">        `size` rather than numbers.&quot;&quot;&quot;</span>
        <span class="c1"># first, generate random values for every single one of the constraints</span>
        <span class="n">random_constraints</span> <span class="o">=</span> <span class="p">{</span><span class="n">constraint</span><span class="p">:</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
                              <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">}</span>
        <span class="n">random_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># now, iterate over the parameters</span>
        <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
            <span class="n">carr</span> <span class="o">=</span> <span class="n">random_constraints</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">carr</span><span class="p">):</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
            <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">():</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
            <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">size</span><span class="p">,)</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
            <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">size</span><span class="p">:</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[:,</span> <span class="n">num</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected error in get_random_all&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">random_dict</span>

    <span class="k">def</span> <span class="nf">get_1d_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `get_1d_errors_random` &quot;</span>
                      <span class="s2">&quot;in v0.16 and will be removed in the future. &quot;</span><span class="p">,</span>
                      <span class="ne">DeprecationWarning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_1d_errors_random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_1d_errors_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the Gaussian standard deviation for every parameter/observable</span>
<span class="sd">        obtained by generating N random values.&quot;&quot;&quot;</span>
        <span class="n">random_dict_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
        <span class="n">interval_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">r</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">])</span>
            <span class="n">interval_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">interval_dict</span>

    <span class="k">def</span> <span class="nf">get_1d_errors_rightleft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get the left and right error for every parameter/observable</span>
<span class="sd">        defined such that it contains 68% probability on each side of the</span>
<span class="sd">        central value.&quot;&quot;&quot;</span>
        <span class="n">errors_left</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_left</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
        <span class="n">errors_right</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_right</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
        <span class="n">error_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># now, iterate over the parameters</span>
        <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="p">([</span><span class="n">constraint</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
            <span class="n">error_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_right</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">],</span>
                                     <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_left</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">error_dict</span>

    <span class="k">def</span> <span class="nf">get_logprobability_single</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">        constraint/probability distribution for a given value of a</span>
<span class="sd">        single parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">)[</span><span class="n">constraint</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for multivariate distributions</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">parameter</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_logprobability_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">exclude_parameters</span><span class="o">=</span><span class="p">[],</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">        constraint/probability distribution.</span>

<span class="sd">        Inputs</span>
<span class="sd">        ------</span>
<span class="sd">        - par_dict</span>
<span class="sd">          A dictionary of the form {parameter: value, ...} where parameter</span>
<span class="sd">          is a string and value a float.</span>
<span class="sd">        - exclude_parameters (optional)</span>
<span class="sd">          An iterable of strings (default: empty) that specifies parameters</span>
<span class="sd">          that should be ignored. Univariate constraints on this parameter</span>
<span class="sd">          will be skipped, while for multivariate normally distributed</span>
<span class="sd">          constraints, the parameter will be removed from the covariance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prob_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
            <span class="c1"># list of constrained parameters except the excluded ones</span>
            <span class="n">p_cons</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span>
                      <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_parameters</span>
                      <span class="ow">and</span> <span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">constraint</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">))]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">par_dict</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="p">:</span>
                <span class="c1"># nothing to constrain</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># 1D constraints should have a scalar, not a length-1 array</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                    <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># for multivariate distributions</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
                    <span class="c1"># no parameter has been excluded</span>
                    <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                    <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prob_dict</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># this is to have a .copy() method like for a dictionary</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a YAML string representation of all constraints.</span>

<span class="sd">        The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">        containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">        &#39;observables&#39;).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaml_dict</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_yaml_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an ordered dictionary representation of all constraints that can</span>
<span class="sd">        be dumped as YAML string.</span>

<span class="sd">        The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">        containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">        &#39;observables&#39;).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="n">d</span><span class="p">[</span><span class="n">pname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">]</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                              <span class="n">iterate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arraytolist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">meta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">datameta</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
                <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">arg</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
            <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
                <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
            <span class="k">return</span> <span class="n">datameta</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class method: load constraint from a YAML string or stream.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_yaml_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_yaml_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class method: load constraint from a dictionary or list of dicts.</span>

<span class="sd">        If it is a dictionary, it should have the form:</span>

<span class="sd">        ```{</span>
<span class="sd">        &#39;metadata&#39;: {...},  # optional, do set attributes of the instance</span>
<span class="sd">        &#39;arguments&#39;: {...},  # optional, to specify keyword arguments for instantiation,</span>
<span class="sd">        &#39;constraints&#39;: [...],  # required, the list of constraints</span>
<span class="sd">        }</span>

<span class="sd">        Alternatively, the list of constraints can be directly given.</span>
<span class="sd">        This list should have elements in one of the two possible forms:</span>

<span class="sd">        1. Dictionary as returned by `Probability.get_dict`:</span>
<span class="sd">        ```{</span>
<span class="sd">        pname: [...],  # required, list of constrained parameters</span>
<span class="sd">        &#39;values&#39;: {</span>
<span class="sd">            &#39;distribution&#39;: &#39;...&#39;,  # required, string identifying ProbabilityDistribution, e.g. &#39;normal&#39;</span>
<span class="sd">            &#39;...&#39;: &#39;...&#39;,  # required, any arguments for the instantiation of the ProbabilityDistribution</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>

<span class="sd">        2. String representing one or several (to be convolved) constraints:</span>
<span class="sd">        ```{</span>
<span class="sd">        &#39;my_parameter&#39;: &#39;1.0 ± 0.2 ± 0.1 e-3&#39;</span>
<span class="sd">        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span>
            <span class="n">meta</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
            <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">meta</span><span class="p">:</span>
                <span class="n">inst</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;values&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c1"># this means we probably have a constraint of the</span>
                    <span class="c1"># form parameter: constraint_string</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># this loop runs only once</span>
                        <span class="n">inst</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                        <span class="k">break</span>  <span class="c1"># just to be sure</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># in this case something is clearly wrong. Mabye the</span>
                    <span class="c1"># wrong &quot;pname&quot; was used.</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Key &#39;</span> <span class="o">+</span> <span class="n">pname</span> <span class="o">+</span> <span class="s1">&#39; not found. &#39;</span>
                                     <span class="s1">&#39;Please check the `pname` argument.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">c</span><span class="p">[</span><span class="n">pname</span><span class="p">]]</span>
                <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">])</span>
                <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
                <span class="n">inst</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">combined_pd</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">inst</span>


<span class="k">class</span> <span class="nc">ParameterConstraints</span><span class="p">(</span><span class="n">Constraints</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Trivial subclass of `Constraints` that is meant for constraints on</span>
<span class="sd">    theory parameters represented by instances of the `Parameter` class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">read_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset the instance and read the default parameters. Data is read</span>
<span class="sd">        - from &#39;data/parameters_metadata.yml&#39;</span>
<span class="sd">        - from &#39;data/parameters_uncorrelated.yml&#39;</span>
<span class="sd">        - from &#39;data/parameters_correlated.yml&#39;</span>
<span class="sd">        - from the default PDG data file</span>
<span class="sd">        - for B-&gt;V form factors</span>
<span class="sd">        - for B-&gt;P form factors</span>
<span class="sd">        - for Lambdab-&gt;Lambda form factors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># import functions to read parameters</span>
        <span class="kn">from</span> <span class="nn">flavio.parameters</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">_read_yaml_object_metadata</span><span class="p">,</span>
            <span class="n">_read_yaml_object_values</span><span class="p">,</span>
            <span class="n">_read_yaml_object_values_correlated</span><span class="p">,</span>
            <span class="n">read_pdg</span>
        <span class="p">)</span>

        <span class="c1"># reset the instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="c1"># Read the parameter metadata from the default YAML data file</span>
        <span class="n">_read_yaml_object_metadata</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_metadata.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read the uncorrelated parameter values from the default YAML data file</span>
        <span class="n">_read_yaml_object_values</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_uncorrelated.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read the correlated parameter values from the default YAML data file</span>
        <span class="n">_read_yaml_object_values_correlated</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_correlated.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read the parameters from the default PDG data file</span>
        <span class="n">read_pdg</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read default parameters for B-&gt;V form factors</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_v</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">bsz_load</span><span class="p">(</span><span class="s1">&#39;v2&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;omega&#39;</span><span class="p">,</span> <span class="s1">&#39;B-&gt;rho&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_v</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">bsz_load</span><span class="p">(</span><span class="s1">&#39;v2&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR-Lattice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;K*&#39;</span><span class="p">,</span> <span class="s1">&#39;Bs-&gt;phi&#39;</span><span class="p">,</span> <span class="s1">&#39;Bs-&gt;K*&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read default parameters for B-&gt;P form factors</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_p</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">gkvd_load</span><span class="p">(</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR-Lattice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;K&#39;</span><span class="p">,</span> <span class="s1">&#39;B-&gt;pi&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read default parameters for Lambdab-&gt;Lambda form factors</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">lambdab_12</span><span class="o">.</span><span class="n">lattice_parameters</span><span class="o">.</span><span class="n">lattice_load_ho</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">WilsonCoefficientPriors</span><span class="p">(</span><span class="n">Constraints</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">tree</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Tree data structure.</span>

<span class="sd">    See https://gist.github.com/hrldcpr/2012250&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">dicts</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Turn tree into nested dict&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">dicts</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">t</span><span class="p">}</span>


<span class="k">class</span> <span class="nc">Observable</span><span class="p">(</span><span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Observable is something that can be measured experimentally and</span>
<span class="sd">    predicted theoretically.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="s1">&#39;taxonomy&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">taxonomy</span> <span class="o">=</span> <span class="n">tree</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Observable(&#39;</span><span class="si">{}</span><span class="s2">&#39;, arguments=</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_markdown_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">md</span> <span class="o">=</span> <span class="s2">&quot;### Observable `</span><span class="si">{}</span><span class="s2">`</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Observable: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Description: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Arguments: &quot;</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;`</span><span class="si">{}</span><span class="s2">`&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">])</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">function</span>
            <span class="kn">from</span> <span class="nn">IPython.lib</span> <span class="kn">import</span> <span class="n">pretty</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Theory prediction: `</span><span class="si">{}</span><span class="s2">`&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pretty</span><span class="o">.</span><span class="n">pretty</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">md</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">argument_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obs</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;tuple&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class method: takes as input an observable name and numerical values</span>
<span class="sd">        for the arguements (if any) and returns as output the same in a specific</span>
<span class="sd">        form as specified by `format`: &#39;tuple&#39; (default), &#39;list&#39;, or &#39;dict&#39;.</span>

<span class="sd">        Example inputs:</span>
<span class="sd">        - (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">        - {&#39;name&#39;: &#39;dBR/dq2(B0-&gt;Denu)&#39;, &#39;q2&#39;: 1}</span>

<span class="sd">        Output:</span>
<span class="sd">        tuple: (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">        list: (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">        dict: {&#39;name&#39;: &#39;dBR/dq2(B0-&gt;Denu)&#39;, &#39;q2&#39;: 1}</span>

<span class="sd">        For a string input for observables that don&#39;t have arguments:</span>
<span class="sd">        - &#39;eps_K&#39;</span>

<span class="sd">        Output:</span>
<span class="sd">        tuple: &#39;eps_K&#39;</span>
<span class="sd">        list: &#39;eps_K&#39;</span>
<span class="sd">        dict: {&#39;name&#39;: &#39;eps_K&#39;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">]</span><span class="o">.</span><span class="n">arguments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Arguments missing for </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obs</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;dict&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">obs</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">obs</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span>
            <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">obs</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Wrong number of arguments for </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">obs</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
                <span class="n">d</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span>
            <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span> <span class="o">+</span> <span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">obs</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;tuple&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">t</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;dict&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">set_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prediction</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span> <span class="o">=</span> <span class="n">prediction</span>

    <span class="k">def</span> <span class="nf">prediction_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prediction_par</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">get_par</span><span class="p">(</span><span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_taxonomy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taxonomy_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a metadata taxonomy for the observable.</span>

<span class="sd">        `taxonomy_string` has to be a string of the form</span>
<span class="sd">        &#39;Category :: Subcategory :: Subsubcategory&#39;</span>
<span class="sd">        etc. LaTeX code is allowed. One observable can also have multiple</span>
<span class="sd">        taxonomies (e.g. &#39;Animal :: Cat&#39; and &#39;Pet :: Favourite Pet&#39;)&quot;&quot;&quot;</span>
        <span class="n">taxonomy_list</span> <span class="o">=</span> <span class="n">taxonomy_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; :: &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">taxonomy</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">taxonomy_list</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">taxonomy_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the hierarchical metadata taxonomy as a nested dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">dicts</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">taxonomy</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_function</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">observables</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Instantiate an observable object and the corresponding Prediction</span>
<span class="sd">        object for an observable that is defined as a mathematical function</span>
<span class="sd">        of two or more existing observables with existing predictions.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        -----------</span>

<span class="sd">        - name: string name of the new observable</span>
<span class="sd">        - observables: list of string names of the observables to be combined</span>
<span class="sd">        - function: function of the observables. The number of arguments must</span>
<span class="sd">          match the number of observables</span>

<span class="sd">        Example:</span>
<span class="sd">        --------</span>

<span class="sd">        For two existing observables &#39;my_obs_1&#39; and &#39;my_obs_2&#39;, a new observable</span>
<span class="sd">        that is defined as the difference between the two can be defined as</span>

<span class="sd">        ```</span>
<span class="sd">        Observable.from_function(&#39;my_obs_1_2_diff&#39;,</span>
<span class="sd">                                 [&#39;my_obs_1&#39;, &#39;my_obs_2&#39;],</span>
<span class="sd">                                 lambda x, y: x - y)</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">observable</span> <span class="ow">in</span> <span class="n">observables</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The observable &quot;</span> <span class="o">+</span> <span class="n">observable</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">arguments</span> <span class="o">==</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observables</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span><span class="p">,</span> \
                <span class="s2">&quot;Only observables depending on the same arguments can be combined&quot;</span>
            <span class="k">assert</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> \
                <span class="s2">&quot;The observable </span><span class="si">{}</span><span class="s2"> does not have a prediction yet&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">observable</span><span class="p">)</span>
        <span class="n">obs_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">Observable</span><span class="p">[</span><span class="n">observables</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
        <span class="n">pfcts</span> <span class="o">=</span> <span class="p">[</span><span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">function</span>
                 <span class="k">for</span> <span class="n">observable</span> <span class="ow">in</span> <span class="n">observables</span><span class="p">]</span>
        <span class="k">def</span> <span class="nf">pfct</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">pfcts</span><span class="p">])</span>
        <span class="n">Prediction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pfct</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obs_obj</span>

    <span class="k">def</span> <span class="nf">get_measurements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Return the names of measurements that constrain the observable.&quot;&quot;&quot;</span>
        <span class="n">ms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">Measurement</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
                <span class="n">ms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">obs</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                            <span class="n">ms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                            <span class="k">break</span>
        <span class="k">return</span> <span class="n">ms</span>

    <span class="k">def</span> <span class="nf">theory_citations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a set of theory papers (in the form of INSPIRE texkeys) to</span>
<span class="sd">        cite for the theory prediction for an observable.</span>

<span class="sd">        Arguments are passed to the observable and are necessary,</span>
<span class="sd">        depending on the observable (e.g. $q^2$-dependent observables).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">flavio</span><span class="o">.</span><span class="n">citations</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span> <span class="k">as</span> <span class="n">citations</span><span class="p">:</span>
            <span class="n">flavio</span><span class="o">.</span><span class="n">sm_prediction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">citations</span><span class="o">.</span><span class="n">set</span>



<span class="k">class</span> <span class="nc">AuxiliaryQuantity</span><span class="p">(</span><span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An auxiliary quantity is something that can be computed theoretically but</span>
<span class="sd">    not measured directly, e.g. some sub-contribution to an amplitude or a form</span>
<span class="sd">    factor.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span>

    <span class="k">def</span> <span class="nf">get_implementation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">implementation_name</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;implementation&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;No implementation specified for auxiliary quantity &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Implementation</span><span class="p">[</span><span class="n">implementation_name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">prediction_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">implementation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_implementation</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">implementation</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">implementation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_implementation</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">implementation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Prediction</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A prediction is the theoretical prediction for an observable.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observable</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The observable &quot;</span> <span class="o">+</span> <span class="n">observable</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observable</span> <span class="o">=</span> <span class="n">observable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observable_obj</span> <span class="o">=</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observable_obj</span><span class="o">.</span><span class="n">set_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_central_all</span><span class="p">()</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_par</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Implementation</span><span class="p">(</span><span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An implementation is the theoretical prediction for an auxiliary</span>
<span class="sd">    quantity.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">show_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">all_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">:</span>
            <span class="n">inst</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">quant</span> <span class="o">=</span> <span class="n">inst</span><span class="o">.</span><span class="n">quantity</span>
            <span class="n">descr</span> <span class="o">=</span> <span class="n">inst</span><span class="o">.</span><span class="n">description</span>
            <span class="n">all_dict</span><span class="p">[</span><span class="n">quant</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">descr</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">all_dict</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">quantity</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">AuxiliaryQuantity</span><span class="p">[</span><span class="n">quantity</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The quantity &quot;</span> <span class="o">+</span> <span class="n">quantity</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity_obj</span> <span class="o">=</span> <span class="n">AuxiliaryQuantity</span><span class="p">[</span><span class="n">quantity</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_central_all</span><span class="p">()</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Measurement</span><span class="p">(</span><span class="n">Constraints</span><span class="p">,</span> <span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A (experimental) measurement associates one (or several) probability</span>
<span class="sd">    distributions to one (or several) observables. If it contains several</span>
<span class="sd">    observables, these can (but do not have to) be correlated.</span>

<span class="sd">    To instantiate the class, call Measurement(name) with a string uniquely</span>
<span class="sd">    describing the measurement (e.g. &#39;CMS Bs-&gt;mumu 2012&#39;).</span>

<span class="sd">    To add a constraint (= central vaue(s) and uncertainty(s)), use</span>

<span class="sd">    `add_constraint(observables, constraint)`</span>

<span class="sd">    where `constraint` is an instance of a descendant of</span>
<span class="sd">    ProbabilityDistribution and `observables` is a list of either</span>
<span class="sd">     - a string observable name in the case of observables without arguments</span>
<span class="sd">     - or a tuple `(name, x_1, ..., x_n)`, where the `x_i` are float values for</span>
<span class="sd">       the arguments, of an observable with `n` arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">NamedInstanceClass</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Constraints</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inspire</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">experiment</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Measurement(&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_markdown_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">md</span> <span class="o">=</span> <span class="s2">&quot;### Measurement `</span><span class="si">{}</span><span class="s2">`</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">experiment</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Experiment: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experiment</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inspire</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;[Inspire](http://inspirehep.net/search?&amp;p=texkey+</span><span class="si">{}</span><span class="s2">)</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                   <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inspire</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;URL: &lt;</span><span class="si">{}</span><span class="s2">&gt;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Description: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Measured observables:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">obs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="n">argnames</span> <span class="o">=</span> <span class="n">Observable</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">arguments</span>
                    <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;- </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Observable</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tex</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">arg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
                        <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;, `</span><span class="si">{}</span><span class="s2">` = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">argnames</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">arg</span><span class="p">)</span>
                    <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;- </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Observable</span><span class="p">[</span><span class="n">obs</span><span class="p">]</span><span class="o">.</span><span class="n">tex</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">md</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">
    <h2 class="section-title" id="header-variables">Module variables</h2>
      <div class="item">
      <p id="flavio.classes.config" class="name">var <span class="ident">config</span></p>
      
  
  <div class="source_cont">
</div>

      </div>

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="flavio.classes.dicts">
    <p>def <span class="ident">dicts</span>(</p><p>t)</p>
    </div>
    

    
  
    <div class="desc"><p>Turn tree into nested dict</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.dicts', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.dicts" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dicts</span><span class="p">(</span><span class="n">t</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Turn tree into nested dict&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">dicts</span><span class="p">(</span><span class="n">t</span><span class="p">[</span><span class="n">k</span><span class="p">])</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">t</span><span class="p">}</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="flavio.classes.tree">
    <p>def <span class="ident">tree</span>(</p><p>)</p>
    </div>
    

    
  
    <div class="desc"><p>Tree data structure.</p>
<p>See https://gist.github.com/hrldcpr/2012250</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.tree', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.tree" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">tree</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Tree data structure.</span>

<span class="sd">    See https://gist.github.com/hrldcpr/2012250&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">defaultdict</span><span class="p">(</span><span class="n">tree</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="flavio.classes.AuxiliaryQuantity" class="name">class <span class="ident">AuxiliaryQuantity</span></p>
      
  
    <div class="desc"><p>An auxiliary quantity is something that can be computed theoretically but
not measured directly, e.g. some sub-contribution to an amplitude or a form
factor.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">AuxiliaryQuantity</span><span class="p">(</span><span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An auxiliary quantity is something that can be computed theoretically but</span>
<span class="sd">    not measured directly, e.g. some sub-contribution to an amplitude or a form</span>
<span class="sd">    factor.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span>

    <span class="k">def</span> <span class="nf">get_implementation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">implementation_name</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;implementation&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;No implementation specified for auxiliary quantity &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">Implementation</span><span class="p">[</span><span class="n">implementation_name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">prediction_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">implementation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_implementation</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">implementation</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">implementation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_implementation</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">implementation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.AuxiliaryQuantity">AuxiliaryQuantity</a></li>
          <li><a href="#flavio.classes.NamedInstanceClass">NamedInstanceClass</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="flavio.classes.AuxiliaryQuantity.instances" class="name">var <span class="ident">instances</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, name, arguments=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.get_implementation">
    <p>def <span class="ident">get_implementation</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.get_implementation', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.get_implementation" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_implementation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">implementation_name</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;implementation&#39;</span><span class="p">][</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;No implementation specified for auxiliary quantity &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">Implementation</span><span class="p">[</span><span class="n">implementation_name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.prediction">
    <p>def <span class="ident">prediction</span>(</p><p>self, par_dict, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.prediction', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.prediction" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">implementation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_implementation</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">implementation</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.prediction_central">
    <p>def <span class="ident">prediction_central</span>(</p><p>self, constraints_obj, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.prediction_central', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.prediction_central" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prediction_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">implementation</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_implementation</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">implementation</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.set_description">
    <p>def <span class="ident">set_description</span>(</p><p>self, description)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.set_description', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.set_description" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.AuxiliaryQuantity.arguments" class="name">var <span class="ident">arguments</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.clear_all">
    <p>def <span class="ident">clear_all</span>(</p><p>cls)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete all instances.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.clear_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.clear_all" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">clear_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete all instances.&quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.del_instance">
    <p>def <span class="ident">del_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.del_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.del_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">del_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.find">
    <p>def <span class="ident">find</span>(</p><p>cls, regex)</p>
    </div>
    

    
  
    <div class="desc"><p>Find all instance names matching the regular expression <code>regex</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.find', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.find" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find all instance names matching the regular expression `regex`.&quot;&quot;&quot;</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">rc</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.AuxiliaryQuantity.get_instance">
    <p>def <span class="ident">get_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.AuxiliaryQuantity.get_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.AuxiliaryQuantity.get_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.Constraints" class="name">class <span class="ident">Constraints</span></p>
      
  
    <div class="desc"><p>Constraints are collections of probability distributions associated
to objects like parameters or measurements. This is the base class of
ParameterConstraints (that holds the numerical values and uncertainties
of all the parameters) and Measurements (that holds the numerical values
and uncertainties of all the experimental measurements.)</p>
<p>Since this class is not meant for direct use, see these child classes for
documentation.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Constraints</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Constraints are collections of probability distributions associated</span>
<span class="sd">    to objects like parameters or measurements. This is the base class of</span>
<span class="sd">    ParameterConstraints (that holds the numerical values and uncertainties</span>
<span class="sd">    of all the parameters) and Measurements (that holds the numerical values</span>
<span class="sd">    and uncertainties of all the experimental measurements.)</span>

<span class="sd">    Since this class is not meant for direct use, see these child classes for</span>
<span class="sd">    documentation.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="c1"># Here we have two data structures. _constraints has the form</span>
            <span class="c1"># [ (&lt;constraint1&gt;, [parameter1, parameter2, ...]), (&lt;constraint2&gt;, ...) ]</span>
            <span class="c1"># where the &lt;constraint&gt;s are instances of ProbabilityDistribution</span>
            <span class="c1"># and the parameters string names, while _parameters has the form</span>
            <span class="c1"># { parameter1: (num1, &lt;constraint1&gt;)} where num1 is 0 for a</span>
            <span class="c1"># univariate constraint and otherwise gives the position of</span>
            <span class="c1"># parameter1 in the multivariate vector.</span>
            <span class="c1"># In summary, having this list and dictionary allow a bijective mapping between</span>
            <span class="c1"># constraints and parameters.</span>
            <span class="c1"># Note that one constraint can apply to multiple parameters (e.g.</span>
            <span class="c1"># in case of correlated uncertainties), but a parameter can only</span>
            <span class="c1"># have a single constraint (changed in v0.16!).</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">all_parameters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all parameters/observables constrained.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">add_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the constraint on one or several parameters/observables.</span>

<span class="sd">        `constraint` must be an instance of a child of ProbabilityDistribution.</span>

<span class="sd">        Note that if there already exists a constraint, it will be removed.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
            <span class="c1"># remove constraint if there is one</span>
            <span class="k">if</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
        <span class="c1"># populate the dictionaries defined in __init__</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">constraint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraint_string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                        <span class="n">constraint_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Set the constraint on a parameter/observable by specifying a string</span>
<span class="sd">        or a dictionary. If several constraints (e.g. several types of</span>
<span class="sd">        uncertainty) are given, the total constraint will be the convolution</span>
<span class="sd">        of the individual distributions. Existing constraints will be removed.</span>

<span class="sd">        Arguments:</span>

<span class="sd">        - parameter: parameter string (or tuple)</span>
<span class="sd">        - constraint_string: string specifying the constraint that can be e.g.</span>
<span class="sd">          of the form `&#39;1.55(3)(1)&#39;` or `&#39;4.0±0.1&#39;`.</span>
<span class="sd">        - constraint_dict: dictionary or list of several dictionaries of the</span>
<span class="sd">          form `{&#39;distribution&#39;: &#39;distribution_name&#39;, &#39;arg1&#39;: val1, ...}`, where</span>
<span class="sd">          &#39;distribution_name&#39; is a string name associated to each probability</span>
<span class="sd">          distribution (see `flavio.statistics.probability.class_from_string`)</span>
<span class="sd">          and `&#39;arg1&#39;`, `val1` are argument/value pairs of the arguments of</span>
<span class="sd">          the distribution class&#39;s constructor (e.g.`central_value`,</span>
<span class="sd">          `standard_deviation` for a normal distribution).</span>

<span class="sd">        `constraint_string` and `constraint_dict` must not be present</span>
<span class="sd">        simultaneously.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;constraint_string and constraint_dict cannot&quot;</span>
                             <span class="s2">&quot; be used at the same time.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pds</span> <span class="o">=</span> <span class="n">constraints_from_string</span><span class="p">(</span><span class="n">constraint_string</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">constraint_dict</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Either constraint_string or constraint_dict have&quot;</span>
                            <span class="s2">&quot; to be specified.&quot;</span><span class="p">)</span>
        <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">([</span><span class="n">parameter</span><span class="p">],</span> <span class="n">combined_pd</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove existing constraint on a parameter.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `remove_constraint` &quot;</span>
                      <span class="s2">&quot;in v0.16 and will be removed in the future.&quot;</span><span class="p">,</span>
                      <span class="ne">DeprecationWarning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the central value of a parameter&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">parameter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No constraints applied to parameter/observable &#39;</span> <span class="o">+</span> <span class="n">parameter</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
            <span class="n">cv</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">central_value</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">cv</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cv</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
                <span class="c1"># return the num-th entry of the central value vector</span>
                <span class="k">return</span> <span class="n">cv</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">cv</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Something went wrong when getting the central value of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_central_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get central values of all constrained parameters.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">parameter</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>

    <span class="k">def</span> <span class="nf">get_random_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get random values for all constrained parameters where they are</span>
<span class="sd">        distributed according to the probability distribution applied.</span>

<span class="sd">        If `size` is not None, the dictionary values will be arrays with length</span>
<span class="sd">        `size` rather than numbers.&quot;&quot;&quot;</span>
        <span class="c1"># first, generate random values for every single one of the constraints</span>
        <span class="n">random_constraints</span> <span class="o">=</span> <span class="p">{</span><span class="n">constraint</span><span class="p">:</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
                              <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">}</span>
        <span class="n">random_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># now, iterate over the parameters</span>
        <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
            <span class="n">carr</span> <span class="o">=</span> <span class="n">random_constraints</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">carr</span><span class="p">):</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
            <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">():</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
            <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">size</span><span class="p">,)</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
            <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">size</span><span class="p">:</span>
                <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[:,</span> <span class="n">num</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected error in get_random_all&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">random_dict</span>

    <span class="k">def</span> <span class="nf">get_1d_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `get_1d_errors_random` &quot;</span>
                      <span class="s2">&quot;in v0.16 and will be removed in the future. &quot;</span><span class="p">,</span>
                      <span class="ne">DeprecationWarning</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_1d_errors_random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_1d_errors_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get the Gaussian standard deviation for every parameter/observable</span>
<span class="sd">        obtained by generating N random values.&quot;&quot;&quot;</span>
        <span class="n">random_dict_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
        <span class="n">interval_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">r</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">])</span>
            <span class="n">interval_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">interval_dict</span>

    <span class="k">def</span> <span class="nf">get_1d_errors_rightleft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get the left and right error for every parameter/observable</span>
<span class="sd">        defined such that it contains 68% probability on each side of the</span>
<span class="sd">        central value.&quot;&quot;&quot;</span>
        <span class="n">errors_left</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_left</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
        <span class="n">errors_right</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_right</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
        <span class="n">error_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># now, iterate over the parameters</span>
        <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
            <span class="n">idx</span> <span class="o">=</span> <span class="p">([</span><span class="n">constraint</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
            <span class="n">error_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_right</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">],</span>
                                     <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_left</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">error_dict</span>

    <span class="k">def</span> <span class="nf">get_logprobability_single</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">        constraint/probability distribution for a given value of a</span>
<span class="sd">        single parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
        <span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">)[</span><span class="n">constraint</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for multivariate distributions</span>
            <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                            <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">parameter</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_logprobability_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">exclude_parameters</span><span class="o">=</span><span class="p">[],</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">        constraint/probability distribution.</span>

<span class="sd">        Inputs</span>
<span class="sd">        ------</span>
<span class="sd">        - par_dict</span>
<span class="sd">          A dictionary of the form {parameter: value, ...} where parameter</span>
<span class="sd">          is a string and value a float.</span>
<span class="sd">        - exclude_parameters (optional)</span>
<span class="sd">          An iterable of strings (default: empty) that specifies parameters</span>
<span class="sd">          that should be ignored. Univariate constraints on this parameter</span>
<span class="sd">          will be skipped, while for multivariate normally distributed</span>
<span class="sd">          constraints, the parameter will be removed from the covariance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">prob_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
            <span class="c1"># list of constrained parameters except the excluded ones</span>
            <span class="n">p_cons</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span>
                      <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_parameters</span>
                      <span class="ow">and</span> <span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">constraint</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">))]</span>
            <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">par_dict</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="p">:</span>
                <span class="c1"># nothing to constrain</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># 1D constraints should have a scalar, not a length-1 array</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                    <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># for multivariate distributions</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
                    <span class="c1"># no parameter has been excluded</span>
                    <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                                    <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                    <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">prob_dict</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># this is to have a .copy() method like for a dictionary</span>
        <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get a YAML string representation of all constraints.</span>

<span class="sd">        The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">        containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">        &#39;observables&#39;).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaml_dict</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">get_yaml_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get an ordered dictionary representation of all constraints that can</span>
<span class="sd">        be dumped as YAML string.</span>

<span class="sd">        The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">        containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">        &#39;observables&#39;).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="n">d</span><span class="p">[</span><span class="n">pname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">]</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                              <span class="n">iterate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arraytolist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">meta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">datameta</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
                <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">arg</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
            <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
                <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
            <span class="k">return</span> <span class="n">datameta</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class method: load constraint from a YAML string or stream.&quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_yaml_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_yaml_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class method: load constraint from a dictionary or list of dicts.</span>

<span class="sd">        If it is a dictionary, it should have the form:</span>

<span class="sd">        ```{</span>
<span class="sd">        &#39;metadata&#39;: {...},  # optional, do set attributes of the instance</span>
<span class="sd">        &#39;arguments&#39;: {...},  # optional, to specify keyword arguments for instantiation,</span>
<span class="sd">        &#39;constraints&#39;: [...],  # required, the list of constraints</span>
<span class="sd">        }</span>

<span class="sd">        Alternatively, the list of constraints can be directly given.</span>
<span class="sd">        This list should have elements in one of the two possible forms:</span>

<span class="sd">        1. Dictionary as returned by `Probability.get_dict`:</span>
<span class="sd">        ```{</span>
<span class="sd">        pname: [...],  # required, list of constrained parameters</span>
<span class="sd">        &#39;values&#39;: {</span>
<span class="sd">            &#39;distribution&#39;: &#39;...&#39;,  # required, string identifying ProbabilityDistribution, e.g. &#39;normal&#39;</span>
<span class="sd">            &#39;...&#39;: &#39;...&#39;,  # required, any arguments for the instantiation of the ProbabilityDistribution</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>

<span class="sd">        2. String representing one or several (to be convolved) constraints:</span>
<span class="sd">        ```{</span>
<span class="sd">        &#39;my_parameter&#39;: &#39;1.0 ± 0.2 ± 0.1 e-3&#39;</span>
<span class="sd">        }</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span>
            <span class="n">meta</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="p">{})</span>
            <span class="n">arguments</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span>
            <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
            <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">meta</span><span class="p">:</span>
                <span class="n">inst</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
                <span class="k">if</span> <span class="s1">&#39;values&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="c1"># this means we probably have a constraint of the</span>
                    <span class="c1"># form parameter: constraint_string</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># this loop runs only once</span>
                        <span class="n">inst</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                        <span class="k">break</span>  <span class="c1"># just to be sure</span>
                    <span class="k">continue</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># in this case something is clearly wrong. Mabye the</span>
                    <span class="c1"># wrong &quot;pname&quot; was used.</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Key &#39;</span> <span class="o">+</span> <span class="n">pname</span> <span class="o">+</span> <span class="s1">&#39; not found. &#39;</span>
                                     <span class="s1">&#39;Please check the `pname` argument.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">c</span><span class="p">[</span><span class="n">pname</span><span class="p">]]</span>
                <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">])</span>
                <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
                <span class="n">inst</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">combined_pd</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">inst</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.Constraints">Constraints</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Here we have two data structures. _constraints has the form</span>
        <span class="c1"># [ (&lt;constraint1&gt;, [parameter1, parameter2, ...]), (&lt;constraint2&gt;, ...) ]</span>
        <span class="c1"># where the &lt;constraint&gt;s are instances of ProbabilityDistribution</span>
        <span class="c1"># and the parameters string names, while _parameters has the form</span>
        <span class="c1"># { parameter1: (num1, &lt;constraint1&gt;)} where num1 is 0 for a</span>
        <span class="c1"># univariate constraint and otherwise gives the position of</span>
        <span class="c1"># parameter1 in the multivariate vector.</span>
        <span class="c1"># In summary, having this list and dictionary allow a bijective mapping between</span>
        <span class="c1"># constraints and parameters.</span>
        <span class="c1"># Note that one constraint can apply to multiple parameters (e.g.</span>
        <span class="c1"># in case of correlated uncertainties), but a parameter can only</span>
        <span class="c1"># have a single constraint (changed in v0.16!).</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.add_constraint">
    <p>def <span class="ident">add_constraint</span>(</p><p>self, parameters, constraint)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the constraint on one or several parameters/observables.</p>
<p><code>constraint</code> must be an instance of a child of ProbabilityDistribution.</p>
<p>Note that if there already exists a constraint, it will be removed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.add_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.add_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the constraint on one or several parameters/observables.</span>
<span class="sd">    `constraint` must be an instance of a child of ProbabilityDistribution.</span>
<span class="sd">    Note that if there already exists a constraint, it will be removed.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
        <span class="c1"># remove constraint if there is one</span>
        <span class="k">if</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
    <span class="c1"># populate the dictionaries defined in __init__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">constraint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.copy', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.copy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># this is to have a .copy() method like for a dictionary</span>
    <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_1d_errors">
    <p>def <span class="ident">get_1d_errors</span>(</p><p>self, N=1000)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_1d_errors', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_1d_errors" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `get_1d_errors_random` &quot;</span>
                  <span class="s2">&quot;in v0.16 and will be removed in the future. &quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_1d_errors_random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_1d_errors_random">
    <p>def <span class="ident">get_1d_errors_random</span>(</p><p>self, N=1000)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the Gaussian standard deviation for every parameter/observable
obtained by generating N random values.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_1d_errors_random', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_1d_errors_random" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the Gaussian standard deviation for every parameter/observable</span>
<span class="sd">    obtained by generating N random values.&quot;&quot;&quot;</span>
    <span class="n">random_dict_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">interval_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">r</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">])</span>
        <span class="n">interval_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">interval_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_1d_errors_rightleft">
    <p>def <span class="ident">get_1d_errors_rightleft</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the left and right error for every parameter/observable
defined such that it contains 68% probability on each side of the
central value.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_1d_errors_rightleft', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_1d_errors_rightleft" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors_rightleft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get the left and right error for every parameter/observable</span>
<span class="sd">    defined such that it contains 68% probability on each side of the</span>
<span class="sd">    central value.&quot;&quot;&quot;</span>
    <span class="n">errors_left</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_left</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
    <span class="n">errors_right</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_right</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
    <span class="n">error_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># now, iterate over the parameters</span>
    <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="p">([</span><span class="n">constraint</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
        <span class="n">error_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_right</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">],</span>
                                 <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_left</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">error_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_central">
    <p>def <span class="ident">get_central</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the central value of a parameter</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_central', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_central" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the central value of a parameter&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">parameter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No constraints applied to parameter/observable &#39;</span> <span class="o">+</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">central_value</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cv</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cv</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="c1"># return the num-th entry of the central value vector</span>
            <span class="k">return</span> <span class="n">cv</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">cv</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Something went wrong when getting the central value of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_central_all">
    <p>def <span class="ident">get_central_all</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get central values of all constrained parameters.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_central_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_central_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get central values of all constrained parameters.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">parameter</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_logprobability_all">
    <p>def <span class="ident">get_logprobability_all</span>(</p><p>self, par_dict, exclude_parameters=[], delta=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a dictionary with the logarithm of the probability for each
constraint/probability distribution.</p>
<h2>Inputs</h2>
<ul>
<li>par_dict
  A dictionary of the form {parameter: value, ...} where parameter
  is a string and value a float.</li>
<li>exclude_parameters (optional)
  An iterable of strings (default: empty) that specifies parameters
  that should be ignored. Univariate constraints on this parameter
  will be skipped, while for multivariate normally distributed
  constraints, the parameter will be removed from the covariance.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_logprobability_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_logprobability_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_logprobability_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">exclude_parameters</span><span class="o">=</span><span class="p">[],</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">    constraint/probability distribution.</span>
<span class="sd">    Inputs</span>
<span class="sd">    ------</span>
<span class="sd">    - par_dict</span>
<span class="sd">      A dictionary of the form {parameter: value, ...} where parameter</span>
<span class="sd">      is a string and value a float.</span>
<span class="sd">    - exclude_parameters (optional)</span>
<span class="sd">      An iterable of strings (default: empty) that specifies parameters</span>
<span class="sd">      that should be ignored. Univariate constraints on this parameter</span>
<span class="sd">      will be skipped, while for multivariate normally distributed</span>
<span class="sd">      constraints, the parameter will be removed from the covariance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prob_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
        <span class="c1"># list of constrained parameters except the excluded ones</span>
        <span class="n">p_cons</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span>
                  <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_parameters</span>
                  <span class="ow">and</span> <span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">constraint</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">))]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">par_dict</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="p">:</span>
            <span class="c1"># nothing to constrain</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># 1D constraints should have a scalar, not a length-1 array</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for multivariate distributions</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
                <span class="c1"># no parameter has been excluded</span>
                <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">prob_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_logprobability_single">
    <p>def <span class="ident">get_logprobability_single</span>(</p><p>self, parameter, value, delta=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a dictionary with the logarithm of the probability for each
constraint/probability distribution for a given value of a
single parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_logprobability_single', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_logprobability_single" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_logprobability_single</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">    constraint/probability distribution for a given value of a</span>
<span class="sd">    single parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">)[</span><span class="n">constraint</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># for multivariate distributions</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">parameter</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_random_all">
    <p>def <span class="ident">get_random_all</span>(</p><p>self, size=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Get random values for all constrained parameters where they are
distributed according to the probability distribution applied.</p>
<p>If <code>size</code> is not None, the dictionary values will be arrays with length
<code>size</code> rather than numbers.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_random_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_random_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_random_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get random values for all constrained parameters where they are</span>
<span class="sd">    distributed according to the probability distribution applied.</span>
<span class="sd">    If `size` is not None, the dictionary values will be arrays with length</span>
<span class="sd">    `size` rather than numbers.&quot;&quot;&quot;</span>
    <span class="c1"># first, generate random values for every single one of the constraints</span>
    <span class="n">random_constraints</span> <span class="o">=</span> <span class="p">{</span><span class="n">constraint</span><span class="p">:</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
                          <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">}</span>
    <span class="n">random_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># now, iterate over the parameters</span>
    <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
        <span class="n">carr</span> <span class="o">=</span> <span class="n">random_constraints</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">carr</span><span class="p">):</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">():</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">size</span><span class="p">,)</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">size</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[:,</span> <span class="n">num</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected error in get_random_all&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">random_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_yaml">
    <p>def <span class="ident">get_yaml</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Get a YAML string representation of all constraints.</p>
<p>The optional parameter <code>pname</code> allows to customize the name of the key
containing the parameter list of each constraint (e.g. 'parameters',
'observables').</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a YAML string representation of all constraints.</span>
<span class="sd">    The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">    containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">    &#39;observables&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaml_dict</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.get_yaml_dict">
    <p>def <span class="ident">get_yaml_dict</span>(</p><p>self, pname=&#39;parameters&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Get an ordered dictionary representation of all constraints that can
be dumped as YAML string.</p>
<p>The optional parameter <code>pname</code> allows to customize the name of the key
containing the parameter list of each constraint (e.g. 'parameters',
'observables').</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.get_yaml_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.get_yaml_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_yaml_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get an ordered dictionary representation of all constraints that can</span>
<span class="sd">    be dumped as YAML string.</span>
<span class="sd">    The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">    containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">    &#39;observables&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="n">d</span><span class="p">[</span><span class="n">pname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">iterate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arraytolist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">meta</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">datameta</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">arg</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span>
        <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">datameta</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.remove_constraint">
    <p>def <span class="ident">remove_constraint</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove existing constraint on a parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.remove_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.remove_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove existing constraint on a parameter.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.remove_constraints">
    <p>def <span class="ident">remove_constraints</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.remove_constraints', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.remove_constraints" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `remove_constraint` &quot;</span>
                  <span class="s2">&quot;in v0.16 and will be removed in the future.&quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.set_constraint">
    <p>def <span class="ident">set_constraint</span>(</p><p>self, parameter, constraint_string=None, constraint_dict=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the constraint on a parameter/observable by specifying a string
or a dictionary. If several constraints (e.g. several types of
uncertainty) are given, the total constraint will be the convolution
of the individual distributions. Existing constraints will be removed.</p>
<p>Arguments:</p>
<ul>
<li>parameter: parameter string (or tuple)</li>
<li>constraint_string: string specifying the constraint that can be e.g.
  of the form <code>'1.55(3)(1)'</code> or <code>'4.0±0.1'</code>.</li>
<li>constraint_dict: dictionary or list of several dictionaries of the
  form <code>{'distribution': 'distribution_name', 'arg1': val1, ...}</code>, where
  'distribution_name' is a string name associated to each probability
  distribution (see <code>flavio.statistics.probability.class_from_string</code>)
  and <code>'arg1'</code>, <code>val1</code> are argument/value pairs of the arguments of
  the distribution class's constructor (e.g.<code>central_value</code>,
  <code>standard_deviation</code> for a normal distribution).</li>
</ul>
<p><code>constraint_string</code> and <code>constraint_dict</code> must not be present
simultaneously.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.set_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.set_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraint_string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                    <span class="n">constraint_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Set the constraint on a parameter/observable by specifying a string</span>
<span class="sd">    or a dictionary. If several constraints (e.g. several types of</span>
<span class="sd">    uncertainty) are given, the total constraint will be the convolution</span>
<span class="sd">    of the individual distributions. Existing constraints will be removed.</span>
<span class="sd">    Arguments:</span>
<span class="sd">    - parameter: parameter string (or tuple)</span>
<span class="sd">    - constraint_string: string specifying the constraint that can be e.g.</span>
<span class="sd">      of the form `&#39;1.55(3)(1)&#39;` or `&#39;4.0±0.1&#39;`.</span>
<span class="sd">    - constraint_dict: dictionary or list of several dictionaries of the</span>
<span class="sd">      form `{&#39;distribution&#39;: &#39;distribution_name&#39;, &#39;arg1&#39;: val1, ...}`, where</span>
<span class="sd">      &#39;distribution_name&#39; is a string name associated to each probability</span>
<span class="sd">      distribution (see `flavio.statistics.probability.class_from_string`)</span>
<span class="sd">      and `&#39;arg1&#39;`, `val1` are argument/value pairs of the arguments of</span>
<span class="sd">      the distribution class&#39;s constructor (e.g.`central_value`,</span>
<span class="sd">      `standard_deviation` for a normal distribution).</span>
<span class="sd">    `constraint_string` and `constraint_dict` must not be present</span>
<span class="sd">    simultaneously.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;constraint_string and constraint_dict cannot&quot;</span>
                         <span class="s2">&quot; be used at the same time.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pds</span> <span class="o">=</span> <span class="n">constraints_from_string</span><span class="p">(</span><span class="n">constraint_string</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">constraint_dict</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Either constraint_string or constraint_dict have&quot;</span>
                        <span class="s2">&quot; to be specified.&quot;</span><span class="p">)</span>
    <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">([</span><span class="n">parameter</span><span class="p">],</span> <span class="n">combined_pd</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.Constraints.all_parameters" class="name">var <span class="ident">all_parameters</span></p>
            

            
  
    <div class="desc"><p>Returns a list of all parameters/observables constrained.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.from_yaml">
    <p>def <span class="ident">from_yaml</span>(</p><p>cls, stream, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: load constraint from a YAML string or stream.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.from_yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.from_yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: load constraint from a YAML string or stream.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_yaml_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Constraints.from_yaml_dict">
    <p>def <span class="ident">from_yaml_dict</span>(</p><p>cls, data, pname=&#39;parameters&#39;, instance=None, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: load constraint from a dictionary or list of dicts.</p>
<p>If it is a dictionary, it should have the form:</p>
<p>```{
'metadata': {...},  # optional, do set attributes of the instance
'arguments': {...},  # optional, to specify keyword arguments for instantiation,
'constraints': [...],  # required, the list of constraints
}</p>
<p>Alternatively, the list of constraints can be directly given.
This list should have elements in one of the two possible forms:</p>
<ol>
<li>
<p>Dictionary as returned by <code>Probability.get_dict</code>:
<code>{
pname: [...],  # required, list of constrained parameters
'values': {
    'distribution': '...',  # required, string identifying ProbabilityDistribution, e.g. 'normal'
    '...': '...',  # required, any arguments for the instantiation of the ProbabilityDistribution
    }
}</code></p>
</li>
<li>
<p>String representing one or several (to be convolved) constraints:
```{
'my_parameter': '1.0 ± 0.2 ± 0.1 e-3'
}</p>
</li>
</ol></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Constraints.from_yaml_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Constraints.from_yaml_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: load constraint from a dictionary or list of dicts.</span>
<span class="sd">    If it is a dictionary, it should have the form:</span>
<span class="sd">    ```{</span>
<span class="sd">    &#39;metadata&#39;: {...},  # optional, do set attributes of the instance</span>
<span class="sd">    &#39;arguments&#39;: {...},  # optional, to specify keyword arguments for instantiation,</span>
<span class="sd">    &#39;constraints&#39;: [...],  # required, the list of constraints</span>
<span class="sd">    }</span>
<span class="sd">    Alternatively, the list of constraints can be directly given.</span>
<span class="sd">    This list should have elements in one of the two possible forms:</span>
<span class="sd">    1. Dictionary as returned by `Probability.get_dict`:</span>
<span class="sd">    ```{</span>
<span class="sd">    pname: [...],  # required, list of constrained parameters</span>
<span class="sd">    &#39;values&#39;: {</span>
<span class="sd">        &#39;distribution&#39;: &#39;...&#39;,  # required, string identifying ProbabilityDistribution, e.g. &#39;normal&#39;</span>
<span class="sd">        &#39;...&#39;: &#39;...&#39;,  # required, any arguments for the instantiation of the ProbabilityDistribution</span>
<span class="sd">        }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>
<span class="sd">    2. String representing one or several (to be convolved) constraints:</span>
<span class="sd">    ```{</span>
<span class="sd">    &#39;my_parameter&#39;: &#39;1.0 ± 0.2 ± 0.1 e-3&#39;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">inst</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;values&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># this means we probably have a constraint of the</span>
                <span class="c1"># form parameter: constraint_string</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># this loop runs only once</span>
                    <span class="n">inst</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                    <span class="k">break</span>  <span class="c1"># just to be sure</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># in this case something is clearly wrong. Mabye the</span>
                <span class="c1"># wrong &quot;pname&quot; was used.</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Key &#39;</span> <span class="o">+</span> <span class="n">pname</span> <span class="o">+</span> <span class="s1">&#39; not found. &#39;</span>
                                 <span class="s1">&#39;Please check the `pname` argument.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">c</span><span class="p">[</span><span class="n">pname</span><span class="p">]]</span>
            <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">])</span>
            <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
            <span class="n">inst</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">combined_pd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inst</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.Implementation" class="name">class <span class="ident">Implementation</span></p>
      
  
    <div class="desc"><p>An implementation is the theoretical prediction for an auxiliary
quantity.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Implementation</span><span class="p">(</span><span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An implementation is the theoretical prediction for an auxiliary</span>
<span class="sd">    quantity.&quot;&quot;&quot;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">show_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="n">all_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">:</span>
            <span class="n">inst</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">quant</span> <span class="o">=</span> <span class="n">inst</span><span class="o">.</span><span class="n">quantity</span>
            <span class="n">descr</span> <span class="o">=</span> <span class="n">inst</span><span class="o">.</span><span class="n">description</span>
            <span class="n">all_dict</span><span class="p">[</span><span class="n">quant</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">descr</span><span class="p">}</span>
        <span class="k">return</span> <span class="n">all_dict</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">quantity</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">AuxiliaryQuantity</span><span class="p">[</span><span class="n">quantity</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The quantity &quot;</span> <span class="o">+</span> <span class="n">quantity</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quantity_obj</span> <span class="o">=</span> <span class="n">AuxiliaryQuantity</span><span class="p">[</span><span class="n">quantity</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_central_all</span><span class="p">()</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.Implementation">Implementation</a></li>
          <li><a href="#flavio.classes.NamedInstanceClass">NamedInstanceClass</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="flavio.classes.Implementation.instances" class="name">var <span class="ident">instances</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, name, quantity, function)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">quantity</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">AuxiliaryQuantity</span><span class="p">[</span><span class="n">quantity</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The quantity &quot;</span> <span class="o">+</span> <span class="n">quantity</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">quantity</span> <span class="o">=</span> <span class="n">quantity</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">quantity_obj</span> <span class="o">=</span> <span class="n">AuxiliaryQuantity</span><span class="p">[</span><span class="n">quantity</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.get">
    <p>def <span class="ident">get</span>(</p><p>self, par_dict, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.get', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.get" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.get_central">
    <p>def <span class="ident">get_central</span>(</p><p>self, constraints_obj, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.get_central', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.get_central" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_central_all</span><span class="p">()</span>
    <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.get_random">
    <p>def <span class="ident">get_random</span>(</p><p>self, constraints_obj, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.get_random', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.get_random" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span>
    <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.set_description">
    <p>def <span class="ident">set_description</span>(</p><p>self, description)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.set_description', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.set_description" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.Implementation.function" class="name">var <span class="ident">function</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Implementation.quantity" class="name">var <span class="ident">quantity</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Implementation.quantity_obj" class="name">var <span class="ident">quantity_obj</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.clear_all">
    <p>def <span class="ident">clear_all</span>(</p><p>cls)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete all instances.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.clear_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.clear_all" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">clear_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete all instances.&quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.del_instance">
    <p>def <span class="ident">del_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.del_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.del_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">del_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.find">
    <p>def <span class="ident">find</span>(</p><p>cls, regex)</p>
    </div>
    

    
  
    <div class="desc"><p>Find all instance names matching the regular expression <code>regex</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.find', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.find" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find all instance names matching the regular expression `regex`.&quot;&quot;&quot;</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">rc</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.get_instance">
    <p>def <span class="ident">get_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.get_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.get_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Implementation.show_all">
    <p>def <span class="ident">show_all</span>(</p><p>cls)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Implementation.show_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Implementation.show_all" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">show_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="n">all_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">:</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">quant</span> <span class="o">=</span> <span class="n">inst</span><span class="o">.</span><span class="n">quantity</span>
        <span class="n">descr</span> <span class="o">=</span> <span class="n">inst</span><span class="o">.</span><span class="n">description</span>
        <span class="n">all_dict</span><span class="p">[</span><span class="n">quant</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">descr</span><span class="p">}</span>
    <span class="k">return</span> <span class="n">all_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.Measurement" class="name">class <span class="ident">Measurement</span></p>
      
  
    <div class="desc"><p>A (experimental) measurement associates one (or several) probability
distributions to one (or several) observables. If it contains several
observables, these can (but do not have to) be correlated.</p>
<p>To instantiate the class, call Measurement(name) with a string uniquely
describing the measurement (e.g. 'CMS Bs-&gt;mumu 2012').</p>
<p>To add a constraint (= central vaue(s) and uncertainty(s)), use</p>
<p><code>add_constraint(observables, constraint)</code></p>
<p>where <code>constraint</code> is an instance of a descendant of
ProbabilityDistribution and <code>observables</code> is a list of either
 - a string observable name in the case of observables without arguments
 - or a tuple <code>(name, x_1, ..., x_n)</code>, where the <code>x_i</code> are float values for
   the arguments, of an observable with <code>n</code> arguments.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Measurement</span><span class="p">(</span><span class="n">Constraints</span><span class="p">,</span> <span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A (experimental) measurement associates one (or several) probability</span>
<span class="sd">    distributions to one (or several) observables. If it contains several</span>
<span class="sd">    observables, these can (but do not have to) be correlated.</span>

<span class="sd">    To instantiate the class, call Measurement(name) with a string uniquely</span>
<span class="sd">    describing the measurement (e.g. &#39;CMS Bs-&gt;mumu 2012&#39;).</span>

<span class="sd">    To add a constraint (= central vaue(s) and uncertainty(s)), use</span>

<span class="sd">    `add_constraint(observables, constraint)`</span>

<span class="sd">    where `constraint` is an instance of a descendant of</span>
<span class="sd">    ProbabilityDistribution and `observables` is a list of either</span>
<span class="sd">     - a string observable name in the case of observables without arguments</span>
<span class="sd">     - or a tuple `(name, x_1, ..., x_n)`, where the `x_i` are float values for</span>
<span class="sd">       the arguments, of an observable with `n` arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">NamedInstanceClass</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="n">Constraints</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">inspire</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">experiment</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Measurement(&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_markdown_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">md</span> <span class="o">=</span> <span class="s2">&quot;### Measurement `</span><span class="si">{}</span><span class="s2">`</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">experiment</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Experiment: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">experiment</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inspire</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&quot;[Inspire](http://inspirehep.net/search?&amp;p=texkey+</span><span class="si">{}</span><span class="s2">)</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                   <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">urllib</span><span class="o">.</span><span class="n">parse</span><span class="o">.</span><span class="n">quote</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inspire</span><span class="p">)))</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;URL: &lt;</span><span class="si">{}</span><span class="s2">&gt;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Description: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Measured observables:</span><span class="se">\n\n</span><span class="s2">&quot;</span>
            <span class="k">for</span> <span class="n">obs</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="n">name</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                    <span class="n">args</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="n">argnames</span> <span class="o">=</span> <span class="n">Observable</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">arguments</span>
                    <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;- </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Observable</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">tex</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">arg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
                        <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;, `</span><span class="si">{}</span><span class="s2">` = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">argnames</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">arg</span><span class="p">)</span>
                    <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;- </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Observable</span><span class="p">[</span><span class="n">obs</span><span class="p">]</span><span class="o">.</span><span class="n">tex</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">md</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.Measurement">Measurement</a></li>
          <li><a href="#flavio.classes.Constraints">Constraints</a></li>
          <li><a href="#flavio.classes.NamedInstanceClass">NamedInstanceClass</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="flavio.classes.Measurement.instances" class="name">var <span class="ident">instances</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, name)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="n">NamedInstanceClass</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
    <span class="n">Constraints</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">inspire</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">experiment</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.add_constraint">
    <p>def <span class="ident">add_constraint</span>(</p><p>self, parameters, constraint)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the constraint on one or several parameters/observables.</p>
<p><code>constraint</code> must be an instance of a child of ProbabilityDistribution.</p>
<p>Note that if there already exists a constraint, it will be removed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.add_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.add_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the constraint on one or several parameters/observables.</span>
<span class="sd">    `constraint` must be an instance of a child of ProbabilityDistribution.</span>
<span class="sd">    Note that if there already exists a constraint, it will be removed.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
        <span class="c1"># remove constraint if there is one</span>
        <span class="k">if</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
    <span class="c1"># populate the dictionaries defined in __init__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">constraint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.copy', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.copy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># this is to have a .copy() method like for a dictionary</span>
    <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_1d_errors">
    <p>def <span class="ident">get_1d_errors</span>(</p><p>self, N=1000)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_1d_errors', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_1d_errors" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `get_1d_errors_random` &quot;</span>
                  <span class="s2">&quot;in v0.16 and will be removed in the future. &quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_1d_errors_random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_1d_errors_random">
    <p>def <span class="ident">get_1d_errors_random</span>(</p><p>self, N=1000)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the Gaussian standard deviation for every parameter/observable
obtained by generating N random values.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_1d_errors_random', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_1d_errors_random" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the Gaussian standard deviation for every parameter/observable</span>
<span class="sd">    obtained by generating N random values.&quot;&quot;&quot;</span>
    <span class="n">random_dict_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">interval_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">r</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">])</span>
        <span class="n">interval_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">interval_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_1d_errors_rightleft">
    <p>def <span class="ident">get_1d_errors_rightleft</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the left and right error for every parameter/observable
defined such that it contains 68% probability on each side of the
central value.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_1d_errors_rightleft', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_1d_errors_rightleft" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors_rightleft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get the left and right error for every parameter/observable</span>
<span class="sd">    defined such that it contains 68% probability on each side of the</span>
<span class="sd">    central value.&quot;&quot;&quot;</span>
    <span class="n">errors_left</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_left</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
    <span class="n">errors_right</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_right</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
    <span class="n">error_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># now, iterate over the parameters</span>
    <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="p">([</span><span class="n">constraint</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
        <span class="n">error_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_right</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">],</span>
                                 <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_left</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">error_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_central">
    <p>def <span class="ident">get_central</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the central value of a parameter</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_central', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_central" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the central value of a parameter&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">parameter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No constraints applied to parameter/observable &#39;</span> <span class="o">+</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">central_value</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cv</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cv</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="c1"># return the num-th entry of the central value vector</span>
            <span class="k">return</span> <span class="n">cv</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">cv</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Something went wrong when getting the central value of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_central_all">
    <p>def <span class="ident">get_central_all</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get central values of all constrained parameters.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_central_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_central_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get central values of all constrained parameters.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">parameter</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_logprobability_all">
    <p>def <span class="ident">get_logprobability_all</span>(</p><p>self, par_dict, exclude_parameters=[], delta=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a dictionary with the logarithm of the probability for each
constraint/probability distribution.</p>
<h2>Inputs</h2>
<ul>
<li>par_dict
  A dictionary of the form {parameter: value, ...} where parameter
  is a string and value a float.</li>
<li>exclude_parameters (optional)
  An iterable of strings (default: empty) that specifies parameters
  that should be ignored. Univariate constraints on this parameter
  will be skipped, while for multivariate normally distributed
  constraints, the parameter will be removed from the covariance.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_logprobability_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_logprobability_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_logprobability_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">exclude_parameters</span><span class="o">=</span><span class="p">[],</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">    constraint/probability distribution.</span>
<span class="sd">    Inputs</span>
<span class="sd">    ------</span>
<span class="sd">    - par_dict</span>
<span class="sd">      A dictionary of the form {parameter: value, ...} where parameter</span>
<span class="sd">      is a string and value a float.</span>
<span class="sd">    - exclude_parameters (optional)</span>
<span class="sd">      An iterable of strings (default: empty) that specifies parameters</span>
<span class="sd">      that should be ignored. Univariate constraints on this parameter</span>
<span class="sd">      will be skipped, while for multivariate normally distributed</span>
<span class="sd">      constraints, the parameter will be removed from the covariance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prob_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
        <span class="c1"># list of constrained parameters except the excluded ones</span>
        <span class="n">p_cons</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span>
                  <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_parameters</span>
                  <span class="ow">and</span> <span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">constraint</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">))]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">par_dict</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="p">:</span>
            <span class="c1"># nothing to constrain</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># 1D constraints should have a scalar, not a length-1 array</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for multivariate distributions</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
                <span class="c1"># no parameter has been excluded</span>
                <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">prob_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_logprobability_single">
    <p>def <span class="ident">get_logprobability_single</span>(</p><p>self, parameter, value, delta=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a dictionary with the logarithm of the probability for each
constraint/probability distribution for a given value of a
single parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_logprobability_single', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_logprobability_single" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_logprobability_single</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">    constraint/probability distribution for a given value of a</span>
<span class="sd">    single parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">)[</span><span class="n">constraint</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># for multivariate distributions</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">parameter</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_random_all">
    <p>def <span class="ident">get_random_all</span>(</p><p>self, size=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Get random values for all constrained parameters where they are
distributed according to the probability distribution applied.</p>
<p>If <code>size</code> is not None, the dictionary values will be arrays with length
<code>size</code> rather than numbers.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_random_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_random_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_random_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get random values for all constrained parameters where they are</span>
<span class="sd">    distributed according to the probability distribution applied.</span>
<span class="sd">    If `size` is not None, the dictionary values will be arrays with length</span>
<span class="sd">    `size` rather than numbers.&quot;&quot;&quot;</span>
    <span class="c1"># first, generate random values for every single one of the constraints</span>
    <span class="n">random_constraints</span> <span class="o">=</span> <span class="p">{</span><span class="n">constraint</span><span class="p">:</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
                          <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">}</span>
    <span class="n">random_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># now, iterate over the parameters</span>
    <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
        <span class="n">carr</span> <span class="o">=</span> <span class="n">random_constraints</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">carr</span><span class="p">):</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">():</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">size</span><span class="p">,)</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">size</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[:,</span> <span class="n">num</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected error in get_random_all&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">random_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_yaml">
    <p>def <span class="ident">get_yaml</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Get a YAML string representation of all constraints.</p>
<p>The optional parameter <code>pname</code> allows to customize the name of the key
containing the parameter list of each constraint (e.g. 'parameters',
'observables').</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a YAML string representation of all constraints.</span>
<span class="sd">    The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">    containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">    &#39;observables&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaml_dict</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_yaml_dict">
    <p>def <span class="ident">get_yaml_dict</span>(</p><p>self, pname=&#39;parameters&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Get an ordered dictionary representation of all constraints that can
be dumped as YAML string.</p>
<p>The optional parameter <code>pname</code> allows to customize the name of the key
containing the parameter list of each constraint (e.g. 'parameters',
'observables').</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_yaml_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_yaml_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_yaml_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get an ordered dictionary representation of all constraints that can</span>
<span class="sd">    be dumped as YAML string.</span>
<span class="sd">    The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">    containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">    &#39;observables&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="n">d</span><span class="p">[</span><span class="n">pname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">iterate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arraytolist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">meta</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">datameta</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">arg</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span>
        <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">datameta</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.remove_constraint">
    <p>def <span class="ident">remove_constraint</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove existing constraint on a parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.remove_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.remove_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove existing constraint on a parameter.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.remove_constraints">
    <p>def <span class="ident">remove_constraints</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.remove_constraints', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.remove_constraints" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `remove_constraint` &quot;</span>
                  <span class="s2">&quot;in v0.16 and will be removed in the future.&quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.set_constraint">
    <p>def <span class="ident">set_constraint</span>(</p><p>self, parameter, constraint_string=None, constraint_dict=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the constraint on a parameter/observable by specifying a string
or a dictionary. If several constraints (e.g. several types of
uncertainty) are given, the total constraint will be the convolution
of the individual distributions. Existing constraints will be removed.</p>
<p>Arguments:</p>
<ul>
<li>parameter: parameter string (or tuple)</li>
<li>constraint_string: string specifying the constraint that can be e.g.
  of the form <code>'1.55(3)(1)'</code> or <code>'4.0±0.1'</code>.</li>
<li>constraint_dict: dictionary or list of several dictionaries of the
  form <code>{'distribution': 'distribution_name', 'arg1': val1, ...}</code>, where
  'distribution_name' is a string name associated to each probability
  distribution (see <code>flavio.statistics.probability.class_from_string</code>)
  and <code>'arg1'</code>, <code>val1</code> are argument/value pairs of the arguments of
  the distribution class's constructor (e.g.<code>central_value</code>,
  <code>standard_deviation</code> for a normal distribution).</li>
</ul>
<p><code>constraint_string</code> and <code>constraint_dict</code> must not be present
simultaneously.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.set_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.set_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraint_string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                    <span class="n">constraint_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Set the constraint on a parameter/observable by specifying a string</span>
<span class="sd">    or a dictionary. If several constraints (e.g. several types of</span>
<span class="sd">    uncertainty) are given, the total constraint will be the convolution</span>
<span class="sd">    of the individual distributions. Existing constraints will be removed.</span>
<span class="sd">    Arguments:</span>
<span class="sd">    - parameter: parameter string (or tuple)</span>
<span class="sd">    - constraint_string: string specifying the constraint that can be e.g.</span>
<span class="sd">      of the form `&#39;1.55(3)(1)&#39;` or `&#39;4.0±0.1&#39;`.</span>
<span class="sd">    - constraint_dict: dictionary or list of several dictionaries of the</span>
<span class="sd">      form `{&#39;distribution&#39;: &#39;distribution_name&#39;, &#39;arg1&#39;: val1, ...}`, where</span>
<span class="sd">      &#39;distribution_name&#39; is a string name associated to each probability</span>
<span class="sd">      distribution (see `flavio.statistics.probability.class_from_string`)</span>
<span class="sd">      and `&#39;arg1&#39;`, `val1` are argument/value pairs of the arguments of</span>
<span class="sd">      the distribution class&#39;s constructor (e.g.`central_value`,</span>
<span class="sd">      `standard_deviation` for a normal distribution).</span>
<span class="sd">    `constraint_string` and `constraint_dict` must not be present</span>
<span class="sd">    simultaneously.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;constraint_string and constraint_dict cannot&quot;</span>
                         <span class="s2">&quot; be used at the same time.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pds</span> <span class="o">=</span> <span class="n">constraints_from_string</span><span class="p">(</span><span class="n">constraint_string</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">constraint_dict</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Either constraint_string or constraint_dict have&quot;</span>
                        <span class="s2">&quot; to be specified.&quot;</span><span class="p">)</span>
    <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">([</span><span class="n">parameter</span><span class="p">],</span> <span class="n">combined_pd</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.set_description">
    <p>def <span class="ident">set_description</span>(</p><p>self, description)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.set_description', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.set_description" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.Measurement.all_parameters" class="name">var <span class="ident">all_parameters</span></p>
            

            
  
    <div class="desc"><p>Returns a list of all parameters/observables constrained.</p></div>
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Measurement.experiment" class="name">var <span class="ident">experiment</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Measurement.inspire" class="name">var <span class="ident">inspire</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Measurement.url" class="name">var <span class="ident">url</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.clear_all">
    <p>def <span class="ident">clear_all</span>(</p><p>cls)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete all instances.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.clear_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.clear_all" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">clear_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete all instances.&quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.del_instance">
    <p>def <span class="ident">del_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.del_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.del_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">del_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.find">
    <p>def <span class="ident">find</span>(</p><p>cls, regex)</p>
    </div>
    

    
  
    <div class="desc"><p>Find all instance names matching the regular expression <code>regex</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.find', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.find" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find all instance names matching the regular expression `regex`.&quot;&quot;&quot;</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">rc</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.from_yaml">
    <p>def <span class="ident">from_yaml</span>(</p><p>cls, stream, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: load constraint from a YAML string or stream.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.from_yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.from_yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: load constraint from a YAML string or stream.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_yaml_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.from_yaml_dict">
    <p>def <span class="ident">from_yaml_dict</span>(</p><p>cls, data, pname=&#39;parameters&#39;, instance=None, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: load constraint from a dictionary or list of dicts.</p>
<p>If it is a dictionary, it should have the form:</p>
<p>```{
'metadata': {...},  # optional, do set attributes of the instance
'arguments': {...},  # optional, to specify keyword arguments for instantiation,
'constraints': [...],  # required, the list of constraints
}</p>
<p>Alternatively, the list of constraints can be directly given.
This list should have elements in one of the two possible forms:</p>
<ol>
<li>
<p>Dictionary as returned by <code>Probability.get_dict</code>:
<code>{
pname: [...],  # required, list of constrained parameters
'values': {
    'distribution': '...',  # required, string identifying ProbabilityDistribution, e.g. 'normal'
    '...': '...',  # required, any arguments for the instantiation of the ProbabilityDistribution
    }
}</code></p>
</li>
<li>
<p>String representing one or several (to be convolved) constraints:
```{
'my_parameter': '1.0 ± 0.2 ± 0.1 e-3'
}</p>
</li>
</ol></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.from_yaml_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.from_yaml_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: load constraint from a dictionary or list of dicts.</span>
<span class="sd">    If it is a dictionary, it should have the form:</span>
<span class="sd">    ```{</span>
<span class="sd">    &#39;metadata&#39;: {...},  # optional, do set attributes of the instance</span>
<span class="sd">    &#39;arguments&#39;: {...},  # optional, to specify keyword arguments for instantiation,</span>
<span class="sd">    &#39;constraints&#39;: [...],  # required, the list of constraints</span>
<span class="sd">    }</span>
<span class="sd">    Alternatively, the list of constraints can be directly given.</span>
<span class="sd">    This list should have elements in one of the two possible forms:</span>
<span class="sd">    1. Dictionary as returned by `Probability.get_dict`:</span>
<span class="sd">    ```{</span>
<span class="sd">    pname: [...],  # required, list of constrained parameters</span>
<span class="sd">    &#39;values&#39;: {</span>
<span class="sd">        &#39;distribution&#39;: &#39;...&#39;,  # required, string identifying ProbabilityDistribution, e.g. &#39;normal&#39;</span>
<span class="sd">        &#39;...&#39;: &#39;...&#39;,  # required, any arguments for the instantiation of the ProbabilityDistribution</span>
<span class="sd">        }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>
<span class="sd">    2. String representing one or several (to be convolved) constraints:</span>
<span class="sd">    ```{</span>
<span class="sd">    &#39;my_parameter&#39;: &#39;1.0 ± 0.2 ± 0.1 e-3&#39;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">inst</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;values&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># this means we probably have a constraint of the</span>
                <span class="c1"># form parameter: constraint_string</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># this loop runs only once</span>
                    <span class="n">inst</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                    <span class="k">break</span>  <span class="c1"># just to be sure</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># in this case something is clearly wrong. Mabye the</span>
                <span class="c1"># wrong &quot;pname&quot; was used.</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Key &#39;</span> <span class="o">+</span> <span class="n">pname</span> <span class="o">+</span> <span class="s1">&#39; not found. &#39;</span>
                                 <span class="s1">&#39;Please check the `pname` argument.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">c</span><span class="p">[</span><span class="n">pname</span><span class="p">]]</span>
            <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">])</span>
            <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
            <span class="n">inst</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">combined_pd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inst</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Measurement.get_instance">
    <p>def <span class="ident">get_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Measurement.get_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Measurement.get_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.NamedInstanceClass" class="name">class <span class="ident">NamedInstanceClass</span></p>
      
  
    <div class="desc"><p>Base class for classes that have named instances that can be accessed
by their name.</p>
<h2>Parameters</h2>
<ul>
<li>name: string</li>
</ul>
<h2>Methods</h2>
<ul>
<li>del_instance(name)
     Delete an instance</li>
<li>get_instance(name)
     Get an instance</li>
<li>set_description(description)
     Set the description</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.NamedInstanceClass', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.NamedInstanceClass" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">NamedInstanceClass</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">metaclass</span><span class="o">=</span><span class="n">NamedInstanceMetaclass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for classes that have named instances that can be accessed</span>
<span class="sd">    by their name.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">     - name: string</span>

<span class="sd">    Methods</span>
<span class="sd">    -------</span>
<span class="sd">     - del_instance(name)</span>
<span class="sd">         Delete an instance</span>
<span class="sd">     - get_instance(name)</span>
<span class="sd">         Get an instance</span>
<span class="sd">     - set_description(description)</span>
<span class="sd">         Set the description</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="s1">&#39;instances&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">del_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">clear_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Delete all instances.&quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Find all instance names matching the regular expression `regex`.&quot;&quot;&quot;</span>
        <span class="n">rc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">rc</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.NamedInstanceClass">NamedInstanceClass</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.NamedInstanceClass.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, name)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.NamedInstanceClass.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.NamedInstanceClass.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="s1">&#39;instances&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.NamedInstanceClass.set_description">
    <p>def <span class="ident">set_description</span>(</p><p>self, description)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.NamedInstanceClass.set_description', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.NamedInstanceClass.set_description" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.NamedInstanceClass.description" class="name">var <span class="ident">description</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.NamedInstanceClass.name" class="name">var <span class="ident">name</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.NamedInstanceClass.clear_all">
    <p>def <span class="ident">clear_all</span>(</p><p>cls)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete all instances.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.NamedInstanceClass.clear_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.NamedInstanceClass.clear_all" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">clear_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete all instances.&quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.NamedInstanceClass.del_instance">
    <p>def <span class="ident">del_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.NamedInstanceClass.del_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.NamedInstanceClass.del_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">del_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.NamedInstanceClass.find">
    <p>def <span class="ident">find</span>(</p><p>cls, regex)</p>
    </div>
    

    
  
    <div class="desc"><p>Find all instance names matching the regular expression <code>regex</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.NamedInstanceClass.find', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.NamedInstanceClass.find" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find all instance names matching the regular expression `regex`.&quot;&quot;&quot;</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">rc</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.NamedInstanceClass.get_instance">
    <p>def <span class="ident">get_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.NamedInstanceClass.get_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.NamedInstanceClass.get_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.NamedInstanceMetaclass" class="name">class <span class="ident">NamedInstanceMetaclass</span></p>
      
  
    <div class="desc"><p>type(object_or_name, bases, dict)
type(object) -&gt; the object's type
type(name, bases, dict) -&gt; a new type</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.NamedInstanceMetaclass', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.NamedInstanceMetaclass" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">NamedInstanceMetaclass</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="c1"># this is just needed to implement the getitem method on NamedInstanceClass</span>
    <span class="c1"># to allow the syntax MyClass[&#39;instancename&#39;] as shorthand for</span>
    <span class="c1"># MyClass.get_instance(&#39;instancename&#39;); same for</span>
    <span class="c1"># del MyClass[&#39;instancename&#39;] instead of MyClass.del_instance(&#39;instancename&#39;)</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">get_instance</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">del_instance</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.NamedInstanceMetaclass">NamedInstanceMetaclass</a></li>
          <li>builtins.type</li>
          <li>builtins.object</li>
          </ul>
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.Observable" class="name">class <span class="ident">Observable</span></p>
      
  
    <div class="desc"><p>An Observable is something that can be measured experimentally and
predicted theoretically.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Observable</span><span class="p">(</span><span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Observable is something that can be measured experimentally and</span>
<span class="sd">    predicted theoretically.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="s1">&#39;taxonomy&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">taxonomy</span> <span class="o">=</span> <span class="n">tree</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Observable(&#39;</span><span class="si">{}</span><span class="s2">&#39;, arguments=</span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_markdown_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">md</span> <span class="o">=</span> <span class="s2">&quot;### Observable `</span><span class="si">{}</span><span class="s2">`</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Observable: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Description: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Arguments: &quot;</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s2">&quot;`</span><span class="si">{}</span><span class="s2">`&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span><span class="p">])</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">function</span>
            <span class="kn">from</span> <span class="nn">IPython.lib</span> <span class="kn">import</span> <span class="n">pretty</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Theory prediction: `</span><span class="si">{}</span><span class="s2">`&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pretty</span><span class="o">.</span><span class="n">pretty</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">md</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">argument_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obs</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;tuple&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Class method: takes as input an observable name and numerical values</span>
<span class="sd">        for the arguements (if any) and returns as output the same in a specific</span>
<span class="sd">        form as specified by `format`: &#39;tuple&#39; (default), &#39;list&#39;, or &#39;dict&#39;.</span>

<span class="sd">        Example inputs:</span>
<span class="sd">        - (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">        - {&#39;name&#39;: &#39;dBR/dq2(B0-&gt;Denu)&#39;, &#39;q2&#39;: 1}</span>

<span class="sd">        Output:</span>
<span class="sd">        tuple: (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">        list: (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">        dict: {&#39;name&#39;: &#39;dBR/dq2(B0-&gt;Denu)&#39;, &#39;q2&#39;: 1}</span>

<span class="sd">        For a string input for observables that don&#39;t have arguments:</span>
<span class="sd">        - &#39;eps_K&#39;</span>

<span class="sd">        Output:</span>
<span class="sd">        tuple: &#39;eps_K&#39;</span>
<span class="sd">        list: &#39;eps_K&#39;</span>
<span class="sd">        dict: {&#39;name&#39;: &#39;eps_K&#39;}</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">]</span><span class="o">.</span><span class="n">arguments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Arguments missing for </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obs</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;dict&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">obs</span><span class="p">}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">obs</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span>
            <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">obs</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Wrong number of arguments for </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">obs</span><span class="p">)</span>
            <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
                <span class="n">d</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span>
            <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span> <span class="o">+</span> <span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">obs</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;tuple&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">t</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;dict&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">d</span>

    <span class="k">def</span> <span class="nf">set_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prediction</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span> <span class="o">=</span> <span class="n">prediction</span>

    <span class="k">def</span> <span class="nf">prediction_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">prediction_par</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">get_par</span><span class="p">(</span><span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_taxonomy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taxonomy_string</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a metadata taxonomy for the observable.</span>

<span class="sd">        `taxonomy_string` has to be a string of the form</span>
<span class="sd">        &#39;Category :: Subcategory :: Subsubcategory&#39;</span>
<span class="sd">        etc. LaTeX code is allowed. One observable can also have multiple</span>
<span class="sd">        taxonomies (e.g. &#39;Animal :: Cat&#39; and &#39;Pet :: Favourite Pet&#39;)&quot;&quot;&quot;</span>
        <span class="n">taxonomy_list</span> <span class="o">=</span> <span class="n">taxonomy_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; :: &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">taxonomy</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">taxonomy_list</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">taxonomy_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the hierarchical metadata taxonomy as a nested dictionary.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">dicts</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">taxonomy</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_function</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">observables</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Instantiate an observable object and the corresponding Prediction</span>
<span class="sd">        object for an observable that is defined as a mathematical function</span>
<span class="sd">        of two or more existing observables with existing predictions.</span>

<span class="sd">        Parameters:</span>
<span class="sd">        -----------</span>

<span class="sd">        - name: string name of the new observable</span>
<span class="sd">        - observables: list of string names of the observables to be combined</span>
<span class="sd">        - function: function of the observables. The number of arguments must</span>
<span class="sd">          match the number of observables</span>

<span class="sd">        Example:</span>
<span class="sd">        --------</span>

<span class="sd">        For two existing observables &#39;my_obs_1&#39; and &#39;my_obs_2&#39;, a new observable</span>
<span class="sd">        that is defined as the difference between the two can be defined as</span>

<span class="sd">        ```</span>
<span class="sd">        Observable.from_function(&#39;my_obs_1_2_diff&#39;,</span>
<span class="sd">                                 [&#39;my_obs_1&#39;, &#39;my_obs_2&#39;],</span>
<span class="sd">                                 lambda x, y: x - y)</span>
<span class="sd">        ```</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">observable</span> <span class="ow">in</span> <span class="n">observables</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The observable &quot;</span> <span class="o">+</span> <span class="n">observable</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
            <span class="k">assert</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">arguments</span> <span class="o">==</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observables</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span><span class="p">,</span> \
                <span class="s2">&quot;Only observables depending on the same arguments can be combined&quot;</span>
            <span class="k">assert</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> \
                <span class="s2">&quot;The observable </span><span class="si">{}</span><span class="s2"> does not have a prediction yet&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">observable</span><span class="p">)</span>
        <span class="n">obs_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">Observable</span><span class="p">[</span><span class="n">observables</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
        <span class="n">pfcts</span> <span class="o">=</span> <span class="p">[</span><span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">function</span>
                 <span class="k">for</span> <span class="n">observable</span> <span class="ow">in</span> <span class="n">observables</span><span class="p">]</span>
        <span class="k">def</span> <span class="nf">pfct</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">pfcts</span><span class="p">])</span>
        <span class="n">Prediction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pfct</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">obs_obj</span>

    <span class="k">def</span> <span class="nf">get_measurements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Return the names of measurements that constrain the observable.&quot;&quot;&quot;</span>
        <span class="n">ms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">Measurement</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
                <span class="n">ms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">obs</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                            <span class="n">ms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                            <span class="k">break</span>
        <span class="k">return</span> <span class="n">ms</span>

    <span class="k">def</span> <span class="nf">theory_citations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a set of theory papers (in the form of INSPIRE texkeys) to</span>
<span class="sd">        cite for the theory prediction for an observable.</span>

<span class="sd">        Arguments are passed to the observable and are necessary,</span>
<span class="sd">        depending on the observable (e.g. $q^2$-dependent observables).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">flavio</span><span class="o">.</span><span class="n">citations</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span> <span class="k">as</span> <span class="n">citations</span><span class="p">:</span>
            <span class="n">flavio</span><span class="o">.</span><span class="n">sm_prediction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">citations</span><span class="o">.</span><span class="n">set</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.Observable">Observable</a></li>
          <li><a href="#flavio.classes.NamedInstanceClass">NamedInstanceClass</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="flavio.classes.Observable.instances" class="name">var <span class="ident">instances</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Observable.taxonomy" class="name">var <span class="ident">taxonomy</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, name, arguments=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="s1">&#39;taxonomy&#39;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">taxonomy</span> <span class="o">=</span> <span class="n">tree</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">arguments</span> <span class="o">=</span> <span class="n">arguments</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tex</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.add_taxonomy">
    <p>def <span class="ident">add_taxonomy</span>(</p><p>self, taxonomy_string)</p>
    </div>
    

    
  
    <div class="desc"><p>Add a metadata taxonomy for the observable.</p>
<p><code>taxonomy_string</code> has to be a string of the form
'Category :: Subcategory :: Subsubcategory'
etc. LaTeX code is allowed. One observable can also have multiple
taxonomies (e.g. 'Animal :: Cat' and 'Pet :: Favourite Pet')</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.add_taxonomy', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.add_taxonomy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_taxonomy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">taxonomy_string</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add a metadata taxonomy for the observable.</span>
<span class="sd">    `taxonomy_string` has to be a string of the form</span>
<span class="sd">    &#39;Category :: Subcategory :: Subsubcategory&#39;</span>
<span class="sd">    etc. LaTeX code is allowed. One observable can also have multiple</span>
<span class="sd">    taxonomies (e.g. &#39;Animal :: Cat&#39; and &#39;Pet :: Favourite Pet&#39;)&quot;&quot;&quot;</span>
    <span class="n">taxonomy_list</span> <span class="o">=</span> <span class="n">taxonomy_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; :: &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
    <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">taxonomy</span>
    <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">taxonomy_list</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.get_measurements">
    <p>def <span class="ident">get_measurements</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the names of measurements that constrain the observable.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.get_measurements', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.get_measurements" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_measurements</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Return the names of measurements that constrain the observable.&quot;&quot;&quot;</span>
    <span class="n">ms</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">Measurement</span><span class="o">.</span><span class="n">instances</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
            <span class="n">ms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">obs</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">all_parameters</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
                        <span class="n">ms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
                        <span class="k">break</span>
    <span class="k">return</span> <span class="n">ms</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.prediction_central">
    <p>def <span class="ident">prediction_central</span>(</p><p>self, constraints_obj, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.prediction_central', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.prediction_central" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prediction_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.prediction_par">
    <p>def <span class="ident">prediction_par</span>(</p><p>self, par_dict, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.prediction_par', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.prediction_par" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prediction_par</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">get_par</span><span class="p">(</span><span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.set_description">
    <p>def <span class="ident">set_description</span>(</p><p>self, description)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.set_description', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.set_description" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.set_prediction">
    <p>def <span class="ident">set_prediction</span>(</p><p>self, prediction)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.set_prediction', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.set_prediction" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prediction</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">prediction</span> <span class="o">=</span> <span class="n">prediction</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.theory_citations">
    <p>def <span class="ident">theory_citations</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a set of theory papers (in the form of INSPIRE texkeys) to
cite for the theory prediction for an observable.</p>
<p>Arguments are passed to the observable and are necessary,
depending on the observable (e.g. $q^2$-dependent observables).</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.theory_citations', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.theory_citations" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">theory_citations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a set of theory papers (in the form of INSPIRE texkeys) to</span>
<span class="sd">    cite for the theory prediction for an observable.</span>
<span class="sd">    Arguments are passed to the observable and are necessary,</span>
<span class="sd">    depending on the observable (e.g. $q^2$-dependent observables).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">flavio</span><span class="o">.</span><span class="n">citations</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span> <span class="k">as</span> <span class="n">citations</span><span class="p">:</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">sm_prediction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">citations</span><span class="o">.</span><span class="n">set</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.Observable.arguments" class="name">var <span class="ident">arguments</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Observable.prediction" class="name">var <span class="ident">prediction</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Observable.tex" class="name">var <span class="ident">tex</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.argument_format">
    <p>def <span class="ident">argument_format</span>(</p><p>cls, obs, format=&#39;tuple&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: takes as input an observable name and numerical values
for the arguements (if any) and returns as output the same in a specific
form as specified by <code>format</code>: 'tuple' (default), 'list', or 'dict'.</p>
<p>Example inputs:
- ('dBR/dq2(B0-&gt;Denu)', 1)
- {'name': 'dBR/dq2(B0-&gt;Denu)', 'q2': 1}</p>
<p>Output:
tuple: ('dBR/dq2(B0-&gt;Denu)', 1)
list: ('dBR/dq2(B0-&gt;Denu)', 1)
dict: {'name': 'dBR/dq2(B0-&gt;Denu)', 'q2': 1}</p>
<p>For a string input for observables that don't have arguments:
- 'eps_K'</p>
<p>Output:
tuple: 'eps_K'
list: 'eps_K'
dict: {'name': 'eps_K'}</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.argument_format', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.argument_format" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">argument_format</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">obs</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;tuple&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: takes as input an observable name and numerical values</span>
<span class="sd">    for the arguements (if any) and returns as output the same in a specific</span>
<span class="sd">    form as specified by `format`: &#39;tuple&#39; (default), &#39;list&#39;, or &#39;dict&#39;.</span>
<span class="sd">    Example inputs:</span>
<span class="sd">    - (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">    - {&#39;name&#39;: &#39;dBR/dq2(B0-&gt;Denu)&#39;, &#39;q2&#39;: 1}</span>
<span class="sd">    Output:</span>
<span class="sd">    tuple: (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">    list: (&#39;dBR/dq2(B0-&gt;Denu)&#39;, 1)</span>
<span class="sd">    dict: {&#39;name&#39;: &#39;dBR/dq2(B0-&gt;Denu)&#39;, &#39;q2&#39;: 1}</span>
<span class="sd">    For a string input for observables that don&#39;t have arguments:</span>
<span class="sd">    - &#39;eps_K&#39;</span>
<span class="sd">    Output:</span>
<span class="sd">    tuple: &#39;eps_K&#39;</span>
<span class="sd">    list: &#39;eps_K&#39;</span>
<span class="sd">    dict: {&#39;name&#39;: &#39;eps_K&#39;}</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">]</span><span class="o">.</span><span class="n">arguments</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Arguments missing for </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obs</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;dict&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">obs</span><span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">obs</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="p">(</span><span class="nb">tuple</span><span class="p">,</span> <span class="nb">list</span><span class="p">)):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">obs</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Wrong number of arguments for </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
        <span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">obs</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]}</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">args</span><span class="p">):</span>
            <span class="n">d</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">t</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">obs</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]]</span> <span class="o">+</span> <span class="p">[</span><span class="n">obs</span><span class="p">[</span><span class="n">a</span><span class="p">]</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">args</span><span class="p">])</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">obs</span>
    <span class="k">if</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;tuple&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">t</span>
    <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;list&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">format</span> <span class="o">==</span> <span class="s1">&#39;dict&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">d</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.clear_all">
    <p>def <span class="ident">clear_all</span>(</p><p>cls)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete all instances.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.clear_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.clear_all" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">clear_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete all instances.&quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.del_instance">
    <p>def <span class="ident">del_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.del_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.del_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">del_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.find">
    <p>def <span class="ident">find</span>(</p><p>cls, regex)</p>
    </div>
    

    
  
    <div class="desc"><p>Find all instance names matching the regular expression <code>regex</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.find', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.find" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find all instance names matching the regular expression `regex`.&quot;&quot;&quot;</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">rc</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.from_function">
    <p>def <span class="ident">from_function</span>(</p><p>cls, name, observables, function)</p>
    </div>
    

    
  
    <div class="desc"><p>Instantiate an observable object and the corresponding Prediction
object for an observable that is defined as a mathematical function
of two or more existing observables with existing predictions.</p>
<h2>Parameters:</h2>
<ul>
<li>name: string name of the new observable</li>
<li>observables: list of string names of the observables to be combined</li>
<li>function: function of the observables. The number of arguments must
  match the number of observables</li>
</ul>
<h2>Example:</h2>
<p>For two existing observables 'my_obs_1' and 'my_obs_2', a new observable
that is defined as the difference between the two can be defined as</p>
<p><code>Observable.from_function('my_obs_1_2_diff',
                         ['my_obs_1', 'my_obs_2'],
                         lambda x, y: x - y)</code></p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.from_function', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.from_function" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_function</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">observables</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Instantiate an observable object and the corresponding Prediction</span>
<span class="sd">    object for an observable that is defined as a mathematical function</span>
<span class="sd">    of two or more existing observables with existing predictions.</span>
<span class="sd">    Parameters:</span>
<span class="sd">    -----------</span>
<span class="sd">    - name: string name of the new observable</span>
<span class="sd">    - observables: list of string names of the observables to be combined</span>
<span class="sd">    - function: function of the observables. The number of arguments must</span>
<span class="sd">      match the number of observables</span>
<span class="sd">    Example:</span>
<span class="sd">    --------</span>
<span class="sd">    For two existing observables &#39;my_obs_1&#39; and &#39;my_obs_2&#39;, a new observable</span>
<span class="sd">    that is defined as the difference between the two can be defined as</span>
<span class="sd">    ```</span>
<span class="sd">    Observable.from_function(&#39;my_obs_1_2_diff&#39;,</span>
<span class="sd">                             [&#39;my_obs_1&#39;, &#39;my_obs_2&#39;],</span>
<span class="sd">                             lambda x, y: x - y)</span>
<span class="sd">    ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">observable</span> <span class="ow">in</span> <span class="n">observables</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The observable &quot;</span> <span class="o">+</span> <span class="n">observable</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">arguments</span> <span class="o">==</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observables</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span><span class="p">,</span> \
            <span class="s2">&quot;Only observables depending on the same arguments can be combined&quot;</span>
        <span class="k">assert</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> \
            <span class="s2">&quot;The observable </span><span class="si">{}</span><span class="s2"> does not have a prediction yet&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">observable</span><span class="p">)</span>
    <span class="n">obs_obj</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">arguments</span><span class="o">=</span><span class="n">Observable</span><span class="p">[</span><span class="n">observables</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">arguments</span><span class="p">)</span>
    <span class="n">pfcts</span> <span class="o">=</span> <span class="p">[</span><span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span><span class="o">.</span><span class="n">function</span>
             <span class="k">for</span> <span class="n">observable</span> <span class="ow">in</span> <span class="n">observables</span><span class="p">]</span>
    <span class="k">def</span> <span class="nf">pfct</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="p">[</span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">pfcts</span><span class="p">])</span>
    <span class="n">Prediction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">pfct</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">obs_obj</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.get_instance">
    <p>def <span class="ident">get_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.get_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.get_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Observable.taxonomy_dict">
    <p>def <span class="ident">taxonomy_dict</span>(</p><p>cls)</p>
    </div>
    

    
  
    <div class="desc"><p>Return the hierarchical metadata taxonomy as a nested dictionary.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Observable.taxonomy_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Observable.taxonomy_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">taxonomy_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the hierarchical metadata taxonomy as a nested dictionary.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dicts</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">taxonomy</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.Parameter" class="name">class <span class="ident">Parameter</span></p>
      
  
    <div class="desc"><p>This class holds parameters (e.g. masses and lifetimes). It requires a
name string and also allows to set a LaTeX name and description as
attributes. Note that numerical values for the Parameters are not attributes
of the Parameter class.</p>
<h2>Parameters</h2>
<ul>
<li>name: string</li>
</ul>
<h2>Attributes</h2>
<ul>
<li>tex: string</li>
<li>description: string</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Parameter', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Parameter" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Parameter</span><span class="p">(</span><span class="n">NamedInstanceClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This class holds parameters (e.g. masses and lifetimes). It requires a</span>
<span class="sd">    name string and also allows to set a LaTeX name and description as</span>
<span class="sd">    attributes. Note that numerical values for the Parameters are not attributes</span>
<span class="sd">    of the Parameter class.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">     - name: string</span>

<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">     - tex: string</span>
<span class="sd">     - description: string</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tex</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s2">&quot;Parameter(&#39;</span><span class="si">{}</span><span class="s2">&#39;)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_repr_markdown_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">md</span> <span class="o">=</span> <span class="s2">&quot;### Parameter `</span><span class="si">{}</span><span class="s2">`</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Parameter: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tex</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">:</span>
            <span class="n">md</span> <span class="o">+=</span> <span class="s2">&quot;Description: </span><span class="si">{}</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">md</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.Parameter">Parameter</a></li>
          <li><a href="#flavio.classes.NamedInstanceClass">NamedInstanceClass</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="flavio.classes.Parameter.instances" class="name">var <span class="ident">instances</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Parameter.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, name)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Parameter.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Parameter.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tex</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Parameter.set_description">
    <p>def <span class="ident">set_description</span>(</p><p>self, description)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Parameter.set_description', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Parameter.set_description" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">description</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.Parameter.tex" class="name">var <span class="ident">tex</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Parameter.clear_all">
    <p>def <span class="ident">clear_all</span>(</p><p>cls)</p>
    </div>
    

    
  
    <div class="desc"><p>Delete all instances.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Parameter.clear_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Parameter.clear_all" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">clear_all</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Delete all instances.&quot;&quot;&quot;</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Parameter.del_instance">
    <p>def <span class="ident">del_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Parameter.del_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Parameter.del_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">del_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">del</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Parameter.find">
    <p>def <span class="ident">find</span>(</p><p>cls, regex)</p>
    </div>
    

    
  
    <div class="desc"><p>Find all instance names matching the regular expression <code>regex</code>.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Parameter.find', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Parameter.find" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">regex</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Find all instance names matching the regular expression `regex`.&quot;&quot;&quot;</span>
    <span class="n">rc</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">regex</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="n">rc</span><span class="o">.</span><span class="n">search</span><span class="p">,</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Parameter.get_instance">
    <p>def <span class="ident">get_instance</span>(</p><p>cls, name)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Parameter.get_instance', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Parameter.get_instance" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">get_instance</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">instances</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.ParameterConstraints" class="name">class <span class="ident">ParameterConstraints</span></p>
      
  
    <div class="desc"><p>Trivial subclass of <code>Constraints</code> that is meant for constraints on
theory parameters represented by instances of the <code>Parameter</code> class.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">ParameterConstraints</span><span class="p">(</span><span class="n">Constraints</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Trivial subclass of `Constraints` that is meant for constraints on</span>
<span class="sd">    theory parameters represented by instances of the `Parameter` class.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">read_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset the instance and read the default parameters. Data is read</span>
<span class="sd">        - from &#39;data/parameters_metadata.yml&#39;</span>
<span class="sd">        - from &#39;data/parameters_uncorrelated.yml&#39;</span>
<span class="sd">        - from &#39;data/parameters_correlated.yml&#39;</span>
<span class="sd">        - from the default PDG data file</span>
<span class="sd">        - for B-&gt;V form factors</span>
<span class="sd">        - for B-&gt;P form factors</span>
<span class="sd">        - for Lambdab-&gt;Lambda form factors</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># import functions to read parameters</span>
        <span class="kn">from</span> <span class="nn">flavio.parameters</span> <span class="kn">import</span> <span class="p">(</span>
            <span class="n">_read_yaml_object_metadata</span><span class="p">,</span>
            <span class="n">_read_yaml_object_values</span><span class="p">,</span>
            <span class="n">_read_yaml_object_values_correlated</span><span class="p">,</span>
            <span class="n">read_pdg</span>
        <span class="p">)</span>

        <span class="c1"># reset the instance</span>
        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>

        <span class="c1"># Read the parameter metadata from the default YAML data file</span>
        <span class="n">_read_yaml_object_metadata</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_metadata.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read the uncorrelated parameter values from the default YAML data file</span>
        <span class="n">_read_yaml_object_values</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_uncorrelated.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read the correlated parameter values from the default YAML data file</span>
        <span class="n">_read_yaml_object_values_correlated</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_correlated.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read the parameters from the default PDG data file</span>
        <span class="n">read_pdg</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read default parameters for B-&gt;V form factors</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_v</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">bsz_load</span><span class="p">(</span><span class="s1">&#39;v2&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;omega&#39;</span><span class="p">,</span> <span class="s1">&#39;B-&gt;rho&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_v</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">bsz_load</span><span class="p">(</span><span class="s1">&#39;v2&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR-Lattice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;K*&#39;</span><span class="p">,</span> <span class="s1">&#39;Bs-&gt;phi&#39;</span><span class="p">,</span> <span class="s1">&#39;Bs-&gt;K*&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read default parameters for B-&gt;P form factors</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_p</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">gkvd_load</span><span class="p">(</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR-Lattice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;K&#39;</span><span class="p">,</span> <span class="s1">&#39;B-&gt;pi&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Read default parameters for Lambdab-&gt;Lambda form factors</span>
        <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">lambdab_12</span><span class="o">.</span><span class="n">lattice_parameters</span><span class="o">.</span><span class="n">lattice_load_ho</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.ParameterConstraints">ParameterConstraints</a></li>
          <li><a href="#flavio.classes.Constraints">Constraints</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.add_constraint">
    <p>def <span class="ident">add_constraint</span>(</p><p>self, parameters, constraint)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the constraint on one or several parameters/observables.</p>
<p><code>constraint</code> must be an instance of a child of ProbabilityDistribution.</p>
<p>Note that if there already exists a constraint, it will be removed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.add_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.add_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the constraint on one or several parameters/observables.</span>
<span class="sd">    `constraint` must be an instance of a child of ProbabilityDistribution.</span>
<span class="sd">    Note that if there already exists a constraint, it will be removed.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
        <span class="c1"># remove constraint if there is one</span>
        <span class="k">if</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
    <span class="c1"># populate the dictionaries defined in __init__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">constraint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.copy', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.copy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># this is to have a .copy() method like for a dictionary</span>
    <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_1d_errors">
    <p>def <span class="ident">get_1d_errors</span>(</p><p>self, N=1000)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_1d_errors', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_1d_errors" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `get_1d_errors_random` &quot;</span>
                  <span class="s2">&quot;in v0.16 and will be removed in the future. &quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_1d_errors_random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_1d_errors_random">
    <p>def <span class="ident">get_1d_errors_random</span>(</p><p>self, N=1000)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the Gaussian standard deviation for every parameter/observable
obtained by generating N random values.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_1d_errors_random', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_1d_errors_random" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the Gaussian standard deviation for every parameter/observable</span>
<span class="sd">    obtained by generating N random values.&quot;&quot;&quot;</span>
    <span class="n">random_dict_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">interval_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">r</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">])</span>
        <span class="n">interval_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">interval_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_1d_errors_rightleft">
    <p>def <span class="ident">get_1d_errors_rightleft</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the left and right error for every parameter/observable
defined such that it contains 68% probability on each side of the
central value.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_1d_errors_rightleft', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_1d_errors_rightleft" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors_rightleft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get the left and right error for every parameter/observable</span>
<span class="sd">    defined such that it contains 68% probability on each side of the</span>
<span class="sd">    central value.&quot;&quot;&quot;</span>
    <span class="n">errors_left</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_left</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
    <span class="n">errors_right</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_right</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
    <span class="n">error_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># now, iterate over the parameters</span>
    <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="p">([</span><span class="n">constraint</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
        <span class="n">error_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_right</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">],</span>
                                 <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_left</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">error_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_central">
    <p>def <span class="ident">get_central</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the central value of a parameter</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_central', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_central" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the central value of a parameter&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">parameter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No constraints applied to parameter/observable &#39;</span> <span class="o">+</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">central_value</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cv</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cv</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="c1"># return the num-th entry of the central value vector</span>
            <span class="k">return</span> <span class="n">cv</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">cv</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Something went wrong when getting the central value of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_central_all">
    <p>def <span class="ident">get_central_all</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get central values of all constrained parameters.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_central_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_central_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get central values of all constrained parameters.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">parameter</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_logprobability_all">
    <p>def <span class="ident">get_logprobability_all</span>(</p><p>self, par_dict, exclude_parameters=[], delta=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a dictionary with the logarithm of the probability for each
constraint/probability distribution.</p>
<h2>Inputs</h2>
<ul>
<li>par_dict
  A dictionary of the form {parameter: value, ...} where parameter
  is a string and value a float.</li>
<li>exclude_parameters (optional)
  An iterable of strings (default: empty) that specifies parameters
  that should be ignored. Univariate constraints on this parameter
  will be skipped, while for multivariate normally distributed
  constraints, the parameter will be removed from the covariance.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_logprobability_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_logprobability_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_logprobability_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">exclude_parameters</span><span class="o">=</span><span class="p">[],</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">    constraint/probability distribution.</span>
<span class="sd">    Inputs</span>
<span class="sd">    ------</span>
<span class="sd">    - par_dict</span>
<span class="sd">      A dictionary of the form {parameter: value, ...} where parameter</span>
<span class="sd">      is a string and value a float.</span>
<span class="sd">    - exclude_parameters (optional)</span>
<span class="sd">      An iterable of strings (default: empty) that specifies parameters</span>
<span class="sd">      that should be ignored. Univariate constraints on this parameter</span>
<span class="sd">      will be skipped, while for multivariate normally distributed</span>
<span class="sd">      constraints, the parameter will be removed from the covariance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prob_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
        <span class="c1"># list of constrained parameters except the excluded ones</span>
        <span class="n">p_cons</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span>
                  <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_parameters</span>
                  <span class="ow">and</span> <span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">constraint</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">))]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">par_dict</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="p">:</span>
            <span class="c1"># nothing to constrain</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># 1D constraints should have a scalar, not a length-1 array</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for multivariate distributions</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
                <span class="c1"># no parameter has been excluded</span>
                <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">prob_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_logprobability_single">
    <p>def <span class="ident">get_logprobability_single</span>(</p><p>self, parameter, value, delta=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a dictionary with the logarithm of the probability for each
constraint/probability distribution for a given value of a
single parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_logprobability_single', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_logprobability_single" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_logprobability_single</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">    constraint/probability distribution for a given value of a</span>
<span class="sd">    single parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">)[</span><span class="n">constraint</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># for multivariate distributions</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">parameter</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_random_all">
    <p>def <span class="ident">get_random_all</span>(</p><p>self, size=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Get random values for all constrained parameters where they are
distributed according to the probability distribution applied.</p>
<p>If <code>size</code> is not None, the dictionary values will be arrays with length
<code>size</code> rather than numbers.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_random_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_random_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_random_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get random values for all constrained parameters where they are</span>
<span class="sd">    distributed according to the probability distribution applied.</span>
<span class="sd">    If `size` is not None, the dictionary values will be arrays with length</span>
<span class="sd">    `size` rather than numbers.&quot;&quot;&quot;</span>
    <span class="c1"># first, generate random values for every single one of the constraints</span>
    <span class="n">random_constraints</span> <span class="o">=</span> <span class="p">{</span><span class="n">constraint</span><span class="p">:</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
                          <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">}</span>
    <span class="n">random_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># now, iterate over the parameters</span>
    <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
        <span class="n">carr</span> <span class="o">=</span> <span class="n">random_constraints</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">carr</span><span class="p">):</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">():</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">size</span><span class="p">,)</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">size</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[:,</span> <span class="n">num</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected error in get_random_all&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">random_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_yaml">
    <p>def <span class="ident">get_yaml</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Get a YAML string representation of all constraints.</p>
<p>The optional parameter <code>pname</code> allows to customize the name of the key
containing the parameter list of each constraint (e.g. 'parameters',
'observables').</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a YAML string representation of all constraints.</span>
<span class="sd">    The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">    containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">    &#39;observables&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaml_dict</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.get_yaml_dict">
    <p>def <span class="ident">get_yaml_dict</span>(</p><p>self, pname=&#39;parameters&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Get an ordered dictionary representation of all constraints that can
be dumped as YAML string.</p>
<p>The optional parameter <code>pname</code> allows to customize the name of the key
containing the parameter list of each constraint (e.g. 'parameters',
'observables').</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.get_yaml_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.get_yaml_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_yaml_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get an ordered dictionary representation of all constraints that can</span>
<span class="sd">    be dumped as YAML string.</span>
<span class="sd">    The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">    containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">    &#39;observables&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="n">d</span><span class="p">[</span><span class="n">pname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">iterate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arraytolist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">meta</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">datameta</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">arg</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span>
        <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">datameta</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.read_default">
    <p>def <span class="ident">read_default</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Reset the instance and read the default parameters. Data is read
- from 'data/parameters_metadata.yml'
- from 'data/parameters_uncorrelated.yml'
- from 'data/parameters_correlated.yml'
- from the default PDG data file
- for B-&gt;V form factors
- for B-&gt;P form factors
- for Lambdab-&gt;Lambda form factors</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.read_default', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.read_default" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">read_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Reset the instance and read the default parameters. Data is read</span>
<span class="sd">    - from &#39;data/parameters_metadata.yml&#39;</span>
<span class="sd">    - from &#39;data/parameters_uncorrelated.yml&#39;</span>
<span class="sd">    - from &#39;data/parameters_correlated.yml&#39;</span>
<span class="sd">    - from the default PDG data file</span>
<span class="sd">    - for B-&gt;V form factors</span>
<span class="sd">    - for B-&gt;P form factors</span>
<span class="sd">    - for Lambdab-&gt;Lambda form factors</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># import functions to read parameters</span>
    <span class="kn">from</span> <span class="nn">flavio.parameters</span> <span class="kn">import</span> <span class="p">(</span>
        <span class="n">_read_yaml_object_metadata</span><span class="p">,</span>
        <span class="n">_read_yaml_object_values</span><span class="p">,</span>
        <span class="n">_read_yaml_object_values_correlated</span><span class="p">,</span>
        <span class="n">read_pdg</span>
    <span class="p">)</span>
    <span class="c1"># reset the instance</span>
    <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
    <span class="c1"># Read the parameter metadata from the default YAML data file</span>
    <span class="n">_read_yaml_object_metadata</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_metadata.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
    <span class="c1"># Read the uncorrelated parameter values from the default YAML data file</span>
    <span class="n">_read_yaml_object_values</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_uncorrelated.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
    <span class="c1"># Read the correlated parameter values from the default YAML data file</span>
    <span class="n">_read_yaml_object_values_correlated</span><span class="p">(</span><span class="n">pkgutil</span><span class="o">.</span><span class="n">get_data</span><span class="p">(</span><span class="s1">&#39;flavio&#39;</span><span class="p">,</span> <span class="s1">&#39;data/parameters_correlated.yml&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
    <span class="c1"># Read the parameters from the default PDG data file</span>
    <span class="n">read_pdg</span><span class="p">(</span><span class="mi">2018</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
    <span class="c1"># Read default parameters for B-&gt;V form factors</span>
    <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_v</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">bsz_load</span><span class="p">(</span><span class="s1">&#39;v2&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;omega&#39;</span><span class="p">,</span> <span class="s1">&#39;B-&gt;rho&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
    <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_v</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">bsz_load</span><span class="p">(</span><span class="s1">&#39;v2&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR-Lattice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;K*&#39;</span><span class="p">,</span> <span class="s1">&#39;Bs-&gt;phi&#39;</span><span class="p">,</span> <span class="s1">&#39;Bs-&gt;K*&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
    <span class="c1"># Read default parameters for B-&gt;P form factors</span>
    <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">b_p</span><span class="o">.</span><span class="n">bsz_parameters</span><span class="o">.</span><span class="n">gkvd_load</span><span class="p">(</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span> <span class="s1">&#39;LCSR-Lattice&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;B-&gt;K&#39;</span><span class="p">,</span> <span class="s1">&#39;B-&gt;pi&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="p">)</span>
    <span class="c1"># Read default parameters for Lambdab-&gt;Lambda form factors</span>
    <span class="n">flavio</span><span class="o">.</span><span class="n">physics</span><span class="o">.</span><span class="n">bdecays</span><span class="o">.</span><span class="n">formfactors</span><span class="o">.</span><span class="n">lambdab_12</span><span class="o">.</span><span class="n">lattice_parameters</span><span class="o">.</span><span class="n">lattice_load_ho</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.remove_constraint">
    <p>def <span class="ident">remove_constraint</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove existing constraint on a parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.remove_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.remove_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove existing constraint on a parameter.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.remove_constraints">
    <p>def <span class="ident">remove_constraints</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.remove_constraints', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.remove_constraints" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `remove_constraint` &quot;</span>
                  <span class="s2">&quot;in v0.16 and will be removed in the future.&quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.set_constraint">
    <p>def <span class="ident">set_constraint</span>(</p><p>self, parameter, constraint_string=None, constraint_dict=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the constraint on a parameter/observable by specifying a string
or a dictionary. If several constraints (e.g. several types of
uncertainty) are given, the total constraint will be the convolution
of the individual distributions. Existing constraints will be removed.</p>
<p>Arguments:</p>
<ul>
<li>parameter: parameter string (or tuple)</li>
<li>constraint_string: string specifying the constraint that can be e.g.
  of the form <code>'1.55(3)(1)'</code> or <code>'4.0±0.1'</code>.</li>
<li>constraint_dict: dictionary or list of several dictionaries of the
  form <code>{'distribution': 'distribution_name', 'arg1': val1, ...}</code>, where
  'distribution_name' is a string name associated to each probability
  distribution (see <code>flavio.statistics.probability.class_from_string</code>)
  and <code>'arg1'</code>, <code>val1</code> are argument/value pairs of the arguments of
  the distribution class's constructor (e.g.<code>central_value</code>,
  <code>standard_deviation</code> for a normal distribution).</li>
</ul>
<p><code>constraint_string</code> and <code>constraint_dict</code> must not be present
simultaneously.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.set_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.set_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraint_string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                    <span class="n">constraint_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Set the constraint on a parameter/observable by specifying a string</span>
<span class="sd">    or a dictionary. If several constraints (e.g. several types of</span>
<span class="sd">    uncertainty) are given, the total constraint will be the convolution</span>
<span class="sd">    of the individual distributions. Existing constraints will be removed.</span>
<span class="sd">    Arguments:</span>
<span class="sd">    - parameter: parameter string (or tuple)</span>
<span class="sd">    - constraint_string: string specifying the constraint that can be e.g.</span>
<span class="sd">      of the form `&#39;1.55(3)(1)&#39;` or `&#39;4.0±0.1&#39;`.</span>
<span class="sd">    - constraint_dict: dictionary or list of several dictionaries of the</span>
<span class="sd">      form `{&#39;distribution&#39;: &#39;distribution_name&#39;, &#39;arg1&#39;: val1, ...}`, where</span>
<span class="sd">      &#39;distribution_name&#39; is a string name associated to each probability</span>
<span class="sd">      distribution (see `flavio.statistics.probability.class_from_string`)</span>
<span class="sd">      and `&#39;arg1&#39;`, `val1` are argument/value pairs of the arguments of</span>
<span class="sd">      the distribution class&#39;s constructor (e.g.`central_value`,</span>
<span class="sd">      `standard_deviation` for a normal distribution).</span>
<span class="sd">    `constraint_string` and `constraint_dict` must not be present</span>
<span class="sd">    simultaneously.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;constraint_string and constraint_dict cannot&quot;</span>
                         <span class="s2">&quot; be used at the same time.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pds</span> <span class="o">=</span> <span class="n">constraints_from_string</span><span class="p">(</span><span class="n">constraint_string</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">constraint_dict</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Either constraint_string or constraint_dict have&quot;</span>
                        <span class="s2">&quot; to be specified.&quot;</span><span class="p">)</span>
    <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">([</span><span class="n">parameter</span><span class="p">],</span> <span class="n">combined_pd</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.ParameterConstraints.all_parameters" class="name">var <span class="ident">all_parameters</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#flavio.classes.Constraints">Constraints</a></code>.<code><a href="#flavio.classes.Constraints.all_parameters">all_parameters</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Returns a list of all parameters/observables constrained.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.from_yaml">
    <p>def <span class="ident">from_yaml</span>(</p><p>cls, stream, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: load constraint from a YAML string or stream.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.from_yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.from_yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: load constraint from a YAML string or stream.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_yaml_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.ParameterConstraints.from_yaml_dict">
    <p>def <span class="ident">from_yaml_dict</span>(</p><p>cls, data, pname=&#39;parameters&#39;, instance=None, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: load constraint from a dictionary or list of dicts.</p>
<p>If it is a dictionary, it should have the form:</p>
<p>```{
'metadata': {...},  # optional, do set attributes of the instance
'arguments': {...},  # optional, to specify keyword arguments for instantiation,
'constraints': [...],  # required, the list of constraints
}</p>
<p>Alternatively, the list of constraints can be directly given.
This list should have elements in one of the two possible forms:</p>
<ol>
<li>
<p>Dictionary as returned by <code>Probability.get_dict</code>:
<code>{
pname: [...],  # required, list of constrained parameters
'values': {
    'distribution': '...',  # required, string identifying ProbabilityDistribution, e.g. 'normal'
    '...': '...',  # required, any arguments for the instantiation of the ProbabilityDistribution
    }
}</code></p>
</li>
<li>
<p>String representing one or several (to be convolved) constraints:
```{
'my_parameter': '1.0 ± 0.2 ± 0.1 e-3'
}</p>
</li>
</ol></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.ParameterConstraints.from_yaml_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.ParameterConstraints.from_yaml_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: load constraint from a dictionary or list of dicts.</span>
<span class="sd">    If it is a dictionary, it should have the form:</span>
<span class="sd">    ```{</span>
<span class="sd">    &#39;metadata&#39;: {...},  # optional, do set attributes of the instance</span>
<span class="sd">    &#39;arguments&#39;: {...},  # optional, to specify keyword arguments for instantiation,</span>
<span class="sd">    &#39;constraints&#39;: [...],  # required, the list of constraints</span>
<span class="sd">    }</span>
<span class="sd">    Alternatively, the list of constraints can be directly given.</span>
<span class="sd">    This list should have elements in one of the two possible forms:</span>
<span class="sd">    1. Dictionary as returned by `Probability.get_dict`:</span>
<span class="sd">    ```{</span>
<span class="sd">    pname: [...],  # required, list of constrained parameters</span>
<span class="sd">    &#39;values&#39;: {</span>
<span class="sd">        &#39;distribution&#39;: &#39;...&#39;,  # required, string identifying ProbabilityDistribution, e.g. &#39;normal&#39;</span>
<span class="sd">        &#39;...&#39;: &#39;...&#39;,  # required, any arguments for the instantiation of the ProbabilityDistribution</span>
<span class="sd">        }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>
<span class="sd">    2. String representing one or several (to be convolved) constraints:</span>
<span class="sd">    ```{</span>
<span class="sd">    &#39;my_parameter&#39;: &#39;1.0 ± 0.2 ± 0.1 e-3&#39;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">inst</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;values&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># this means we probably have a constraint of the</span>
                <span class="c1"># form parameter: constraint_string</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># this loop runs only once</span>
                    <span class="n">inst</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                    <span class="k">break</span>  <span class="c1"># just to be sure</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># in this case something is clearly wrong. Mabye the</span>
                <span class="c1"># wrong &quot;pname&quot; was used.</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Key &#39;</span> <span class="o">+</span> <span class="n">pname</span> <span class="o">+</span> <span class="s1">&#39; not found. &#39;</span>
                                 <span class="s1">&#39;Please check the `pname` argument.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">c</span><span class="p">[</span><span class="n">pname</span><span class="p">]]</span>
            <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">])</span>
            <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
            <span class="n">inst</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">combined_pd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inst</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.Prediction" class="name">class <span class="ident">Prediction</span></p>
      
  
    <div class="desc"><p>A prediction is the theoretical prediction for an observable.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Prediction', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Prediction" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">Prediction</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A prediction is the theoretical prediction for an observable.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observable</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The observable &quot;</span> <span class="o">+</span> <span class="n">observable</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observable</span> <span class="o">=</span> <span class="n">observable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observable_obj</span> <span class="o">=</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">observable_obj</span><span class="o">.</span><span class="n">set_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_central_all</span><span class="p">()</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_par</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.Prediction">Prediction</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.Prediction.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, observable, function)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Prediction.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Prediction.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">observable</span><span class="p">,</span> <span class="n">function</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The observable &quot;</span> <span class="o">+</span> <span class="n">observable</span> <span class="o">+</span> <span class="s2">&quot; does not exist&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">observable</span> <span class="o">=</span> <span class="n">observable</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">observable_obj</span> <span class="o">=</span> <span class="n">Observable</span><span class="p">[</span><span class="n">observable</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">observable_obj</span><span class="o">.</span><span class="n">set_prediction</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Prediction.get_central">
    <p>def <span class="ident">get_central</span>(</p><p>self, constraints_obj, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Prediction.get_central', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Prediction.get_central" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">constraints_obj</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">par_dict</span> <span class="o">=</span> <span class="n">constraints_obj</span><span class="o">.</span><span class="n">get_central_all</span><span class="p">()</span>
    <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.Prediction.get_par">
    <p>def <span class="ident">get_par</span>(</p><p>self, par_dict, wc_obj, *args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.Prediction.get_par', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.Prediction.get_par" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_par</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">wc_obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">fwc_obj</span> <span class="o">=</span> <span class="n">flavio</span><span class="o">.</span><span class="n">WilsonCoefficients</span><span class="o">.</span><span class="n">from_wilson</span><span class="p">(</span><span class="n">wc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="n">fwc_obj</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.Prediction.function" class="name">var <span class="ident">function</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Prediction.observable" class="name">var <span class="ident">observable</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.classes.Prediction.observable_obj" class="name">var <span class="ident">observable_obj</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
      </div>
      </div>
      
      <div class="item">
      <p id="flavio.classes.WilsonCoefficientPriors" class="name">class <span class="ident">WilsonCoefficientPriors</span></p>
      
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">WilsonCoefficientPriors</span><span class="p">(</span><span class="n">Constraints</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.classes.WilsonCoefficientPriors">WilsonCoefficientPriors</a></li>
          <li><a href="#flavio.classes.Constraints">Constraints</a></li>
          <li>builtins.object</li>
          </ul>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize self.  See help(type(self)) for accurate signature.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.add_constraint">
    <p>def <span class="ident">add_constraint</span>(</p><p>self, parameters, constraint)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the constraint on one or several parameters/observables.</p>
<p><code>constraint</code> must be an instance of a child of ProbabilityDistribution.</p>
<p>Note that if there already exists a constraint, it will be removed.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.add_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.add_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">constraint</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set the constraint on one or several parameters/observables.</span>
<span class="sd">    `constraint` must be an instance of a child of ProbabilityDistribution.</span>
<span class="sd">    Note that if there already exists a constraint, it will be removed.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
        <span class="c1"># remove constraint if there is one</span>
        <span class="k">if</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
    <span class="c1"># populate the dictionaries defined in __init__</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="n">constraint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.copy">
    <p>def <span class="ident">copy</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.copy', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.copy" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># this is to have a .copy() method like for a dictionary</span>
    <span class="k">return</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_1d_errors">
    <p>def <span class="ident">get_1d_errors</span>(</p><p>self, N=1000)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_1d_errors', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_1d_errors" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `get_1d_errors_random` &quot;</span>
                  <span class="s2">&quot;in v0.16 and will be removed in the future. &quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_1d_errors_random</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_1d_errors_random">
    <p>def <span class="ident">get_1d_errors_random</span>(</p><p>self, N=1000)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the Gaussian standard deviation for every parameter/observable
obtained by generating N random values.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_1d_errors_random', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_1d_errors_random" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors_random</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">N</span><span class="o">=</span><span class="mi">1000</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the Gaussian standard deviation for every parameter/observable</span>
<span class="sd">    obtained by generating N random values.&quot;&quot;&quot;</span>
    <span class="n">random_dict_list</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">get_random_all</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span>
    <span class="n">interval_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="n">arr</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">r</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">random_dict_list</span><span class="p">])</span>
        <span class="n">interval_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">interval_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_1d_errors_rightleft">
    <p>def <span class="ident">get_1d_errors_rightleft</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the left and right error for every parameter/observable
defined such that it contains 68% probability on each side of the
central value.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_1d_errors_rightleft', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_1d_errors_rightleft" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_1d_errors_rightleft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get the left and right error for every parameter/observable</span>
<span class="sd">    defined such that it contains 68% probability on each side of the</span>
<span class="sd">    central value.&quot;&quot;&quot;</span>
    <span class="n">errors_left</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_left</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
    <span class="n">errors_right</span> <span class="o">=</span> <span class="p">[</span><span class="n">constraint</span><span class="o">.</span><span class="n">error_right</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">]</span>
    <span class="n">error_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># now, iterate over the parameters</span>
    <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="p">([</span><span class="n">constraint</span> <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">])</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">constraint</span><span class="p">)</span>
        <span class="n">error_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_right</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">],</span>
                                 <span class="n">np</span><span class="o">.</span><span class="n">ravel</span><span class="p">([</span><span class="n">errors_left</span><span class="p">[</span><span class="n">idx</span><span class="p">]])[</span><span class="n">num</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">error_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_central">
    <p>def <span class="ident">get_central</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
    <div class="desc"><p>Get the central value of a parameter</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_central', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_central" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the central value of a parameter&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">parameter</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No constraints applied to parameter/observable &#39;</span> <span class="o">+</span> <span class="n">parameter</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
        <span class="n">cv</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">central_value</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">cv</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">cv</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
            <span class="c1"># return the num-th entry of the central value vector</span>
            <span class="k">return</span> <span class="n">cv</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">cv</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Something went wrong when getting the central value of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_central_all">
    <p>def <span class="ident">get_central_all</span>(</p><p>self)</p>
    </div>
    

    
  
    <div class="desc"><p>Get central values of all constrained parameters.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_central_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_central_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_central_all</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get central values of all constrained parameters.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">parameter</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_central</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span> <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()}</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_logprobability_all">
    <p>def <span class="ident">get_logprobability_all</span>(</p><p>self, par_dict, exclude_parameters=[], delta=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a dictionary with the logarithm of the probability for each
constraint/probability distribution.</p>
<h2>Inputs</h2>
<ul>
<li>par_dict
  A dictionary of the form {parameter: value, ...} where parameter
  is a string and value a float.</li>
<li>exclude_parameters (optional)
  An iterable of strings (default: empty) that specifies parameters
  that should be ignored. Univariate constraints on this parameter
  will be skipped, while for multivariate normally distributed
  constraints, the parameter will be removed from the covariance.</li>
</ul></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_logprobability_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_logprobability_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_logprobability_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">par_dict</span><span class="p">,</span> <span class="n">exclude_parameters</span><span class="o">=</span><span class="p">[],</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">    constraint/probability distribution.</span>
<span class="sd">    Inputs</span>
<span class="sd">    ------</span>
<span class="sd">    - par_dict</span>
<span class="sd">      A dictionary of the form {parameter: value, ...} where parameter</span>
<span class="sd">      is a string and value a float.</span>
<span class="sd">    - exclude_parameters (optional)</span>
<span class="sd">      An iterable of strings (default: empty) that specifies parameters</span>
<span class="sd">      that should be ignored. Univariate constraints on this parameter</span>
<span class="sd">      will be skipped, while for multivariate normally distributed</span>
<span class="sd">      constraints, the parameter will be removed from the covariance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prob_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
        <span class="c1"># list of constrained parameters except the excluded ones</span>
        <span class="n">p_cons</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span>
                  <span class="k">if</span> <span class="p">(</span><span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">exclude_parameters</span>
                  <span class="ow">and</span> <span class="p">(</span><span class="n">parameters</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">p</span><span class="p">),</span> <span class="n">constraint</span><span class="p">)</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="kc">None</span><span class="p">))]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">par_dict</span><span class="p">[</span><span class="n">p</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">x</span><span class="p">:</span>
            <span class="c1"># nothing to constrain</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1"># 1D constraints should have a scalar, not a length-1 array</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># for multivariate distributions</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">):</span>
                <span class="c1"># no parameter has been excluded</span>
                <span class="n">exclude</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                                <span class="k">if</span> <span class="n">p</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p_cons</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prob_dict</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">prob_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_logprobability_single">
    <p>def <span class="ident">get_logprobability_single</span>(</p><p>self, parameter, value, delta=False)</p>
    </div>
    

    
  
    <div class="desc"><p>Return a dictionary with the logarithm of the probability for each
constraint/probability distribution for a given value of a
single parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_logprobability_single', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_logprobability_single" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_logprobability_single</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">delta</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return a dictionary with the logarithm of the probability for each</span>
<span class="sd">    constraint/probability distribution for a given value of a</span>
<span class="sd">    single parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span>
    <span class="n">parameters</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">)[</span><span class="n">constraint</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># for multivariate distributions</span>
        <span class="n">exclude</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">parameters</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">p</span> <span class="o">!=</span> <span class="n">parameter</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">delta</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">constraint</span><span class="o">.</span><span class="n">delta_logpdf</span><span class="p">([</span><span class="n">value</span><span class="p">],</span> <span class="n">exclude</span><span class="o">=</span><span class="n">exclude</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_random_all">
    <p>def <span class="ident">get_random_all</span>(</p><p>self, size=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Get random values for all constrained parameters where they are
distributed according to the probability distribution applied.</p>
<p>If <code>size</code> is not None, the dictionary values will be arrays with length
<code>size</code> rather than numbers.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_random_all', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_random_all" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_random_all</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get random values for all constrained parameters where they are</span>
<span class="sd">    distributed according to the probability distribution applied.</span>
<span class="sd">    If `size` is not None, the dictionary values will be arrays with length</span>
<span class="sd">    `size` rather than numbers.&quot;&quot;&quot;</span>
    <span class="c1"># first, generate random values for every single one of the constraints</span>
    <span class="n">random_constraints</span> <span class="o">=</span> <span class="p">{</span><span class="n">constraint</span><span class="p">:</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_random</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="n">size</span><span class="p">)</span>
                          <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">}</span>
    <span class="n">random_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># now, iterate over the parameters</span>
    <span class="k">for</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraints</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">num</span><span class="p">,</span> <span class="n">constraint</span> <span class="o">=</span> <span class="n">constraints</span>
        <span class="n">carr</span> <span class="o">=</span> <span class="n">random_constraints</span><span class="p">[</span><span class="n">constraint</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">np</span><span class="o">.</span><span class="n">isscalar</span><span class="p">(</span><span class="n">carr</span><span class="p">):</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">():</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">size</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[</span><span class="n">num</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span> <span class="o">==</span> <span class="p">(</span><span class="n">size</span><span class="p">,)</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span>
        <span class="k">elif</span> <span class="n">carr</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">carr</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">size</span><span class="p">:</span>
            <span class="n">random_dict</span><span class="p">[</span><span class="n">parameter</span><span class="p">]</span> <span class="o">=</span> <span class="n">carr</span><span class="p">[:,</span> <span class="n">num</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Unexpected error in get_random_all&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">random_dict</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_yaml">
    <p>def <span class="ident">get_yaml</span>(</p><p>self, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Get a YAML string representation of all constraints.</p>
<p>The optional parameter <code>pname</code> allows to customize the name of the key
containing the parameter list of each constraint (e.g. 'parameters',
'observables').</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_yaml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get a YAML string representation of all constraints.</span>
<span class="sd">    The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">    containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">    &#39;observables&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_yaml_dict</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.get_yaml_dict">
    <p>def <span class="ident">get_yaml_dict</span>(</p><p>self, pname=&#39;parameters&#39;)</p>
    </div>
    

    
  
    <div class="desc"><p>Get an ordered dictionary representation of all constraints that can
be dumped as YAML string.</p>
<p>The optional parameter <code>pname</code> allows to customize the name of the key
containing the parameter list of each constraint (e.g. 'parameters',
'observables').</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.get_yaml_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.get_yaml_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_yaml_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get an ordered dictionary representation of all constraints that can</span>
<span class="sd">    be dumped as YAML string.</span>
<span class="sd">    The optional parameter `pname` allows to customize the name of the key</span>
<span class="sd">    containing the parameter list of each constraint (e.g. &#39;parameters&#39;,</span>
<span class="sd">    &#39;observables&#39;).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">constraint</span><span class="p">,</span> <span class="n">parameters</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_constraints</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="n">d</span><span class="p">[</span><span class="n">pname</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nb">list</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">parameters</span><span class="p">]</span>
        <span class="n">d</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">constraint</span><span class="o">.</span><span class="n">get_dict</span><span class="p">(</span><span class="n">distribution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                          <span class="n">iterate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">arraytolist</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
    <span class="n">args</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
    <span class="n">meta</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">k</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;_&#39;</span> <span class="ow">and</span> <span class="n">v</span> <span class="o">!=</span> <span class="s1">&#39;&#39;</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">meta</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">datameta</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">args</span><span class="p">:</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">arg</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span> <span class="k">for</span> <span class="n">arg</span> <span class="ow">in</span> <span class="n">args</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;metadata&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span>
        <span class="n">datameta</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">return</span> <span class="n">datameta</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.remove_constraint">
    <p>def <span class="ident">remove_constraint</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
    <div class="desc"><p>Remove existing constraint on a parameter.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.remove_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.remove_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Remove existing constraint on a parameter.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_parameters</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.remove_constraints">
    <p>def <span class="ident">remove_constraints</span>(</p><p>self, parameter)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.remove_constraints', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.remove_constraints" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_constraints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;This function was renamed to `remove_constraint` &quot;</span>
                  <span class="s2">&quot;in v0.16 and will be removed in the future.&quot;</span><span class="p">,</span>
                  <span class="ne">DeprecationWarning</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_constraint</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.set_constraint">
    <p>def <span class="ident">set_constraint</span>(</p><p>self, parameter, constraint_string=None, constraint_dict=None)</p>
    </div>
    

    
  
    <div class="desc"><p>Set the constraint on a parameter/observable by specifying a string
or a dictionary. If several constraints (e.g. several types of
uncertainty) are given, the total constraint will be the convolution
of the individual distributions. Existing constraints will be removed.</p>
<p>Arguments:</p>
<ul>
<li>parameter: parameter string (or tuple)</li>
<li>constraint_string: string specifying the constraint that can be e.g.
  of the form <code>'1.55(3)(1)'</code> or <code>'4.0±0.1'</code>.</li>
<li>constraint_dict: dictionary or list of several dictionaries of the
  form <code>{'distribution': 'distribution_name', 'arg1': val1, ...}</code>, where
  'distribution_name' is a string name associated to each probability
  distribution (see <code>flavio.statistics.probability.class_from_string</code>)
  and <code>'arg1'</code>, <code>val1</code> are argument/value pairs of the arguments of
  the distribution class's constructor (e.g.<code>central_value</code>,
  <code>standard_deviation</code> for a normal distribution).</li>
</ul>
<p><code>constraint_string</code> and <code>constraint_dict</code> must not be present
simultaneously.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.set_constraint', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.set_constraint" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">set_constraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">,</span> <span class="n">constraint_string</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                    <span class="n">constraint_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sa">r</span><span class="sd">&quot;&quot;&quot;Set the constraint on a parameter/observable by specifying a string</span>
<span class="sd">    or a dictionary. If several constraints (e.g. several types of</span>
<span class="sd">    uncertainty) are given, the total constraint will be the convolution</span>
<span class="sd">    of the individual distributions. Existing constraints will be removed.</span>
<span class="sd">    Arguments:</span>
<span class="sd">    - parameter: parameter string (or tuple)</span>
<span class="sd">    - constraint_string: string specifying the constraint that can be e.g.</span>
<span class="sd">      of the form `&#39;1.55(3)(1)&#39;` or `&#39;4.0±0.1&#39;`.</span>
<span class="sd">    - constraint_dict: dictionary or list of several dictionaries of the</span>
<span class="sd">      form `{&#39;distribution&#39;: &#39;distribution_name&#39;, &#39;arg1&#39;: val1, ...}`, where</span>
<span class="sd">      &#39;distribution_name&#39; is a string name associated to each probability</span>
<span class="sd">      distribution (see `flavio.statistics.probability.class_from_string`)</span>
<span class="sd">      and `&#39;arg1&#39;`, `val1` are argument/value pairs of the arguments of</span>
<span class="sd">      the distribution class&#39;s constructor (e.g.`central_value`,</span>
<span class="sd">      `standard_deviation` for a normal distribution).</span>
<span class="sd">    `constraint_string` and `constraint_dict` must not be present</span>
<span class="sd">    simultaneously.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;constraint_string and constraint_dict cannot&quot;</span>
                         <span class="s2">&quot; be used at the same time.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">constraint_string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pds</span> <span class="o">=</span> <span class="n">constraints_from_string</span><span class="p">(</span><span class="n">constraint_string</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">constraint_dict</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">constraint_dict</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;Either constraint_string or constraint_dict have&quot;</span>
                        <span class="s2">&quot; to be specified.&quot;</span><span class="p">)</span>
    <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">([</span><span class="n">parameter</span><span class="p">],</span> <span class="n">combined_pd</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Instance variables</h3>
            <div class="item">
            <p id="flavio.classes.WilsonCoefficientPriors.all_parameters" class="name">var <span class="ident">all_parameters</span></p>
            
    <p class="inheritance">
     <strong>Inheritance:</strong>
       <code><a href="#flavio.classes.Constraints">Constraints</a></code>.<code><a href="#flavio.classes.Constraints.all_parameters">all_parameters</a></code>
    </p>

            
  
    <div class="desc inherited"><p>Returns a list of all parameters/observables constrained.</p></div>
  <div class="source_cont">
</div>

            </div>
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.from_yaml">
    <p>def <span class="ident">from_yaml</span>(</p><p>cls, stream, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: load constraint from a YAML string or stream.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.from_yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.from_yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">stream</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: load constraint from a YAML string or stream.&quot;&quot;&quot;</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">from_yaml_dict</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.classes.WilsonCoefficientPriors.from_yaml_dict">
    <p>def <span class="ident">from_yaml_dict</span>(</p><p>cls, data, pname=&#39;parameters&#39;, instance=None, *args, **kwargs)</p>
    </div>
    

    
  
    <div class="desc"><p>Class method: load constraint from a dictionary or list of dicts.</p>
<p>If it is a dictionary, it should have the form:</p>
<p>```{
'metadata': {...},  # optional, do set attributes of the instance
'arguments': {...},  # optional, to specify keyword arguments for instantiation,
'constraints': [...],  # required, the list of constraints
}</p>
<p>Alternatively, the list of constraints can be directly given.
This list should have elements in one of the two possible forms:</p>
<ol>
<li>
<p>Dictionary as returned by <code>Probability.get_dict</code>:
<code>{
pname: [...],  # required, list of constrained parameters
'values': {
    'distribution': '...',  # required, string identifying ProbabilityDistribution, e.g. 'normal'
    '...': '...',  # required, any arguments for the instantiation of the ProbabilityDistribution
    }
}</code></p>
</li>
<li>
<p>String representing one or several (to be convolved) constraints:
```{
'my_parameter': '1.0 ± 0.2 ± 0.1 e-3'
}</p>
</li>
</ol></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.classes.WilsonCoefficientPriors.from_yaml_dict', this);">Show source &equiv;</a></p>
  <div id="source-flavio.classes.WilsonCoefficientPriors.from_yaml_dict" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">from_yaml_dict</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">pname</span><span class="o">=</span><span class="s1">&#39;parameters&#39;</span><span class="p">,</span> <span class="n">instance</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class method: load constraint from a dictionary or list of dicts.</span>
<span class="sd">    If it is a dictionary, it should have the form:</span>
<span class="sd">    ```{</span>
<span class="sd">    &#39;metadata&#39;: {...},  # optional, do set attributes of the instance</span>
<span class="sd">    &#39;arguments&#39;: {...},  # optional, to specify keyword arguments for instantiation,</span>
<span class="sd">    &#39;constraints&#39;: [...],  # required, the list of constraints</span>
<span class="sd">    }</span>
<span class="sd">    Alternatively, the list of constraints can be directly given.</span>
<span class="sd">    This list should have elements in one of the two possible forms:</span>
<span class="sd">    1. Dictionary as returned by `Probability.get_dict`:</span>
<span class="sd">    ```{</span>
<span class="sd">    pname: [...],  # required, list of constrained parameters</span>
<span class="sd">    &#39;values&#39;: {</span>
<span class="sd">        &#39;distribution&#39;: &#39;...&#39;,  # required, string identifying ProbabilityDistribution, e.g. &#39;normal&#39;</span>
<span class="sd">        &#39;...&#39;: &#39;...&#39;,  # required, any arguments for the instantiation of the ProbabilityDistribution</span>
<span class="sd">        }</span>
<span class="sd">    }</span>
<span class="sd">    ```</span>
<span class="sd">    2. String representing one or several (to be convolved) constraints:</span>
<span class="sd">    ```{</span>
<span class="sd">    &#39;my_parameter&#39;: &#39;1.0 ± 0.2 ± 0.1 e-3&#39;</span>
<span class="sd">    }</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;constraints&#39;</span><span class="p">]</span>
        <span class="n">meta</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;metadata&#39;</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">arguments</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;arguments&#39;</span><span class="p">]</span>
        <span class="n">kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">meta</span><span class="p">:</span>
            <span class="n">inst</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">m</span><span class="p">]</span> <span class="o">=</span> <span class="n">meta</span><span class="p">[</span><span class="n">m</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">inst</span> <span class="o">=</span> <span class="n">instance</span> <span class="ow">or</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">constraints</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">constraints</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">pname</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
            <span class="k">if</span> <span class="s1">&#39;values&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">c</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># this means we probably have a constraint of the</span>
                <span class="c1"># form parameter: constraint_string</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">c</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>  <span class="c1"># this loop runs only once</span>
                    <span class="n">inst</span><span class="o">.</span><span class="n">set_constraint</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span>
                    <span class="k">break</span>  <span class="c1"># just to be sure</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># in this case something is clearly wrong. Mabye the</span>
                <span class="c1"># wrong &quot;pname&quot; was used.</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Key &#39;</span> <span class="o">+</span> <span class="n">pname</span> <span class="o">+</span> <span class="s1">&#39; not found. &#39;</span>
                                 <span class="s1">&#39;Please check the `pname` argument.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="k">else</span> <span class="n">p</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">c</span><span class="p">[</span><span class="n">pname</span><span class="p">]]</span>
            <span class="n">pds</span> <span class="o">=</span> <span class="n">dict2dist</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;values&#39;</span><span class="p">])</span>
            <span class="n">combined_pd</span> <span class="o">=</span> <span class="n">convolve_distributions</span><span class="p">(</span><span class="n">pds</span><span class="p">)</span>
            <span class="n">inst</span><span class="o">.</span><span class="n">add_constraint</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="n">combined_pd</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">inst</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>

    <script>
      renderMathInElement(document.body, options={delimiters:[
  {left: "$$", right: "$$", display: true},
  {left: "\\[", right: "\\]", display: true},
  {left: "\\(", right: "\\)", display: false},
  {left: "$", right: "$", display: false}
]});
    </script>
    <script type="text/javascript">
    $("script[type='math/tex; mode=display']").replaceWith(
      function(){
        var tex = $(this).text();
        return "<span class=\"katex-display\">" +
               katex.renderToString("\\displaystyle "+tex) +
               "</span>";
    });
    </script>

</body>
</html>
