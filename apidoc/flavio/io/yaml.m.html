<!doctype html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>flavio.io.yaml API documentation</title>
    <meta name="description" content="Functions for working with YAML files." />

  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Noto+Sans:400' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/public/plugins/katex/katex.min.css">
  
  <style type="text/css">
  
* {
  box-sizing: border-box;
}
/*! normalize.css v1.1.1 | MIT License | git.io/normalize */

/* ==========================================================================
   HTML5 display definitions
   ========================================================================== */

/**
 * Correct `block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
nav,
section,
summary {
    display: block;
}

/**
 * Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 */

audio,
canvas,
video {
    display: inline-block;
    *display: inline;
    *zoom: 1;
}

/**
 * Prevent modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */

audio:not([controls]) {
    display: none;
    height: 0;
}

/**
 * Address styling not present in IE 7/8/9, Firefox 3, and Safari 4.
 * Known issue: no IE 6 support.
 */

[hidden] {
    display: none;
}

/* ==========================================================================
   Base
   ========================================================================== */

/**
 * 1. Prevent system color scheme's background color being used in Firefox, IE,
 *    and Opera.
 * 2. Prevent system color scheme's text color being used in Firefox, IE, and
 *    Opera.
 * 3. Correct text resizing oddly in IE 6/7 when body `font-size` is set using
 *    `em` units.
 * 4. Prevent iOS text size adjust after orientation change, without disabling
 *    user zoom.
 */

html {
    background: #fff; /* 1 */
    color: #000; /* 2 */
    font-size: 100%; /* 3 */
    -webkit-text-size-adjust: 100%; /* 4 */
    -ms-text-size-adjust: 100%; /* 4 */
}

/**
 * Address `font-family` inconsistency between `textarea` and other form
 * elements.
 */

html,
button,
input,
select,
textarea {
    font-family: sans-serif;
}

/**
 * Address margins handled incorrectly in IE 6/7.
 */

body {
    margin: 0;
}

/* ==========================================================================
   Links
   ========================================================================== */

/**
 * Address `outline` inconsistency between Chrome and other browsers.
 */

a:focus {
    outline: thin dotted;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */

a:active,
a:hover {
    outline: 0;
}

/* ==========================================================================
   Typography
   ========================================================================== */

/**
 * Address font sizes and margins set differently in IE 6/7.
 * Address font sizes within `section` and `article` in Firefox 4+, Safari 5,
 * and Chrome.
 */

h1 {
    font-size: 2em;
    margin: 0.67em 0;
}

h2 {
    font-size: 1.5em;
    margin: 0.83em 0;
}

h3 {
    font-size: 1.17em;
    margin: 1em 0;
}

h4 {
    font-size: 1em;
    margin: 1.33em 0;
}

h5 {
    font-size: 0.83em;
    margin: 1.67em 0;
}

h6 {
    font-size: 0.67em;
    margin: 2.33em 0;
}

/**
 * Address styling not present in IE 7/8/9, Safari 5, and Chrome.
 */

abbr[title] {
    border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 3+, Safari 4/5, and Chrome.
 */

b,
strong {
    font-weight: bold;
}

blockquote {
    margin: 1em 40px;
}

/**
 * Address styling not present in Safari 5 and Chrome.
 */

dfn {
    font-style: italic;
}

/**
 * Address differences between Firefox and other browsers.
 * Known issue: no IE 6/7 normalization.
 */

hr {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    height: 0;
}

/**
 * Address styling not present in IE 6/7/8/9.
 */

mark {
    background: #ff0;
    color: #000;
}

/**
 * Address margins set differently in IE 6/7.
 */

p,
pre {
    margin: 1em 0;
}

/**
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */

code,
kbd,
pre,
samp {
    font-family: monospace, serif;
    _font-family: 'courier new', monospace;
    font-size: 1em;
}

/**
 * Improve readability of pre-formatted text in all browsers.
 */

pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
}

/**
 * Address CSS quotes not supported in IE 6/7.
 */

q {
    quotes: none;
}

/**
 * Address `quotes` property not supported in Safari 4.
 */

q:before,
q:after {
    content: '';
    content: none;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */

small {
    font-size: 80%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */

sub,
sup {
    font-size: 75%;
    line-height: 0;
    position: relative;
    vertical-align: baseline;
}

sup {
    top: -0.5em;
}

sub {
    bottom: -0.25em;
}

/* ==========================================================================
   Lists
   ========================================================================== */

/**
 * Address margins set differently in IE 6/7.
 */

dl,
menu,
ol,
ul {
    margin: 1em 0;
}

dd {
    margin: 0 0 0 40px;
}

/**
 * Address paddings set differently in IE 6/7.
 */

menu,
ol,
ul {
    padding: 0 0 0 40px;
}

/**
 * Correct list images handled incorrectly in IE 7.
 */

nav ul,
nav ol {
    list-style: none;
    list-style-image: none;
}

/* ==========================================================================
   Embedded content
   ========================================================================== */

/**
 * 1. Remove border when inside `a` element in IE 6/7/8/9 and Firefox 3.
 * 2. Improve image quality when scaled in IE 7.
 */

img {
    border: 0; /* 1 */
    -ms-interpolation-mode: bicubic; /* 2 */
}

/**
 * Correct overflow displayed oddly in IE 9.
 */

svg:not(:root) {
    overflow: hidden;
}

/* ==========================================================================
   Figures
   ========================================================================== */

/**
 * Address margin not present in IE 6/7/8/9, Safari 5, and Opera 11.
 */

figure {
    margin: 0;
}

/* ==========================================================================
   Forms
   ========================================================================== */

/**
 * Correct margin displayed oddly in IE 6/7.
 */

form {
    margin: 0;
}

/**
 * Define consistent border, margin, and padding.
 */

fieldset {
    border: 1px solid #c0c0c0;
    margin: 0 2px;
    padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct color not being inherited in IE 6/7/8/9.
 * 2. Correct text not wrapping in Firefox 3.
 * 3. Correct alignment displayed oddly in IE 6/7.
 */

legend {
    border: 0; /* 1 */
    padding: 0;
    white-space: normal; /* 2 */
    *margin-left: -7px; /* 3 */
}

/**
 * 1. Correct font size not being inherited in all browsers.
 * 2. Address margins set differently in IE 6/7, Firefox 3+, Safari 5,
 *    and Chrome.
 * 3. Improve appearance and consistency in all browsers.
 */

button,
input,
select,
textarea {
    font-size: 100%; /* 1 */
    margin: 0; /* 2 */
    vertical-align: baseline; /* 3 */
    *vertical-align: middle; /* 3 */
}

/**
 * Address Firefox 3+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */

button,
input {
    line-height: normal;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Chrome, Safari 5+, and IE 6+.
 * Correct `select` style inheritance in Firefox 4+ and Opera.
 */

button,
select {
    text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *    and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *    `input` and others.
 * 4. Remove inner spacing in IE 7 without affecting normal text inputs.
 *    Known issue: inner spacing remains in IE 6.
 */

button,
html input[type="button"], /* 1 */
input[type="reset"],
input[type="submit"] {
    -webkit-appearance: button; /* 2 */
    cursor: pointer; /* 3 */
    *overflow: visible;  /* 4 */
}

/**
 * Re-set default cursor for disabled elements.
 */

button[disabled],
html input[disabled] {
    cursor: default;
}

/**
 * 1. Address box sizing set to content-box in IE 8/9.
 * 2. Remove excess padding in IE 8/9.
 * 3. Remove excess padding in IE 7.
 *    Known issue: excess padding remains in IE 6.
 */

input[type="checkbox"],
input[type="radio"] {
    box-sizing: border-box; /* 1 */
    padding: 0; /* 2 */
    *height: 13px; /* 3 */
    *width: 13px; /* 3 */
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome
 *    (include `-moz` to future-proof).
 */

input[type="search"] {
    -webkit-appearance: textfield; /* 1 */
    -moz-box-sizing: content-box;
    -webkit-box-sizing: content-box; /* 2 */
    box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari 5 and Chrome
 * on OS X.
 */

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
    -webkit-appearance: none;
}

/**
 * Remove inner padding and border in Firefox 3+.
 */

button::-moz-focus-inner,
input::-moz-focus-inner {
    border: 0;
    padding: 0;
}

/**
 * 1. Remove default vertical scrollbar in IE 6/7/8/9.
 * 2. Improve readability and alignment in all browsers.
 */

textarea {
    overflow: auto; /* 1 */
    vertical-align: top; /* 2 */
}

/* ==========================================================================
   Tables
   ========================================================================== */

/**
 * Remove most spacing between table cells.
 */

table {
    border-collapse: collapse;
    border-spacing: 0;
}

    .katex {
      font-size:1em;
    }
    .katex .mathit, .katex .mathrm {
      font-family: 'Noto Sans';
    }
  </style>

  <style type="text/css">
  
  html, body {
    margin: 0;
    padding: 0;
    min-height: 100%;
  }
  body {
    background: #fff;
    font-family: "Noto Sans", "Helvetica Neue", Helvetica, sans;
    font-weight: 400;
    font-size: 16px;
    line-height: 1.6em;
  }
  #content {
    width: 70%;
    max-width: 850px;
    float: left;
    padding: 30px 60px;
    border-left: 1px solid #ddd;
  }
  #sidebar {
    width: 25%;
    float: left;
    padding: 30px;
    overflow: hidden;
  }
  #nav {
    font-size: 130%;
    margin: 0 0 15px 0;
  }

  #top {
    display: block;
    position: fixed;
    bottom: 5px;
    left: 5px;
    font-size: .85em;
    text-transform: uppercase;
  }

  #footer {
    font-size: .75em;
    padding: 5px 30px;
    border-top: 1px solid #ddd;
    text-align: right;
  }
    #footer p {
      margin: 0 0 0 30px;
      display: inline-block;
    }

  h1, h2, h3, h4, h5 {
    font-weight: 300;
  }
  h1 {
    font-size: 2.5em;
    line-height: 1.1em;
    margin: 0 0 .50em 0;
  }

  h2 {
    font-size: 1.75em;
    margin: 1em 0 .50em 0;
  }

  h3 {
    margin: 25px 0 10px 0;
  }

  h4 {
    margin: 0;
    font-size: 105%;
  }

  a {
    color: #058;
    text-decoration: none;
    transition: color .3s ease-in-out;
  }

  a:hover {
    color: #e08524;
    transition: color .3s ease-in-out;
  }

  pre, code, .mono, .name {
    font-family: "Ubuntu Mono", "Cousine", "DejaVu Sans Mono", monospace;
  }

  .title .name {
    font-weight: bold;
  }
  .section-title {
    margin-top: 2em;
  }
  .ident {
    color: #900;
  }

  code {
    background: #f9f9f9;
  }

  pre {
    background: #fefefe;
    border: 1px solid #ddd;
    box-shadow: 2px 2px 0 #f3f3f3;
    margin: 0 30px;
    padding: 15px 30px;
  }

  .codehilite {
    margin: 0 30px 10px 30px;
  }

    .codehilite pre {
      margin: 0;
    }
    .codehilite .err { background: #ff3300; color: #fff !important; }

  table#module-list {
    font-size: 110%;
  }

    table#module-list tr td:first-child {
      padding-right: 10px;
      white-space: nowrap;
    }

    table#module-list td {
      vertical-align: top;
      padding-bottom: 8px;
    }

      table#module-list td p {
        margin: 0 0 7px 0;
      }

  .def {
    display: table;
  }

    .def p {
      display: table-cell;
      vertical-align: top;
      text-align: left;
    }

    .def p:first-child {
      white-space: nowrap;
    }

    .def p:last-child {
      width: 100%;
    }


  #index {
    list-style-type: none;
    margin: 0;
    padding: 0;
  }
    ul#index .class_name {
      /* font-size: 110%; */
      font-weight: bold;
    }
    #index ul {
      margin: 0;
    }

  .item {
    margin: 0 0 15px 0;
  }

    .item .class {
      margin: 0 0 25px 30px;
    }

      .item .class ul.class_list {
        margin: 0 0 20px 0;
      }

    .item .name {
      background: #fafafa;
      margin: 0;
      font-weight: bold;
      padding: 5px 10px;
      border-radius: 3px;
      display: inline-block;
      min-width: 40%;
    }
      .item .name:hover {
        background: #f6f6f6;
      }

    .item .empty_desc {
      margin: 0 0 5px 0;
      padding: 0;
    }

    .item .inheritance {
      margin: 3px 0 0 30px;
    }

    .item .inherited {
      color: #666;
    }

    .item .desc {
      padding: 0 8px;
      margin: 0;
    }

      .item .desc p {
        margin: 0 0 10px 0;
      }

    .source_cont {
      margin: 0;
      padding: 0;
    }

    .source_link a {
      background: #ffc300;
      font-weight: 400;
      font-size: .75em;
      text-transform: uppercase;
      color: #fff;
      text-shadow: 1px 1px 0 #f4b700;

      padding: 3px 8px;
      border-radius: 2px;
      transition: background .3s ease-in-out;
    }
      .source_link a:hover {
        background: #FF7200;
        text-shadow: none;
        transition: background .3s ease-in-out;
      }

    .source {
      display: none;
      max-height: 600px;
      overflow-y: scroll;
      margin-bottom: 15px;
    }

      .source .codehilite {
        margin: 0;
      }

  .desc h1, .desc h2, .desc h3 {
    font-size: 100% !important;
  }
  .clear {
    clear: both;
  }

  @media all and (max-width: 950px) {
    #sidebar {
      width: 35%;
    }
    #content {
      width: 65%;
    }
  }
  @media all and (max-width: 650px) {
    #top {
      display: none;
    }
    #sidebar {
      float: none;
      width: auto;
    }
    #content {
      float: none;
      width: auto;
      padding: 30px;
    }

    #index ul {
      padding: 0;
      margin-bottom: 15px;
    }
    #index ul li {
      display: inline-block;
      margin-right: 30px;
    }
    #footer {
      text-align: left;
    }
    #footer p {
      display: block;
      margin: inherit;
    }
  }

  /*****************************/

  </style>

  <style type="text/css">
  pre { line-height: 125%; margin: 0; }
td.linenos pre { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
span.linenos { color: #000000; background-color: #f0f0f0; padding: 0 5px 0 5px; }
td.linenos pre.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding: 0 5px 0 5px; }
.codehilite .hll { background-color: #ffffcc }
.codehilite { background: #f8f8f8; }
.codehilite .c { color: #408080; font-style: italic } /* Comment */
.codehilite .err { border: 1px solid #FF0000 } /* Error */
.codehilite .k { color: #008000; font-weight: bold } /* Keyword */
.codehilite .o { color: #666666 } /* Operator */
.codehilite .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.codehilite .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.codehilite .cp { color: #BC7A00 } /* Comment.Preproc */
.codehilite .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.codehilite .c1 { color: #408080; font-style: italic } /* Comment.Single */
.codehilite .cs { color: #408080; font-style: italic } /* Comment.Special */
.codehilite .gd { color: #A00000 } /* Generic.Deleted */
.codehilite .ge { font-style: italic } /* Generic.Emph */
.codehilite .gr { color: #FF0000 } /* Generic.Error */
.codehilite .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.codehilite .gi { color: #00A000 } /* Generic.Inserted */
.codehilite .go { color: #888888 } /* Generic.Output */
.codehilite .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.codehilite .gs { font-weight: bold } /* Generic.Strong */
.codehilite .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.codehilite .gt { color: #0044DD } /* Generic.Traceback */
.codehilite .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.codehilite .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.codehilite .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.codehilite .kp { color: #008000 } /* Keyword.Pseudo */
.codehilite .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.codehilite .kt { color: #B00040 } /* Keyword.Type */
.codehilite .m { color: #666666 } /* Literal.Number */
.codehilite .s { color: #BA2121 } /* Literal.String */
.codehilite .na { color: #7D9029 } /* Name.Attribute */
.codehilite .nb { color: #008000 } /* Name.Builtin */
.codehilite .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.codehilite .no { color: #880000 } /* Name.Constant */
.codehilite .nd { color: #AA22FF } /* Name.Decorator */
.codehilite .ni { color: #999999; font-weight: bold } /* Name.Entity */
.codehilite .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.codehilite .nf { color: #0000FF } /* Name.Function */
.codehilite .nl { color: #A0A000 } /* Name.Label */
.codehilite .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.codehilite .nt { color: #008000; font-weight: bold } /* Name.Tag */
.codehilite .nv { color: #19177C } /* Name.Variable */
.codehilite .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.codehilite .w { color: #bbbbbb } /* Text.Whitespace */
.codehilite .mb { color: #666666 } /* Literal.Number.Bin */
.codehilite .mf { color: #666666 } /* Literal.Number.Float */
.codehilite .mh { color: #666666 } /* Literal.Number.Hex */
.codehilite .mi { color: #666666 } /* Literal.Number.Integer */
.codehilite .mo { color: #666666 } /* Literal.Number.Oct */
.codehilite .sa { color: #BA2121 } /* Literal.String.Affix */
.codehilite .sb { color: #BA2121 } /* Literal.String.Backtick */
.codehilite .sc { color: #BA2121 } /* Literal.String.Char */
.codehilite .dl { color: #BA2121 } /* Literal.String.Delimiter */
.codehilite .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.codehilite .s2 { color: #BA2121 } /* Literal.String.Double */
.codehilite .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.codehilite .sh { color: #BA2121 } /* Literal.String.Heredoc */
.codehilite .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.codehilite .sx { color: #008000 } /* Literal.String.Other */
.codehilite .sr { color: #BB6688 } /* Literal.String.Regex */
.codehilite .s1 { color: #BA2121 } /* Literal.String.Single */
.codehilite .ss { color: #19177C } /* Literal.String.Symbol */
.codehilite .bp { color: #008000 } /* Name.Builtin.Pseudo */
.codehilite .fm { color: #0000FF } /* Name.Function.Magic */
.codehilite .vc { color: #19177C } /* Name.Variable.Class */
.codehilite .vg { color: #19177C } /* Name.Variable.Global */
.codehilite .vi { color: #19177C } /* Name.Variable.Instance */
.codehilite .vm { color: #19177C } /* Name.Variable.Magic */
.codehilite .il { color: #666666 } /* Literal.Number.Integer.Long */
  </style>

  <style type="text/css">
  
/* ==========================================================================
   EXAMPLE Media Queries for Responsive Design.
   These examples override the primary ('mobile first') styles.
   Modify as content requires.
   ========================================================================== */

@media only screen and (min-width: 35em) {
    /* Style adjustments for viewports that meet the condition */
}

@media print,
       (-o-min-device-pixel-ratio: 5/4),
       (-webkit-min-device-pixel-ratio: 1.25),
       (min-resolution: 120dpi) {
    /* Style adjustments for high resolution devices */
}

/* ==========================================================================
   Print styles.
   Inlined to avoid required HTTP connection: h5bp.com/r
   ========================================================================== */

@media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster: h5bp.com/s */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    a,
    a:visited {
        text-decoration: underline;
    }

    a[href]:after {
        content: " (" attr(href) ")";
    }

    abbr[title]:after {
        content: " (" attr(title) ")";
    }

    /*
     * Don't show links for images, or javascript/internal links
     */

    .ir a:after,
    a[href^="javascript:"]:after,
    a[href^="#"]:after {
        content: "";
    }

    pre,
    blockquote {
        border: 1px solid #999;
        page-break-inside: avoid;
    }

    thead {
        display: table-header-group; /* h5bp.com/t */
    }

    tr,
    img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }

    @page {
        margin: 0.5cm;
    }

    p,
    h2,
    h3 {
        orphans: 3;
        widows: 3;
    }

    h2,
    h3 {
        page-break-after: avoid;
    }
}

  </style>

  <script type="text/javascript">
  function toggle(id, $link) {
    $node = document.getElementById(id);
    if (!$node)
    return;
    if (!$node.style.display || $node.style.display == 'none') {
    $node.style.display = 'block';
    $link.innerHTML = 'Hide source &nequiv;';
    } else {
    $node.style.display = 'none';
    $link.innerHTML = 'Show source &equiv;';
    }
  }
  </script>
    <script src="/public/plugins/katex/katex.min.js"></script>
    <script src="/public/plugins/katex/auto-render.min.js"></script>
</head>
<body>
<a href="#" id="top">Top</a>

<div id="container">
    
  
  <div id="sidebar">
    <h1>Index</h1>
    <ul id="index">

    <li class="set"><h3><a href="#header-functions">Functions</a></h3>
      
  <ul>
    <li class="mono"><a href="#flavio.io.yaml.dict_constructor">dict_constructor</a></li>
    <li class="mono"><a href="#flavio.io.yaml.load_include">load_include</a></li>
    <li class="mono"><a href="#flavio.io.yaml.represent_dict_order">represent_dict_order</a></li>
  </ul>

    </li>

    <li class="set"><h3><a href="#header-classes">Classes</a></h3>
      <ul>
        <li class="mono">
        <span class="class_name"><a href="#flavio.io.yaml.SafeIncludeLoader">SafeIncludeLoader</a></span>
        
          
  <ul>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.__init__">__init__</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.add_indent">add_indent</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.ascend_resolver">ascend_resolver</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_block_entry">check_block_entry</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_data">check_data</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_directive">check_directive</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_document_end">check_document_end</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_document_start">check_document_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_event">check_event</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_key">check_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_node">check_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_plain">check_plain</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_printable">check_printable</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_resolver_prefix">check_resolver_prefix</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_state_key">check_state_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_token">check_token</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.check_value">check_value</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.compose_document">compose_document</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.compose_mapping_node">compose_mapping_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.compose_node">compose_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.compose_scalar_node">compose_scalar_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.compose_sequence_node">compose_sequence_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_document">construct_document</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_mapping">construct_mapping</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_object">construct_object</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_pairs">construct_pairs</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_scalar">construct_scalar</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_sequence">construct_sequence</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_undefined">construct_undefined</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_binary">construct_yaml_binary</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_bool">construct_yaml_bool</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_float">construct_yaml_float</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_int">construct_yaml_int</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_map">construct_yaml_map</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_null">construct_yaml_null</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_object">construct_yaml_object</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_omap">construct_yaml_omap</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_pairs">construct_yaml_pairs</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_seq">construct_yaml_seq</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_set">construct_yaml_set</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_str">construct_yaml_str</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.construct_yaml_timestamp">construct_yaml_timestamp</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.descend_resolver">descend_resolver</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.determine_encoding">determine_encoding</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.dispose">dispose</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_alias">fetch_alias</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_anchor">fetch_anchor</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_block_entry">fetch_block_entry</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_block_scalar">fetch_block_scalar</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_directive">fetch_directive</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_document_end">fetch_document_end</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_document_indicator">fetch_document_indicator</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_document_start">fetch_document_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_double">fetch_double</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_flow_collection_end">fetch_flow_collection_end</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_flow_collection_start">fetch_flow_collection_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_flow_entry">fetch_flow_entry</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_flow_mapping_end">fetch_flow_mapping_end</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_flow_mapping_start">fetch_flow_mapping_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_flow_scalar">fetch_flow_scalar</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_flow_sequence_end">fetch_flow_sequence_end</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_flow_sequence_start">fetch_flow_sequence_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_folded">fetch_folded</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_key">fetch_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_literal">fetch_literal</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_more_tokens">fetch_more_tokens</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_plain">fetch_plain</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_single">fetch_single</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_stream_end">fetch_stream_end</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_stream_start">fetch_stream_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_tag">fetch_tag</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.fetch_value">fetch_value</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.flatten_mapping">flatten_mapping</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.forward">forward</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.get_data">get_data</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.get_event">get_event</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.get_mark">get_mark</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.get_node">get_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.get_single_data">get_single_data</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.get_single_node">get_single_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.get_token">get_token</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.include">include</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.include_merge_list">include_merge_list</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.need_more_tokens">need_more_tokens</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.next_possible_simple_key">next_possible_simple_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_first_key">parse_block_mapping_first_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_key">parse_block_mapping_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_value">parse_block_mapping_value</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_block_node">parse_block_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_block_node_or_indentless_sequence">parse_block_node_or_indentless_sequence</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_block_sequence_entry">parse_block_sequence_entry</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_block_sequence_first_entry">parse_block_sequence_first_entry</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_document_content">parse_document_content</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_document_end">parse_document_end</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_document_start">parse_document_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_empty_value">parse_flow_mapping_empty_value</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_first_key">parse_flow_mapping_first_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_key">parse_flow_mapping_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_value">parse_flow_mapping_value</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_node">parse_flow_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry">parse_flow_sequence_entry</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_end">parse_flow_sequence_entry_mapping_end</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_key">parse_flow_sequence_entry_mapping_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_value">parse_flow_sequence_entry_mapping_value</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_first_entry">parse_flow_sequence_first_entry</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_implicit_document_start">parse_implicit_document_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_indentless_sequence_entry">parse_indentless_sequence_entry</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_node">parse_node</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.parse_stream_start">parse_stream_start</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.peek">peek</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.peek_event">peek_event</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.peek_token">peek_token</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.prefix">prefix</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.process_directives">process_directives</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.process_empty_scalar">process_empty_scalar</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.remove_possible_simple_key">remove_possible_simple_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.resolve">resolve</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.save_possible_simple_key">save_possible_simple_key</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_anchor">scan_anchor</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_block_scalar">scan_block_scalar</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_breaks">scan_block_scalar_breaks</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_ignored_line">scan_block_scalar_ignored_line</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_indentation">scan_block_scalar_indentation</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_indicators">scan_block_scalar_indicators</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_directive">scan_directive</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_directive_ignored_line">scan_directive_ignored_line</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_directive_name">scan_directive_name</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar">scan_flow_scalar</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_breaks">scan_flow_scalar_breaks</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_non_spaces">scan_flow_scalar_non_spaces</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_spaces">scan_flow_scalar_spaces</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_line_break">scan_line_break</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_plain">scan_plain</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_plain_spaces">scan_plain_spaces</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_tag">scan_tag</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_handle">scan_tag_directive_handle</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_prefix">scan_tag_directive_prefix</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_value">scan_tag_directive_value</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_tag_handle">scan_tag_handle</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_tag_uri">scan_tag_uri</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_to_next_token">scan_to_next_token</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_uri_escapes">scan_uri_escapes</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_yaml_directive_number">scan_yaml_directive_number</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.scan_yaml_directive_value">scan_yaml_directive_value</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.stale_possible_simple_keys">stale_possible_simple_keys</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.unwind_indent">unwind_indent</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.update">update</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.update_raw">update_raw</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.add_constructor">add_constructor</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.add_implicit_resolver">add_implicit_resolver</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.add_multi_constructor">add_multi_constructor</a></li>
    <li class="mono"><a href="#flavio.io.yaml.SafeIncludeLoader.add_path_resolver">add_path_resolver</a></li>
  </ul>

        </li>
      </ul>
    </li>

    </ul>
  </div>

    <article id="content">
      
  

  


  <header id="section-intro">
  <h1 class="title"><span class="name">flavio.io.yaml</span> module</h1>
  <p>Functions for working with YAML files.</p>
  
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml" class="source">
    <div class="codehilite"><pre><span></span><span class="sd">&quot;&quot;&quot;Functions for working with YAML files.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">OrderedDict</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">errno</span>


<span class="k">def</span> <span class="nf">represent_dict_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">represent_mapping</span><span class="p">(</span><span class="s1">&#39;tag:yaml.org,2002:map&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="n">yaml</span><span class="o">.</span><span class="n">add_representer</span><span class="p">(</span><span class="n">OrderedDict</span><span class="p">,</span> <span class="n">represent_dict_order</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">dict_constructor</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">loader</span><span class="o">.</span><span class="n">construct_pairs</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
<span class="n">yaml</span><span class="o">.</span><span class="n">add_constructor</span><span class="p">(</span><span class="s1">&#39;tag:yaml.org,2002:map&#39;</span><span class="p">,</span> <span class="n">dict_constructor</span><span class="p">)</span>
<span class="n">yaml</span><span class="o">.</span><span class="n">SafeLoader</span><span class="o">.</span><span class="n">add_constructor</span><span class="p">(</span><span class="s1">&#39;tag:yaml.org,2002:map&#39;</span><span class="p">,</span> <span class="n">dict_constructor</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">SafeIncludeLoader</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">SafeLoader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;PyYAML loader supporting the `!include` and `!include_merge_list`</span>
<span class="sd">    constructors.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="c1"># this happens when `stream` is a string</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">include</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_filename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">{}</span><span class="s2">&#39; cannot be included. If the YAML input is a string, &#39;!include&#39; only supports absolute paths.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">include_merge_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;If the YAML input is a string, &#39;!include_merge_list&#39; only supports absolute paths.&quot;</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_sequence</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_filename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">a</span> <span class="o">+=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="ow">in</span> <span class="p">[</span><span class="n">errno</span><span class="o">.</span><span class="n">ENOENT</span><span class="p">,</span> <span class="n">errno</span><span class="o">.</span><span class="n">EINVAL</span><span class="p">,</span> <span class="n">errno</span><span class="o">.</span><span class="n">EISDIR</span><span class="p">]:</span>
                        <span class="c1"># ENOENT: FileNotFoundError</span>
                        <span class="c1"># EINVAL: Invalid argument</span>
                        <span class="c1"># EISDIR: IsADirectoryError</span>
                        <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span>
        <span class="k">return</span> <span class="n">a</span>

    <span class="k">def</span> <span class="nf">_get_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">file</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>




<span class="n">SafeIncludeLoader</span><span class="o">.</span><span class="n">add_constructor</span><span class="p">(</span><span class="s1">&#39;!include&#39;</span><span class="p">,</span>
                                  <span class="n">SafeIncludeLoader</span><span class="o">.</span><span class="n">include</span><span class="p">)</span>
<span class="n">SafeIncludeLoader</span><span class="o">.</span><span class="n">add_constructor</span><span class="p">(</span><span class="s1">&#39;!include_merge_list&#39;</span><span class="p">,</span>
                                  <span class="n">SafeIncludeLoader</span><span class="o">.</span><span class="n">include_merge_list</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">load_include</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">SafeIncludeLoader</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>

  </header>

  <section id="section-items">

    <h2 class="section-title" id="header-functions">Functions</h2>
      
  <div class="item">
    <div class="name def" id="flavio.io.yaml.dict_constructor">
    <p>def <span class="ident">dict_constructor</span>(</p><p>loader, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.dict_constructor', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.dict_constructor" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dict_constructor</span><span class="p">(</span><span class="n">loader</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">OrderedDict</span><span class="p">(</span><span class="n">loader</span><span class="o">.</span><span class="n">construct_pairs</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="flavio.io.yaml.load_include">
    <p>def <span class="ident">load_include</span>(</p><p>*args, **kwargs)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.load_include', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.load_include" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">load_include</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">SafeIncludeLoader</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
      
  <div class="item">
    <div class="name def" id="flavio.io.yaml.represent_dict_order">
    <p>def <span class="ident">represent_dict_order</span>(</p><p>self, data)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.represent_dict_order', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.represent_dict_order" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">represent_dict_order</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">represent_mapping</span><span class="p">(</span><span class="s1">&#39;tag:yaml.org,2002:map&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  

    <h2 class="section-title" id="header-classes">Classes</h2>
      
      <div class="item">
      <p id="flavio.io.yaml.SafeIncludeLoader" class="name">class <span class="ident">SafeIncludeLoader</span></p>
      
  
    <div class="desc"><p>PyYAML loader supporting the <code>!include</code> and <code>!include_merge_list</code>
constructors.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader" class="source">
    <div class="codehilite"><pre><span></span><span class="k">class</span> <span class="nc">SafeIncludeLoader</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">SafeLoader</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;PyYAML loader supporting the `!include` and `!include_merge_list`</span>
<span class="sd">    constructors.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="c1"># this happens when `stream` is a string</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">include</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_filename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">{}</span><span class="s2">&#39; cannot be included. If the YAML input is a string, &#39;!include&#39; only supports absolute paths.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">include_merge_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;If the YAML input is a string, &#39;!include_merge_list&#39; only supports absolute paths.&quot;</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_sequence</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_filename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">a</span> <span class="o">+=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="ow">in</span> <span class="p">[</span><span class="n">errno</span><span class="o">.</span><span class="n">ENOENT</span><span class="p">,</span> <span class="n">errno</span><span class="o">.</span><span class="n">EINVAL</span><span class="p">,</span> <span class="n">errno</span><span class="o">.</span><span class="n">EISDIR</span><span class="p">]:</span>
                        <span class="c1"># ENOENT: FileNotFoundError</span>
                        <span class="c1"># EINVAL: Invalid argument</span>
                        <span class="c1"># EISDIR: IsADirectoryError</span>
                        <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">raise</span>
        <span class="k">return</span> <span class="n">a</span>

    <span class="k">def</span> <span class="nf">_get_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">file</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_root</span><span class="p">,</span> <span class="n">file</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
</pre></div>

  </div>
</div>


      <div class="class">
          <h3>Ancestors (in MRO)</h3>
          <ul class="class_list">
          <li><a href="#flavio.io.yaml.SafeIncludeLoader">SafeIncludeLoader</a></li>
          <li>yaml.loader.SafeLoader</li>
          <li>yaml.reader.Reader</li>
          <li>yaml.scanner.Scanner</li>
          <li>yaml.parser.Parser</li>
          <li>yaml.composer.Composer</li>
          <li>yaml.constructor.SafeConstructor</li>
          <li>yaml.constructor.BaseConstructor</li>
          <li>yaml.resolver.Resolver</li>
          <li>yaml.resolver.BaseResolver</li>
          <li>builtins.object</li>
          </ul>
          <h3>Class variables</h3>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.DEFAULT_MAPPING_TAG" class="name">var <span class="ident">DEFAULT_MAPPING_TAG</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.DEFAULT_SCALAR_TAG" class="name">var <span class="ident">DEFAULT_SCALAR_TAG</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.DEFAULT_SEQUENCE_TAG" class="name">var <span class="ident">DEFAULT_SEQUENCE_TAG</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.DEFAULT_TAGS" class="name">var <span class="ident">DEFAULT_TAGS</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.ESCAPE_CODES" class="name">var <span class="ident">ESCAPE_CODES</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.ESCAPE_REPLACEMENTS" class="name">var <span class="ident">ESCAPE_REPLACEMENTS</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.NON_PRINTABLE" class="name">var <span class="ident">NON_PRINTABLE</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.bool_values" class="name">var <span class="ident">bool_values</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.inf_value" class="name">var <span class="ident">inf_value</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.nan_value" class="name">var <span class="ident">nan_value</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.timestamp_regexp" class="name">var <span class="ident">timestamp_regexp</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.yaml_constructors" class="name">var <span class="ident">yaml_constructors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.yaml_implicit_resolvers" class="name">var <span class="ident">yaml_implicit_resolvers</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.yaml_multi_constructors" class="name">var <span class="ident">yaml_multi_constructors</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
            <div class="item">
            <p id="flavio.io.yaml.SafeIncludeLoader.yaml_path_resolvers" class="name">var <span class="ident">yaml_path_resolvers</span></p>
            

            
  
  <div class="source_cont">
</div>

            </div>
          <h3>Static methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.__init__">
    <p>def <span class="ident">__init__</span>(</p><p>self, stream)</p>
    </div>
    

    
  
    <div class="desc"><p>Initialize the scanner.</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.__init__', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.__init__" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stream</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">stream</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="c1"># this happens when `stream` is a string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.add_indent">
    <p>def <span class="ident">add_indent</span>(</p><p>self, column)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.add_indent', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.add_indent" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">add_indent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
    <span class="c1"># Check if we need to increase indentation.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">&lt;</span> <span class="n">column</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">=</span> <span class="n">column</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.ascend_resolver">
    <p>def <span class="ident">ascend_resolver</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.ascend_resolver', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.ascend_resolver" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">ascend_resolver</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_path_resolvers</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resolver_exact_paths</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resolver_prefix_paths</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_block_entry">
    <p>def <span class="ident">check_block_entry</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_block_entry', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_block_entry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_block_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># BLOCK-ENTRY:      &#39;-&#39; (&#39; &#39;|&#39;\n&#39;)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_data">
    <p>def <span class="ident">check_data</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_data', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># If there are more documents available?</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_node</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_directive">
    <p>def <span class="ident">check_directive</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_directive', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_directive" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_directive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># DIRECTIVE:        ^ &#39;%&#39; ...</span>
    <span class="c1"># The &#39;%&#39; indicator is already checked.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_document_end">
    <p>def <span class="ident">check_document_end</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_document_end', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_document_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_document_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># DOCUMENT-END:     ^ &#39;...&#39; (&#39; &#39;|&#39;\n&#39;)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;...&#39;</span>  \
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_document_start">
    <p>def <span class="ident">check_document_start</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_document_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_document_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_document_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># DOCUMENT-START:   ^ &#39;---&#39; (&#39; &#39;|&#39;\n&#39;)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;---&#39;</span>  \
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_event">
    <p>def <span class="ident">check_event</span>(</p><p>self, *choices)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_event', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_event" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">choices</span><span class="p">):</span>
    <span class="c1"># Check the type of the next event.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">choices</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_event</span><span class="p">,</span> <span class="n">choice</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_key">
    <p>def <span class="ident">check_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># KEY(flow context):    &#39;?&#39;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="c1"># KEY(block context):   &#39;?&#39; (&#39; &#39;|&#39;\n&#39;)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_node">
    <p>def <span class="ident">check_node</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Drop the STREAM-START event.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">StreamStartEvent</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="c1"># If there are more documents available?</span>
    <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">StreamEndEvent</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_plain">
    <p>def <span class="ident">check_plain</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_plain', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_plain" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_plain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># A plain scalar may start with any non-space character except:</span>
    <span class="c1">#   &#39;-&#39;, &#39;?&#39;, &#39;:&#39;, &#39;,&#39;, &#39;[&#39;, &#39;]&#39;, &#39;{&#39;, &#39;}&#39;,</span>
    <span class="c1">#   &#39;#&#39;, &#39;&amp;&#39;, &#39;*&#39;, &#39;!&#39;, &#39;|&#39;, &#39;&gt;&#39;, &#39;\&#39;&#39;, &#39;\&quot;&#39;,</span>
    <span class="c1">#   &#39;%&#39;, &#39;@&#39;, &#39;`&#39;.</span>
    <span class="c1">#</span>
    <span class="c1"># It may also start with</span>
    <span class="c1">#   &#39;-&#39;, &#39;?&#39;, &#39;:&#39;</span>
    <span class="c1"># if it is followed by a non-space character.</span>
    <span class="c1">#</span>
    <span class="c1"># Note that we limit the last rule to the block context (except the</span>
    <span class="c1"># &#39;-&#39; character) because we want the flow context to be space</span>
    <span class="c1"># independent.</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">-?:,[]</span><span class="si">{}</span><span class="s1">#&amp;*!|&gt;</span><span class="se">\&#39;\&quot;</span><span class="s1">%@`&#39;</span>  \
            <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span>
                    <span class="ow">and</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="ow">and</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;?:&#39;</span><span class="p">)))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_printable">
    <p>def <span class="ident">check_printable</span>(</p><p>self, data)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_printable', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_printable" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_printable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">NON_PRINTABLE</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
        <span class="n">character</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
        <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">+</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="p">)</span><span class="o">+</span><span class="n">match</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="k">raise</span> <span class="n">ReaderError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="nb">ord</span><span class="p">(</span><span class="n">character</span><span class="p">),</span>
                <span class="s1">&#39;unicode&#39;</span><span class="p">,</span> <span class="s2">&quot;special characters are not allowed&quot;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_resolver_prefix">
    <p>def <span class="ident">check_resolver_prefix</span>(</p><p>self, depth, path, kind, current_node, current_index)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_resolver_prefix', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_resolver_prefix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_resolver_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">depth</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span>
        <span class="n">current_node</span><span class="p">,</span> <span class="n">current_index</span><span class="p">):</span>
    <span class="n">node_check</span><span class="p">,</span> <span class="n">index_check</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="n">depth</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node_check</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">current_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="n">node_check</span><span class="p">:</span>
            <span class="k">return</span>
    <span class="k">elif</span> <span class="n">node_check</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">current_node</span><span class="p">,</span> <span class="n">node_check</span><span class="p">):</span>
            <span class="k">return</span>
    <span class="k">if</span> <span class="n">index_check</span> <span class="ow">is</span> <span class="kc">True</span> <span class="ow">and</span> <span class="n">current_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">index_check</span> <span class="ow">is</span> <span class="kc">False</span> <span class="ow">or</span> <span class="n">index_check</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span>    \
            <span class="ow">and</span> <span class="n">current_index</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index_check</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">current_index</span><span class="p">,</span> <span class="n">ScalarNode</span><span class="p">)</span>
                <span class="ow">and</span> <span class="n">index_check</span> <span class="o">==</span> <span class="n">current_index</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="k">return</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index_check</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index_check</span><span class="p">,</span> <span class="nb">bool</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">index_check</span> <span class="o">!=</span> <span class="n">current_index</span><span class="p">:</span>
            <span class="k">return</span>
    <span class="k">return</span> <span class="kc">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_state_key">
    <p>def <span class="ident">check_state_key</span>(</p><p>self, key)</p>
    </div>
    

    
  
    <div class="desc"><p>Block special attributes/methods from being set in a newly created
object, to prevent user-controlled methods from being called during
deserialization</p></div>
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_state_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_state_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_state_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Block special attributes/methods from being set in a newly created</span>
<span class="sd">    object, to prevent user-controlled methods from being called during</span>
<span class="sd">    deserialization&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_state_keys_blacklist_regexp</span><span class="p">()</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;blacklisted key &#39;</span><span class="si">%s</span><span class="s2">&#39; in instance state found&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,),</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_token">
    <p>def <span class="ident">check_token</span>(</p><p>self, *choices)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_token', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_token" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_token</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">choices</span><span class="p">):</span>
    <span class="c1"># Check if the next token is one of the given types.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">need_more_tokens</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fetch_more_tokens</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">choices</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">for</span> <span class="n">choice</span> <span class="ow">in</span> <span class="n">choices</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">choice</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
    <span class="k">return</span> <span class="kc">False</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.check_value">
    <p>def <span class="ident">check_value</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.check_value', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.check_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">check_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># VALUE(flow context):  &#39;:&#39;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="c1"># VALUE(block context): &#39;:&#39; (&#39; &#39;|&#39;\n&#39;)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.compose_document">
    <p>def <span class="ident">compose_document</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.compose_document', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.compose_document" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">compose_document</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Drop the DOCUMENT-START event.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="c1"># Compose the root node.</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compose_node</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="c1"># Drop the DOCUMENT-END event.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">anchors</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.compose_mapping_node">
    <p>def <span class="ident">compose_mapping_node</span>(</p><p>self, anchor)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.compose_mapping_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.compose_mapping_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">compose_mapping_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">):</span>
    <span class="n">start_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">start_event</span><span class="o">.</span><span class="n">tag</span>
    <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">MappingNode</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start_event</span><span class="o">.</span><span class="n">implicit</span><span class="p">)</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">MappingNode</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="p">[],</span>
            <span class="n">start_event</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">flow_style</span><span class="o">=</span><span class="n">start_event</span><span class="o">.</span><span class="n">flow_style</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchors</span><span class="p">[</span><span class="n">anchor</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">MappingEndEvent</span><span class="p">):</span>
        <span class="c1">#key_event = self.peek_event()</span>
        <span class="n">item_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compose_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="c1">#if item_key in node.value:</span>
        <span class="c1">#    raise ComposerError(&quot;while composing a mapping&quot;, start_event.start_mark,</span>
        <span class="c1">#            &quot;found duplicate key&quot;, key_event.start_mark)</span>
        <span class="n">item_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compose_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">item_key</span><span class="p">)</span>
        <span class="c1">#node.value[item_key] = item_value</span>
        <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">item_key</span><span class="p">,</span> <span class="n">item_value</span><span class="p">))</span>
    <span class="n">end_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="n">node</span><span class="o">.</span><span class="n">end_mark</span> <span class="o">=</span> <span class="n">end_event</span><span class="o">.</span><span class="n">end_mark</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.compose_node">
    <p>def <span class="ident">compose_node</span>(</p><p>self, parent, index)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.compose_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.compose_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">compose_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">index</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">AliasEvent</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
        <span class="n">anchor</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">anchor</span>
        <span class="k">if</span> <span class="n">anchor</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ComposerError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;found undefined alias </span><span class="si">%r</span><span class="s2">&quot;</span>
                    <span class="o">%</span> <span class="n">anchor</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchors</span><span class="p">[</span><span class="n">anchor</span><span class="p">]</span>
    <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_event</span><span class="p">()</span>
    <span class="n">anchor</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">anchor</span>
    <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">anchor</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchors</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ComposerError</span><span class="p">(</span><span class="s2">&quot;found duplicate anchor </span><span class="si">%r</span><span class="s2">; first occurrence&quot;</span>
                    <span class="o">%</span> <span class="n">anchor</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchors</span><span class="p">[</span><span class="n">anchor</span><span class="p">]</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;second occurrence&quot;</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">descend_resolver</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">index</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">ScalarEvent</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compose_scalar_node</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">SequenceStartEvent</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compose_sequence_node</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span>
    <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">MappingStartEvent</span><span class="p">):</span>
        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compose_mapping_node</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ascend_resolver</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.compose_scalar_node">
    <p>def <span class="ident">compose_scalar_node</span>(</p><p>self, anchor)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.compose_scalar_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.compose_scalar_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">compose_scalar_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">):</span>
    <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">tag</span>
    <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">ScalarNode</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">implicit</span><span class="p">)</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">ScalarNode</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
            <span class="n">event</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">event</span><span class="o">.</span><span class="n">end_mark</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">style</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchors</span><span class="p">[</span><span class="n">anchor</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.compose_sequence_node">
    <p>def <span class="ident">compose_sequence_node</span>(</p><p>self, anchor)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.compose_sequence_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.compose_sequence_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">compose_sequence_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">):</span>
    <span class="n">start_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="n">tag</span> <span class="o">=</span> <span class="n">start_event</span><span class="o">.</span><span class="n">tag</span>
    <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve</span><span class="p">(</span><span class="n">SequenceNode</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">start_event</span><span class="o">.</span><span class="n">implicit</span><span class="p">)</span>
    <span class="n">node</span> <span class="o">=</span> <span class="n">SequenceNode</span><span class="p">(</span><span class="n">tag</span><span class="p">,</span> <span class="p">[],</span>
            <span class="n">start_event</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
            <span class="n">flow_style</span><span class="o">=</span><span class="n">start_event</span><span class="o">.</span><span class="n">flow_style</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchors</span><span class="p">[</span><span class="n">anchor</span><span class="p">]</span> <span class="o">=</span> <span class="n">node</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">SequenceEndEvent</span><span class="p">):</span>
        <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">compose_node</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">index</span><span class="p">))</span>
        <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">end_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="n">node</span><span class="o">.</span><span class="n">end_mark</span> <span class="o">=</span> <span class="n">end_event</span><span class="o">.</span><span class="n">end_mark</span>
    <span class="k">return</span> <span class="n">node</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_document">
    <p>def <span class="ident">construct_document</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_document', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_document" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_document</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_object</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_generators</span><span class="p">:</span>
        <span class="n">state_generators</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state_generators</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state_generators</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">generator</span> <span class="ow">in</span> <span class="n">state_generators</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="n">generator</span><span class="p">:</span>
                <span class="k">pass</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constructed_objects</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recursive_objects</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">deep_construct</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_mapping">
    <p>def <span class="ident">construct_mapping</span>(</p><p>self, node, deep=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_mapping', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_mapping" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flatten_mapping</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">construct_mapping</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="n">deep</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_object">
    <p>def <span class="ident">construct_object</span>(</p><p>self, node, deep=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_object', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_object" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">constructed_objects</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">constructed_objects</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">deep</span><span class="p">:</span>
        <span class="n">old_deep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">deep_construct</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deep_construct</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">recursive_objects</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;found unconstructable recursive node&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">recursive_objects</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">constructor</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">tag_suffix</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_constructors</span><span class="p">:</span>
        <span class="n">constructor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_constructors</span><span class="p">[</span><span class="n">node</span><span class="o">.</span><span class="n">tag</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">tag_prefix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_multi_constructors</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">tag_prefix</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">tag_prefix</span><span class="p">):</span>
                <span class="n">tag_suffix</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">tag_prefix</span><span class="p">):]</span>
                <span class="n">constructor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_multi_constructors</span><span class="p">[</span><span class="n">tag_prefix</span><span class="p">]</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_multi_constructors</span><span class="p">:</span>
                <span class="n">tag_suffix</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span>
                <span class="n">constructor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_multi_constructors</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
            <span class="k">elif</span> <span class="kc">None</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_constructors</span><span class="p">:</span>
                <span class="n">constructor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_constructors</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">ScalarNode</span><span class="p">):</span>
                <span class="n">constructor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">construct_scalar</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">SequenceNode</span><span class="p">):</span>
                <span class="n">constructor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">construct_sequence</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">):</span>
                <span class="n">constructor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">construct_mapping</span>
    <span class="k">if</span> <span class="n">tag_suffix</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">constructor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">constructor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag_suffix</span><span class="p">,</span> <span class="n">node</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">types</span><span class="o">.</span><span class="n">GeneratorType</span><span class="p">):</span>
        <span class="n">generator</span> <span class="o">=</span> <span class="n">data</span>
        <span class="n">data</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">generator</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deep_construct</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="n">generator</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state_generators</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generator</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">constructed_objects</span><span class="p">[</span><span class="n">node</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">recursive_objects</span><span class="p">[</span><span class="n">node</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">deep</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deep_construct</span> <span class="o">=</span> <span class="n">old_deep</span>
    <span class="k">return</span> <span class="n">data</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_pairs">
    <p>def <span class="ident">construct_pairs</span>(</p><p>self, node, deep=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_pairs', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_pairs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;expected a mapping node, but found </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="n">pairs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key_node</span><span class="p">,</span> <span class="n">value_node</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_object</span><span class="p">(</span><span class="n">key_node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="n">deep</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_object</span><span class="p">(</span><span class="n">value_node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="n">deep</span><span class="p">)</span>
        <span class="n">pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">pairs</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_scalar">
    <p>def <span class="ident">construct_scalar</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_scalar', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_scalar" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">key_node</span><span class="p">,</span> <span class="n">value_node</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;tag:yaml.org,2002:value&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">value_node</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_sequence">
    <p>def <span class="ident">construct_sequence</span>(</p><p>self, node, deep=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_sequence', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_sequence" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">SequenceNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;expected a sequence node, but found </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">construct_object</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="n">deep</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">child</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_undefined">
    <p>def <span class="ident">construct_undefined</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_undefined', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_undefined" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_undefined</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;could not determine a constructor for the tag </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">tag</span><span class="p">,</span>
            <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_binary">
    <p>def <span class="ident">construct_yaml_binary</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_binary', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_binary" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_binary</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">UnicodeEncodeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;failed to convert base64 data into ascii: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">exc</span><span class="p">,</span>
                <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">base64</span><span class="p">,</span> <span class="s1">&#39;decodebytes&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">decodebytes</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">base64</span><span class="o">.</span><span class="n">decodestring</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span> <span class="n">binascii</span><span class="o">.</span><span class="n">Error</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                <span class="s2">&quot;failed to decode base64 data: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">exc</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_bool">
    <p>def <span class="ident">construct_yaml_bool</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_bool', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_bool" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_bool</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">bool_values</span><span class="p">[</span><span class="n">value</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_float">
    <p>def <span class="ident">construct_yaml_float</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_float', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_float" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_float</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="o">+</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
        <span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;+-&#39;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;.inf&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sign</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">inf_value</span>
    <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;.nan&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">nan_value</span>
    <span class="k">elif</span> <span class="s1">&#39;:&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">digits</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)]</span>
        <span class="n">digits</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="n">base</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">digit</span> <span class="ow">in</span> <span class="n">digits</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="n">digit</span><span class="o">*</span><span class="n">base</span>
            <span class="n">base</span> <span class="o">*=</span> <span class="mi">60</span>
        <span class="k">return</span> <span class="n">sign</span><span class="o">*</span><span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sign</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_int">
    <p>def <span class="ident">construct_yaml_int</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_int', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_int" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_int</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">sign</span> <span class="o">=</span> <span class="o">+</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
        <span class="n">sign</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="s1">&#39;+-&#39;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
    <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="k">elif</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;0b&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sign</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="mi">2</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">value</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;0x&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">sign</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="mi">16</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sign</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s1">&#39;:&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">digits</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;:&#39;</span><span class="p">)]</span>
        <span class="n">digits</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
        <span class="n">base</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">digit</span> <span class="ow">in</span> <span class="n">digits</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">+=</span> <span class="n">digit</span><span class="o">*</span><span class="n">base</span>
            <span class="n">base</span> <span class="o">*=</span> <span class="mi">60</span>
        <span class="k">return</span> <span class="n">sign</span><span class="o">*</span><span class="n">value</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">sign</span><span class="o">*</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_map">
    <p>def <span class="ident">construct_yaml_map</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_map', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_map" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">yield</span> <span class="n">data</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_mapping</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_null">
    <p>def <span class="ident">construct_yaml_null</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_null', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_null" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_null</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_object">
    <p>def <span class="ident">construct_yaml_object</span>(</p><p>self, node, cls)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_object', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_object" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">data</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s1">&#39;__setstate__&#39;</span><span class="p">):</span>
        <span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_mapping</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">__setstate__</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_mapping</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_omap">
    <p>def <span class="ident">construct_yaml_omap</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_omap', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_omap" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_omap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="c1"># Note: we do not check for duplicate keys, because it&#39;s too</span>
    <span class="c1"># CPU-expensive.</span>
    <span class="n">omap</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">yield</span> <span class="n">omap</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">SequenceNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="s2">&quot;while constructing an ordered map&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected a sequence, but found </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">subnode</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subnode</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="s2">&quot;while constructing an ordered map&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;expected a mapping of length 1, but found </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">subnode</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">subnode</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subnode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="s2">&quot;while constructing an ordered map&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;expected a single mapping item, but found </span><span class="si">%d</span><span class="s2"> items&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">subnode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
                    <span class="n">subnode</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="n">key_node</span><span class="p">,</span> <span class="n">value_node</span> <span class="o">=</span> <span class="n">subnode</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_object</span><span class="p">(</span><span class="n">key_node</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_object</span><span class="p">(</span><span class="n">value_node</span><span class="p">)</span>
        <span class="n">omap</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_pairs">
    <p>def <span class="ident">construct_yaml_pairs</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_pairs', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_pairs" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_pairs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="c1"># Note: the same code as `construct_yaml_omap`.</span>
    <span class="n">pairs</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">yield</span> <span class="n">pairs</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">SequenceNode</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="s2">&quot;while constructing pairs&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected a sequence, but found </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">subnode</span> <span class="ow">in</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subnode</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="s2">&quot;while constructing pairs&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;expected a mapping of length 1, but found </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">subnode</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="n">subnode</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">subnode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="s2">&quot;while constructing pairs&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;expected a single mapping item, but found </span><span class="si">%d</span><span class="s2"> items&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">subnode</span><span class="o">.</span><span class="n">value</span><span class="p">),</span>
                    <span class="n">subnode</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="n">key_node</span><span class="p">,</span> <span class="n">value_node</span> <span class="o">=</span> <span class="n">subnode</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_object</span><span class="p">(</span><span class="n">key_node</span><span class="p">)</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_object</span><span class="p">(</span><span class="n">value_node</span><span class="p">)</span>
        <span class="n">pairs</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_seq">
    <p>def <span class="ident">construct_yaml_seq</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_seq', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_seq" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_seq</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">yield</span> <span class="n">data</span>
    <span class="n">data</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">construct_sequence</span><span class="p">(</span><span class="n">node</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_set">
    <p>def <span class="ident">construct_yaml_set</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_set', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_set" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">yield</span> <span class="n">data</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_mapping</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_str">
    <p>def <span class="ident">construct_yaml_str</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_str', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_str" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_str</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.construct_yaml_timestamp">
    <p>def <span class="ident">construct_yaml_timestamp</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_timestamp', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.construct_yaml_timestamp" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">construct_yaml_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">match</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">timestamp_regexp</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">groupdict</span><span class="p">()</span>
    <span class="n">year</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">])</span>
    <span class="n">month</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">])</span>
    <span class="n">day</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;day&#39;</span><span class="p">])</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;hour&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">)</span>
    <span class="n">hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;hour&#39;</span><span class="p">])</span>
    <span class="n">minute</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;minute&#39;</span><span class="p">])</span>
    <span class="n">second</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;second&#39;</span><span class="p">])</span>
    <span class="n">fraction</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">tzinfo</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;fraction&#39;</span><span class="p">]:</span>
        <span class="n">fraction</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;fraction&#39;</span><span class="p">][:</span><span class="mi">6</span><span class="p">]</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">fraction</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">:</span>
            <span class="n">fraction</span> <span class="o">+=</span> <span class="s1">&#39;0&#39;</span>
        <span class="n">fraction</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">fraction</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;tz_sign&#39;</span><span class="p">]:</span>
        <span class="n">tz_hour</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;tz_hour&#39;</span><span class="p">])</span>
        <span class="n">tz_minute</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;tz_minute&#39;</span><span class="p">]</span> <span class="ow">or</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">hours</span><span class="o">=</span><span class="n">tz_hour</span><span class="p">,</span> <span class="n">minutes</span><span class="o">=</span><span class="n">tz_minute</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;tz_sign&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>
            <span class="n">delta</span> <span class="o">=</span> <span class="o">-</span><span class="n">delta</span>
        <span class="n">tzinfo</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="p">(</span><span class="n">delta</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;tz&#39;</span><span class="p">]:</span>
        <span class="n">tzinfo</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span>
    <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="n">hour</span><span class="p">,</span> <span class="n">minute</span><span class="p">,</span> <span class="n">second</span><span class="p">,</span> <span class="n">fraction</span><span class="p">,</span>
                             <span class="n">tzinfo</span><span class="o">=</span><span class="n">tzinfo</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.descend_resolver">
    <p>def <span class="ident">descend_resolver</span>(</p><p>self, current_node, current_index)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.descend_resolver', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.descend_resolver" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">descend_resolver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_node</span><span class="p">,</span> <span class="n">current_index</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_path_resolvers</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">exact_paths</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">prefix_paths</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">current_node</span><span class="p">:</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">resolver_prefix_paths</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">kind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolver_prefix_paths</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_resolver_prefix</span><span class="p">(</span><span class="n">depth</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span>
                    <span class="n">current_node</span><span class="p">,</span> <span class="n">current_index</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">depth</span><span class="p">:</span>
                    <span class="n">prefix_paths</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">path</span><span class="p">,</span> <span class="n">kind</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">exact_paths</span><span class="p">[</span><span class="n">kind</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_path_resolvers</span><span class="p">[</span><span class="n">path</span><span class="p">,</span> <span class="n">kind</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">path</span><span class="p">,</span> <span class="n">kind</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_path_resolvers</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
                <span class="n">exact_paths</span><span class="p">[</span><span class="n">kind</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_path_resolvers</span><span class="p">[</span><span class="n">path</span><span class="p">,</span> <span class="n">kind</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prefix_paths</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">path</span><span class="p">,</span> <span class="n">kind</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resolver_exact_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">exact_paths</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">resolver_prefix_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">prefix_paths</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.determine_encoding">
    <p>def <span class="ident">determine_encoding</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.determine_encoding', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.determine_encoding" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">determine_encoding</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">eof</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_raw</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF16_LE</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_decode</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">utf_16_le_decode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-16-le&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">codecs</span><span class="o">.</span><span class="n">BOM_UTF16_BE</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_decode</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">utf_16_be_decode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-16-be&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_decode</span> <span class="o">=</span> <span class="n">codecs</span><span class="o">.</span><span class="n">utf_8_decode</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.dispose">
    <p>def <span class="ident">dispose</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.dispose', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.dispose" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">dispose</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Reset the state attributes (to clear self-references)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">states</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="kc">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_alias">
    <p>def <span class="ident">fetch_alias</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_alias', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_alias" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_alias</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># ALIAS could be a simple key.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># No simple keys after ALIAS.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># Scan and add ALIAS.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_anchor</span><span class="p">(</span><span class="n">AliasToken</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_anchor">
    <p>def <span class="ident">fetch_anchor</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_anchor', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_anchor" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># ANCHOR could start a simple key.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># No simple keys after ANCHOR.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># Scan and add ANCHOR.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_anchor</span><span class="p">(</span><span class="n">AnchorToken</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_block_entry">
    <p>def <span class="ident">fetch_block_entry</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_block_entry', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_block_entry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_block_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Block context needs additional checks.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
        <span class="c1"># Are we allowed to start a new entry?</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s2">&quot;sequence entries are not allowed here&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="c1"># We may need to add BLOCK-SEQUENCE-START.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_indent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">):</span>
            <span class="n">mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BlockSequenceStartToken</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="n">mark</span><span class="p">))</span>
    <span class="c1"># It&#39;s an error for the block entry to occur in the flow context,</span>
    <span class="c1"># but we let the parser detect this.</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">pass</span>
    <span class="c1"># Simple keys are allowed after &#39;-&#39;.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1"># Reset possible simple key on the current level.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># Add BLOCK-ENTRY.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BlockEntryToken</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_block_scalar">
    <p>def <span class="ident">fetch_block_scalar</span>(</p><p>self, style)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_block_scalar', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_block_scalar" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_block_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
    <span class="c1"># A simple key may follow a block scalar.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1"># Reset possible simple key on the current level.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># Scan and add SCALAR.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_block_scalar</span><span class="p">(</span><span class="n">style</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_directive">
    <p>def <span class="ident">fetch_directive</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_directive', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_directive" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_directive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    
    <span class="c1"># Set the current indentation to -1.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unwind_indent</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># Reset simple keys.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># Scan and add DIRECTIVE.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_directive</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_document_end">
    <p>def <span class="ident">fetch_document_end</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_document_end', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_document_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_document_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_document_indicator</span><span class="p">(</span><span class="n">DocumentEndToken</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_document_indicator">
    <p>def <span class="ident">fetch_document_indicator</span>(</p><p>self, TokenClass)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_document_indicator', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_document_indicator" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_document_indicator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">TokenClass</span><span class="p">):</span>
    <span class="c1"># Set the current indentation to -1.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unwind_indent</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># Reset simple keys. Note that there could not be a block collection</span>
    <span class="c1"># after &#39;---&#39;.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># Add DOCUMENT-START or DOCUMENT-END.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TokenClass</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_document_start">
    <p>def <span class="ident">fetch_document_start</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_document_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_document_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_document_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_document_indicator</span><span class="p">(</span><span class="n">DocumentStartToken</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_double">
    <p>def <span class="ident">fetch_double</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_double', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_double" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_double</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_scalar</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;&quot;&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_flow_collection_end">
    <p>def <span class="ident">fetch_flow_collection_end</span>(</p><p>self, TokenClass)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_collection_end', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_collection_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_flow_collection_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">TokenClass</span><span class="p">):</span>
    <span class="c1"># Reset possible simple key on the current level.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># Decrease the flow level.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="o">-=</span> <span class="mi">1</span>
    <span class="c1"># No simple keys after &#39;]&#39; or &#39;}&#39;.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># Add FLOW-SEQUENCE-END or FLOW-MAPPING-END.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TokenClass</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_flow_collection_start">
    <p>def <span class="ident">fetch_flow_collection_start</span>(</p><p>self, TokenClass)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_collection_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_collection_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_flow_collection_start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">TokenClass</span><span class="p">):</span>
    <span class="c1"># &#39;[&#39; and &#39;{&#39; may start a simple key.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># Increase the flow level.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="c1"># Simple keys are allowed after &#39;[&#39; and &#39;{&#39;.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1"># Add FLOW-SEQUENCE-START or FLOW-MAPPING-START.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TokenClass</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_flow_entry">
    <p>def <span class="ident">fetch_flow_entry</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_entry', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_entry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_flow_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Simple keys are allowed after &#39;,&#39;.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="c1"># Reset possible simple key on the current level.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># Add FLOW-ENTRY.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">FlowEntryToken</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_flow_mapping_end">
    <p>def <span class="ident">fetch_flow_mapping_end</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_mapping_end', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_mapping_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_flow_mapping_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_collection_end</span><span class="p">(</span><span class="n">FlowMappingEndToken</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_flow_mapping_start">
    <p>def <span class="ident">fetch_flow_mapping_start</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_mapping_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_mapping_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_flow_mapping_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_collection_start</span><span class="p">(</span><span class="n">FlowMappingStartToken</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_flow_scalar">
    <p>def <span class="ident">fetch_flow_scalar</span>(</p><p>self, style)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_scalar', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_scalar" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_flow_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
    <span class="c1"># A flow scalar could be a simple key.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># No simple keys after flow scalars.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># Scan and add SCALAR.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_flow_scalar</span><span class="p">(</span><span class="n">style</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_flow_sequence_end">
    <p>def <span class="ident">fetch_flow_sequence_end</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_sequence_end', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_sequence_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_flow_sequence_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_collection_end</span><span class="p">(</span><span class="n">FlowSequenceEndToken</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_flow_sequence_start">
    <p>def <span class="ident">fetch_flow_sequence_start</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_sequence_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_flow_sequence_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_flow_sequence_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_collection_start</span><span class="p">(</span><span class="n">FlowSequenceStartToken</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_folded">
    <p>def <span class="ident">fetch_folded</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_folded', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_folded" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_folded</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_block_scalar</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;&gt;&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_key">
    <p>def <span class="ident">fetch_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    
    <span class="c1"># Block context needs additional checks.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
        <span class="c1"># Are we allowed to start a key (not necessary a simple)?</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s2">&quot;mapping keys are not allowed here&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="c1"># We may need to add BLOCK-MAPPING-START.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_indent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">):</span>
            <span class="n">mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BlockMappingStartToken</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="n">mark</span><span class="p">))</span>
    <span class="c1"># Simple keys are allowed after &#39;?&#39; in the block context.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span>
    <span class="c1"># Reset possible simple key on the current level.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># Add KEY.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">KeyToken</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_literal">
    <p>def <span class="ident">fetch_literal</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_literal', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_literal" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_literal</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_block_scalar</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;|&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_more_tokens">
    <p>def <span class="ident">fetch_more_tokens</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_more_tokens', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_more_tokens" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_more_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Eat whitespaces and comments until we reach the next token.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scan_to_next_token</span><span class="p">()</span>
    <span class="c1"># Remove obsolete possible simple keys.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stale_possible_simple_keys</span><span class="p">()</span>
    <span class="c1"># Compare the current indentation and column. It may add some tokens</span>
    <span class="c1"># and decrease the current indentation level.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unwind_indent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">)</span>
    <span class="c1"># Peek the next character.</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="c1"># Is it the end of stream?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_stream_end</span><span class="p">()</span>
    <span class="c1"># Is it a directive?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;%&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_directive</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_directive</span><span class="p">()</span>
    <span class="c1"># Is it the document start?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_document_start</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_document_start</span><span class="p">()</span>
    <span class="c1"># Is it the document end?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_document_end</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_document_end</span><span class="p">()</span>
    <span class="c1"># TODO: support for BOM within a stream.</span>
    <span class="c1">#if ch == &#39;\uFEFF&#39;:</span>
    <span class="c1">#    return self.fetch_bom()    &lt;-- issue BOMToken</span>
    <span class="c1"># Note: the order of the following checks is NOT significant.</span>
    <span class="c1"># Is it the flow sequence start indicator?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;[&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_sequence_start</span><span class="p">()</span>
    <span class="c1"># Is it the flow mapping start indicator?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;{&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_mapping_start</span><span class="p">()</span>
    <span class="c1"># Is it the flow sequence end indicator?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;]&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_sequence_end</span><span class="p">()</span>
    <span class="c1"># Is it the flow mapping end indicator?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;}&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_mapping_end</span><span class="p">()</span>
    <span class="c1"># Is it the flow entry indicator?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;,&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_entry</span><span class="p">()</span>
    <span class="c1"># Is it the block entry indicator?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_block_entry</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_block_entry</span><span class="p">()</span>
    <span class="c1"># Is it the key indicator?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;?&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_key</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_key</span><span class="p">()</span>
    <span class="c1"># Is it the value indicator?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;:&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_value</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_value</span><span class="p">()</span>
    <span class="c1"># Is it an alias?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_alias</span><span class="p">()</span>
    <span class="c1"># Is it an anchor?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;&amp;&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_anchor</span><span class="p">()</span>
    <span class="c1"># Is it a tag?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_tag</span><span class="p">()</span>
    <span class="c1"># Is it a literal scalar?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;|&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_literal</span><span class="p">()</span>
    <span class="c1"># Is it a folded scalar?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;&gt;&#39;</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_folded</span><span class="p">()</span>
    <span class="c1"># Is it a single quoted scalar?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_single</span><span class="p">()</span>
    <span class="c1"># Is it a double quoted scalar?</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_double</span><span class="p">()</span>
    <span class="c1"># It must be a plain scalar then.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_plain</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fetch_plain</span><span class="p">()</span>
    <span class="c1"># No? It&#39;s an error. Let&#39;s produce a nice error message.</span>
    <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning for the next token&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;found character </span><span class="si">%r</span><span class="s2"> that cannot start any token&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_plain">
    <p>def <span class="ident">fetch_plain</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_plain', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_plain" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_plain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># A plain scalar could be a simple key.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># No simple keys after plain scalars. But note that `scan_plain` will</span>
    <span class="c1"># change this flag if the scan is finished at the beginning of the</span>
    <span class="c1"># line.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># Scan and add SCALAR. May change `allow_simple_key`.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_plain</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_single">
    <p>def <span class="ident">fetch_single</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_single', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_single" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_single</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fetch_flow_scalar</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_stream_end">
    <p>def <span class="ident">fetch_stream_end</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_stream_end', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_stream_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_stream_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Set the current indentation to -1.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">unwind_indent</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1"># Reset simple keys.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="c1"># Read the token.</span>
    <span class="n">mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    
    <span class="c1"># Add STREAM-END.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">StreamEndToken</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="n">mark</span><span class="p">))</span>
    <span class="c1"># The steam is finished.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">done</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_stream_start">
    <p>def <span class="ident">fetch_stream_start</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_stream_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_stream_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_stream_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># We always add STREAM-START as the first token and STREAM-END as the</span>
    <span class="c1"># last token.</span>
    <span class="c1"># Read the token.</span>
    <span class="n">mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    
    <span class="c1"># Add STREAM-START.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">StreamStartToken</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="n">mark</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">encoding</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_tag">
    <p>def <span class="ident">fetch_tag</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_tag', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_tag" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># TAG could start a simple key.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">save_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># No simple keys after TAG.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># Scan and add TAG.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_tag</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.fetch_value">
    <p>def <span class="ident">fetch_value</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.fetch_value', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.fetch_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">fetch_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Do we determine a simple key?</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">:</span>
        <span class="c1"># Add KEY.</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">]</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">token_number</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">tokens_taken</span><span class="p">,</span>
                <span class="n">KeyToken</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">mark</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">mark</span><span class="p">))</span>
        <span class="c1"># If this key starts a new block mapping, we need to add</span>
        <span class="c1"># BLOCK-MAPPING-START.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_indent</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">column</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">token_number</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">tokens_taken</span><span class="p">,</span>
                        <span class="n">BlockMappingStartToken</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">mark</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">mark</span><span class="p">))</span>
        <span class="c1"># There cannot be two simple keys one after another.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># It must be a part of a complex key.</span>
    <span class="k">else</span><span class="p">:</span>
        
        <span class="c1"># Block context needs additional checks.</span>
        <span class="c1"># (Do we really need them? They will be caught by the parser</span>
        <span class="c1"># anyway.)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
            <span class="c1"># We are allowed to start a complex value if and only if</span>
            <span class="c1"># we can start a simple key.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="s2">&quot;mapping values are not allowed here&quot;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="c1"># If this value starts a new block mapping, we need to add</span>
        <span class="c1"># BLOCK-MAPPING-START.  It will be detected as an error later by</span>
        <span class="c1"># the parser.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">add_indent</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">):</span>
                <span class="n">mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BlockMappingStartToken</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="n">mark</span><span class="p">))</span>
        <span class="c1"># Simple keys are allowed after &#39;:&#39; in the block context.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span>
        <span class="c1"># Reset possible simple key on the current level.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
    <span class="c1"># Add VALUE.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ValueToken</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.flatten_mapping">
    <p>def <span class="ident">flatten_mapping</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.flatten_mapping', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.flatten_mapping" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">flatten_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">merge</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
        <span class="n">key_node</span><span class="p">,</span> <span class="n">value_node</span> <span class="o">=</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">key_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;tag:yaml.org,2002:merge&#39;</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_node</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">flatten_mapping</span><span class="p">(</span><span class="n">value_node</span><span class="p">)</span>
                <span class="n">merge</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">value_node</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value_node</span><span class="p">,</span> <span class="n">SequenceNode</span><span class="p">):</span>
                <span class="n">submerge</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">subnode</span> <span class="ow">in</span> <span class="n">value_node</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">subnode</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="s2">&quot;while constructing a mapping&quot;</span><span class="p">,</span>
                                <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                                <span class="s2">&quot;expected a mapping for merging, but found </span><span class="si">%s</span><span class="s2">&quot;</span>
                                <span class="o">%</span> <span class="n">subnode</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">subnode</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">flatten_mapping</span><span class="p">(</span><span class="n">subnode</span><span class="p">)</span>
                    <span class="n">submerge</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">subnode</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="n">submerge</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">submerge</span><span class="p">:</span>
                    <span class="n">merge</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ConstructorError</span><span class="p">(</span><span class="s2">&quot;while constructing a mapping&quot;</span><span class="p">,</span> <span class="n">node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span>
                        <span class="s2">&quot;expected a mapping or list of mappings for merging, but found </span><span class="si">%s</span><span class="s2">&quot;</span>
                        <span class="o">%</span> <span class="n">value_node</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">value_node</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">key_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;tag:yaml.org,2002:value&#39;</span><span class="p">:</span>
            <span class="n">key_node</span><span class="o">.</span><span class="n">tag</span> <span class="o">=</span> <span class="s1">&#39;tag:yaml.org,2002:str&#39;</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">merge</span><span class="p">:</span>
        <span class="n">node</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">merge</span> <span class="o">+</span> <span class="n">node</span><span class="o">.</span><span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.forward">
    <p>def <span class="ident">forward</span>(</p><p>self, length=1)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.forward', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.forward" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">forward</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="o">+</span><span class="n">length</span><span class="o">+</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">length</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">length</span><span class="p">:</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\n\x85\u2028\u2029</span><span class="s1">&#39;</span>  \
                <span class="ow">or</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\r</span><span class="s1">&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">elif</span> <span class="n">ch</span> <span class="o">!=</span> <span class="s1">&#39;</span><span class="se">\uFEFF</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">length</span> <span class="o">-=</span> <span class="mi">1</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.get_data">
    <p>def <span class="ident">get_data</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.get_data', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.get_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Construct and return the next document.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_node</span><span class="p">():</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_document</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_node</span><span class="p">())</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.get_event">
    <p>def <span class="ident">get_event</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.get_event', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.get_event" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Get the next event and proceed further.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.get_mark">
    <p>def <span class="ident">get_mark</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.get_mark', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.get_mark" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_mark</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Mark</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Mark</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">,</span>
                <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.get_node">
    <p>def <span class="ident">get_node</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.get_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.get_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Get the root node of the next document.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">StreamEndEvent</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">compose_document</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.get_single_data">
    <p>def <span class="ident">get_single_data</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.get_single_data', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.get_single_data" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_single_data</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Ensure that the stream contains a single document and construct it.</span>
    <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_single_node</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_document</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="k">return</span> <span class="kc">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.get_single_node">
    <p>def <span class="ident">get_single_node</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.get_single_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.get_single_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_single_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Drop the STREAM-START event.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="c1"># Compose a document if the stream is not empty.</span>
    <span class="n">document</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">StreamEndEvent</span><span class="p">):</span>
        <span class="n">document</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compose_document</span><span class="p">()</span>
    <span class="c1"># Ensure that the stream contains no more documents.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_event</span><span class="p">(</span><span class="n">StreamEndEvent</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
        <span class="k">raise</span> <span class="n">ComposerError</span><span class="p">(</span><span class="s2">&quot;expected a single document in the stream&quot;</span><span class="p">,</span>
                <span class="n">document</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="s2">&quot;but found another document&quot;</span><span class="p">,</span>
                <span class="n">event</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="c1"># Drop the STREAM-END event.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">get_event</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">document</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.get_token">
    <p>def <span class="ident">get_token</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.get_token', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.get_token" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">get_token</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Return the next token.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">need_more_tokens</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fetch_more_tokens</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokens_taken</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.include">
    <p>def <span class="ident">include</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.include', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.include" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">include</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_scalar</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_filename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;</span><span class="si">{}</span><span class="s2">&#39; cannot be included. If the YAML input is a string, &#39;!include&#39; only supports absolute paths.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="p">))</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.include_merge_list">
    <p>def <span class="ident">include_merge_list</span>(</p><p>self, node)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.include_merge_list', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.include_merge_list" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">include_merge_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">node</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;If the YAML input is a string, &#39;!include_merge_list&#39; only supports absolute paths.&quot;</span><span class="p">)</span>
    <span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">construct_sequence</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
    <span class="n">a</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_filename</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">a</span> <span class="o">+=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">errno</span> <span class="ow">in</span> <span class="p">[</span><span class="n">errno</span><span class="o">.</span><span class="n">ENOENT</span><span class="p">,</span> <span class="n">errno</span><span class="o">.</span><span class="n">EINVAL</span><span class="p">,</span> <span class="n">errno</span><span class="o">.</span><span class="n">EISDIR</span><span class="p">]:</span>
                    <span class="c1"># ENOENT: FileNotFoundError</span>
                    <span class="c1"># EINVAL: Invalid argument</span>
                    <span class="c1"># EISDIR: IsADirectoryError</span>
                    <span class="n">a</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">raise</span>
    <span class="k">return</span> <span class="n">a</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.need_more_tokens">
    <p>def <span class="ident">need_more_tokens</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.need_more_tokens', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.need_more_tokens" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">need_more_tokens</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">done</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="c1"># The current token may be a potential simple key, so we</span>
    <span class="c1"># need to look further.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stale_possible_simple_keys</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">next_possible_simple_key</span><span class="p">()</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens_taken</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.next_possible_simple_key">
    <p>def <span class="ident">next_possible_simple_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.next_possible_simple_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.next_possible_simple_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">next_possible_simple_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Return the number of the nearest possible simple key. Actually we</span>
    <span class="c1"># don&#39;t need to loop through the whole dictionary. We may replace it</span>
    <span class="c1"># with the following code:</span>
    <span class="c1">#   if not self.possible_simple_keys:</span>
    <span class="c1">#       return None</span>
    <span class="c1">#   return self.possible_simple_keys[</span>
    <span class="c1">#           min(self.possible_simple_keys.keys())].token_number</span>
    <span class="n">min_token_number</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">min_token_number</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">key</span><span class="o">.</span><span class="n">token_number</span> <span class="o">&lt;</span> <span class="n">min_token_number</span><span class="p">:</span>
            <span class="n">min_token_number</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">token_number</span>
    <span class="k">return</span> <span class="n">min_token_number</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_first_key">
    <p>def <span class="ident">parse_block_mapping_first_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_first_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_first_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_block_mapping_first_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_mapping_key</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_key">
    <p>def <span class="ident">parse_block_mapping_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_block_mapping_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">KeyToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">KeyToken</span><span class="p">,</span> <span class="n">ValueToken</span><span class="p">,</span> <span class="n">BlockEndToken</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_block_mapping_value</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_node_or_indentless_sequence</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_mapping_value</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockEndToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
        <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="s2">&quot;while parsing a block mapping&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="s2">&quot;expected &lt;block end&gt;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">MappingEndEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_value">
    <p>def <span class="ident">parse_block_mapping_value</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_value', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_block_mapping_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_block_mapping_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">ValueToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">KeyToken</span><span class="p">,</span> <span class="n">ValueToken</span><span class="p">,</span> <span class="n">BlockEndToken</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_block_mapping_key</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_node_or_indentless_sequence</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_mapping_key</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_mapping_key</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_block_node">
    <p>def <span class="ident">parse_block_node</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_block_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_block_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_block_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_node</span><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_block_node_or_indentless_sequence">
    <p>def <span class="ident">parse_block_node_or_indentless_sequence</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_block_node_or_indentless_sequence', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_block_node_or_indentless_sequence" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_block_node_or_indentless_sequence</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_node</span><span class="p">(</span><span class="n">block</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indentless_sequence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_block_sequence_entry">
    <p>def <span class="ident">parse_block_sequence_entry</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_block_sequence_entry', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_block_sequence_entry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_block_sequence_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockEntryToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockEntryToken</span><span class="p">,</span> <span class="n">BlockEndToken</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_block_sequence_entry</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_node</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_sequence_entry</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockEndToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
        <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="s2">&quot;while parsing a block collection&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                <span class="s2">&quot;expected &lt;block end&gt;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">SequenceEndEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_block_sequence_first_entry">
    <p>def <span class="ident">parse_block_sequence_first_entry</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_block_sequence_first_entry', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_block_sequence_first_entry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_block_sequence_first_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_sequence_entry</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_document_content">
    <p>def <span class="ident">parse_document_content</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_document_content', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_document_content" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_document_content</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">DirectiveToken</span><span class="p">,</span>
            <span class="n">DocumentStartToken</span><span class="p">,</span> <span class="n">DocumentEndToken</span><span class="p">,</span> <span class="n">StreamEndToken</span><span class="p">):</span>
        <span class="n">event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">event</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_node</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_document_end">
    <p>def <span class="ident">parse_document_end</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_document_end', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_document_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_document_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Parse the document end.</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span>
    <span class="n">explicit</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">DocumentEndToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span>
        <span class="n">explicit</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">DocumentEndEvent</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span>
            <span class="n">explicit</span><span class="o">=</span><span class="n">explicit</span><span class="p">)</span>
    <span class="c1"># Prepare the next state.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_document_start</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_document_start">
    <p>def <span class="ident">parse_document_start</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_document_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_document_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_document_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Parse any extra document end indicators.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">DocumentEndToken</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="c1"># Parse an explicit document.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">StreamEndToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
        <span class="n">start_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span>
        <span class="n">version</span><span class="p">,</span> <span class="n">tags</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_directives</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">DocumentStartToken</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                    <span class="s2">&quot;expected &#39;&lt;document start&gt;&#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span>
                    <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">DocumentStartEvent</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span>
                <span class="n">explicit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="n">version</span><span class="p">,</span> <span class="n">tags</span><span class="o">=</span><span class="n">tags</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_document_end</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_document_content</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Parse the end of the stream.</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">StreamEndEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span>
        <span class="k">assert</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">marks</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_empty_value">
    <p>def <span class="ident">parse_flow_mapping_empty_value</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_empty_value', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_empty_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_mapping_empty_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_key</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_first_key">
    <p>def <span class="ident">parse_flow_mapping_first_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_first_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_first_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_mapping_first_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_key</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_key">
    <p>def <span class="ident">parse_flow_mapping_key</span>(</p><p>self, first=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_mapping_key</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowMappingEndToken</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">first</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowEntryToken</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
                <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="s2">&quot;while parsing a flow mapping&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                        <span class="s2">&quot;expected &#39;,&#39; or &#39;}&#39;, but got </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">KeyToken</span><span class="p">):</span>
            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">ValueToken</span><span class="p">,</span>
                    <span class="n">FlowEntryToken</span><span class="p">,</span> <span class="n">FlowMappingEndToken</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_value</span><span class="p">)</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_node</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_value</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowMappingEndToken</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_empty_value</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_node</span><span class="p">()</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">MappingEndEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_value">
    <p>def <span class="ident">parse_flow_mapping_value</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_value', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_mapping_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_mapping_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">ValueToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowEntryToken</span><span class="p">,</span> <span class="n">FlowMappingEndToken</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_key</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_node</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_key</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_key</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_node">
    <p>def <span class="ident">parse_flow_node</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_node</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_node</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry">
    <p>def <span class="ident">parse_flow_sequence_entry</span>(</p><p>self, first=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_sequence_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowSequenceEndToken</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">first</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowEntryToken</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
                <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="s2">&quot;while parsing a flow sequence&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
                        <span class="s2">&quot;expected &#39;,&#39; or &#39;]&#39;, but got </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">KeyToken</span><span class="p">):</span>
            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">MappingStartEvent</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span>
                    <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">,</span>
                    <span class="n">flow_style</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry_mapping_key</span>
            <span class="k">return</span> <span class="n">event</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowSequenceEndToken</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_node</span><span class="p">()</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">SequenceEndEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_end">
    <p>def <span class="ident">parse_flow_sequence_entry_mapping_end</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_end', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_end" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_sequence_entry_mapping_end</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">MappingEndEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_key">
    <p>def <span class="ident">parse_flow_sequence_entry_mapping_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_sequence_entry_mapping_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">ValueToken</span><span class="p">,</span>
            <span class="n">FlowEntryToken</span><span class="p">,</span> <span class="n">FlowSequenceEndToken</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry_mapping_value</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_node</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry_mapping_value</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_value">
    <p>def <span class="ident">parse_flow_sequence_entry_mapping_value</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_value', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_entry_mapping_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_sequence_entry_mapping_value</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">ValueToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowEntryToken</span><span class="p">,</span> <span class="n">FlowSequenceEndToken</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry_mapping_end</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_node</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry_mapping_end</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry_mapping_end</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_first_entry">
    <p>def <span class="ident">parse_flow_sequence_first_entry</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_first_entry', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_flow_sequence_first_entry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_flow_sequence_first_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">marks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_entry</span><span class="p">(</span><span class="n">first</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_implicit_document_start">
    <p>def <span class="ident">parse_implicit_document_start</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_implicit_document_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_implicit_document_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_implicit_document_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Parse an implicit document.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">DirectiveToken</span><span class="p">,</span> <span class="n">DocumentStartToken</span><span class="p">,</span>
            <span class="n">StreamEndToken</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_TAGS</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
        <span class="n">start_mark</span> <span class="o">=</span> <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">DocumentStartEvent</span><span class="p">(</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span>
                <span class="n">explicit</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1"># Prepare the next state.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_document_end</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_node</span>
        <span class="k">return</span> <span class="n">event</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_document_start</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_indentless_sequence_entry">
    <p>def <span class="ident">parse_indentless_sequence_entry</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_indentless_sequence_entry', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_indentless_sequence_entry" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_indentless_sequence_entry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockEntryToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockEntryToken</span><span class="p">,</span>
                <span class="n">KeyToken</span><span class="p">,</span> <span class="n">ValueToken</span><span class="p">,</span> <span class="n">BlockEndToken</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_indentless_sequence_entry</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_node</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_indentless_sequence_entry</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_empty_scalar</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">SequenceEndEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_node">
    <p>def <span class="ident">parse_node</span>(</p><p>self, block=False, indentless_sequence=False)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_node', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_node" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">indentless_sequence</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">AliasToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="n">event</span> <span class="o">=</span> <span class="n">AliasEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">value</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">anchor</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">start_mark</span> <span class="o">=</span> <span class="n">end_mark</span> <span class="o">=</span> <span class="n">tag_mark</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">AnchorToken</span><span class="p">):</span>
            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
            <span class="n">start_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span>
            <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span>
            <span class="n">anchor</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">TagToken</span><span class="p">):</span>
                <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
                <span class="n">tag_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span>
                <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">value</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">TagToken</span><span class="p">):</span>
            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
            <span class="n">start_mark</span> <span class="o">=</span> <span class="n">tag_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span>
            <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span>
            <span class="n">tag</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">AnchorToken</span><span class="p">):</span>
                <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
                <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span>
                <span class="n">anchor</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">handle</span><span class="p">,</span> <span class="n">suffix</span> <span class="o">=</span> <span class="n">tag</span>
            <span class="k">if</span> <span class="n">handle</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">handle</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="s2">&quot;while parsing a node&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                            <span class="s2">&quot;found undefined tag handle </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">handle</span><span class="p">,</span>
                            <span class="n">tag_mark</span><span class="p">)</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span><span class="p">[</span><span class="n">handle</span><span class="p">]</span><span class="o">+</span><span class="n">suffix</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tag</span> <span class="o">=</span> <span class="n">suffix</span>
        <span class="c1">#if tag == &#39;!&#39;:</span>
        <span class="c1">#    raise ParserError(&quot;while parsing a node&quot;, start_mark,</span>
        <span class="c1">#            &quot;found non-specific tag &#39;!&#39;&quot;, tag_mark,</span>
        <span class="c1">#            &quot;Please check &#39;http://pyyaml.org/wiki/YAMLNonSpecificTag&#39; and share your opinion.&quot;)</span>
        <span class="k">if</span> <span class="n">start_mark</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_mark</span> <span class="o">=</span> <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">start_mark</span>
        <span class="n">event</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">implicit</span> <span class="o">=</span> <span class="p">(</span><span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;!&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">indentless_sequence</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockEntryToken</span><span class="p">):</span>
            <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">end_mark</span>
            <span class="n">event</span> <span class="o">=</span> <span class="n">SequenceStartEvent</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">implicit</span><span class="p">,</span>
                    <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_indentless_sequence_entry</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">ScalarToken</span><span class="p">):</span>
                <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
                <span class="n">end_mark</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">plain</span> <span class="ow">and</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="n">tag</span> <span class="o">==</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span>
                    <span class="n">implicit</span> <span class="o">=</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">implicit</span> <span class="o">=</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">implicit</span> <span class="o">=</span> <span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">ScalarEvent</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">implicit</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                        <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="n">token</span><span class="o">.</span><span class="n">style</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowSequenceStartToken</span><span class="p">):</span>
                <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">end_mark</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">SequenceStartEvent</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">implicit</span><span class="p">,</span>
                        <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span> <span class="n">flow_style</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_sequence_first_entry</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">FlowMappingStartToken</span><span class="p">):</span>
                <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">end_mark</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">MappingStartEvent</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">implicit</span><span class="p">,</span>
                        <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span> <span class="n">flow_style</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_flow_mapping_first_key</span>
            <span class="k">elif</span> <span class="n">block</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockSequenceStartToken</span><span class="p">):</span>
                <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">start_mark</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">SequenceStartEvent</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">implicit</span><span class="p">,</span>
                        <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span> <span class="n">flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_sequence_first_entry</span>
            <span class="k">elif</span> <span class="n">block</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">BlockMappingStartToken</span><span class="p">):</span>
                <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span><span class="o">.</span><span class="n">start_mark</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">MappingStartEvent</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">implicit</span><span class="p">,</span>
                        <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span> <span class="n">flow_style</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_block_mapping_first_key</span>
            <span class="k">elif</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">tag</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Empty scalars are allowed even if a tag or an anchor is</span>
                <span class="c1"># specified.</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">ScalarEvent</span><span class="p">(</span><span class="n">anchor</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="p">(</span><span class="n">implicit</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
                        <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">states</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">block</span><span class="p">:</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="s1">&#39;block&#39;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">node</span> <span class="o">=</span> <span class="s1">&#39;flow&#39;</span>
                <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek_token</span><span class="p">()</span>
                <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="s2">&quot;while parsing a </span><span class="si">%s</span><span class="s2"> node&quot;</span> <span class="o">%</span> <span class="n">node</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                        <span class="s2">&quot;expected the node content, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">token</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                        <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.parse_stream_start">
    <p>def <span class="ident">parse_stream_start</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.parse_stream_start', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.parse_stream_start" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">parse_stream_start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Parse the stream start.</span>
    <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">StreamStartEvent</span><span class="p">(</span><span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">end_mark</span><span class="p">,</span>
            <span class="n">encoding</span><span class="o">=</span><span class="n">token</span><span class="o">.</span><span class="n">encoding</span><span class="p">)</span>
    <span class="c1"># Prepare the next state.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_implicit_document_start</span>
    <span class="k">return</span> <span class="n">event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.peek">
    <p>def <span class="ident">peek</span>(</p><p>self, index=0)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.peek', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.peek" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">peek</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="o">+</span><span class="n">index</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="o">+</span><span class="n">index</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.peek_event">
    <p>def <span class="ident">peek_event</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.peek_event', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.peek_event" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">peek_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Get the next event.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">()</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_event</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.peek_token">
    <p>def <span class="ident">peek_token</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.peek_token', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.peek_token" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">peek_token</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Return the next token, but do not delete if from the queue.</span>
    <span class="c1"># Return None if no more tokens.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">need_more_tokens</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fetch_more_tokens</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.prefix">
    <p>def <span class="ident">prefix</span>(</p><p>self, length=1)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.prefix', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.prefix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="o">+</span><span class="n">length</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="o">+</span><span class="n">length</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.process_directives">
    <p>def <span class="ident">process_directives</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.process_directives', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.process_directives" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">process_directives</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">yaml_version</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_token</span><span class="p">(</span><span class="n">DirectiveToken</span><span class="p">):</span>
        <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_token</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">token</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;YAML&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_version</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="s2">&quot;found duplicate YAML directive&quot;</span><span class="p">,</span> <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
            <span class="n">major</span><span class="p">,</span> <span class="n">minor</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">major</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="s2">&quot;found incompatible YAML document (version 1.* is required)&quot;</span><span class="p">,</span>
                        <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">yaml_version</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">value</span>
        <span class="k">elif</span> <span class="n">token</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;TAG&#39;</span><span class="p">:</span>
            <span class="n">handle</span><span class="p">,</span> <span class="n">prefix</span> <span class="o">=</span> <span class="n">token</span><span class="o">.</span><span class="n">value</span>
            <span class="k">if</span> <span class="n">handle</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ParserError</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span>
                        <span class="s2">&quot;duplicate tag handle </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">handle</span><span class="p">,</span>
                        <span class="n">token</span><span class="o">.</span><span class="n">start_mark</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span><span class="p">[</span><span class="n">handle</span><span class="p">]</span> <span class="o">=</span> <span class="n">prefix</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_version</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_version</span><span class="p">,</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_TAGS</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tag_handles</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_TAGS</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.process_empty_scalar">
    <p>def <span class="ident">process_empty_scalar</span>(</p><p>self, mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.process_empty_scalar', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.process_empty_scalar" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">process_empty_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mark</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ScalarEvent</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">),</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">mark</span><span class="p">,</span> <span class="n">mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.remove_possible_simple_key">
    <p>def <span class="ident">remove_possible_simple_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.remove_possible_simple_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.remove_possible_simple_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">remove_possible_simple_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Remove the saved possible key position at the current flow level.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">]</span>
        
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a simple key&quot;</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">mark</span><span class="p">,</span>
                    <span class="s2">&quot;could not find expected &#39;:&#39;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.resolve">
    <p>def <span class="ident">resolve</span>(</p><p>self, kind, value, implicit)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.resolve', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.resolve" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">resolve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">implicit</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">kind</span> <span class="ow">is</span> <span class="n">ScalarNode</span> <span class="ow">and</span> <span class="n">implicit</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
            <span class="n">resolvers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_implicit_resolvers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">resolvers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_implicit_resolvers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[])</span>
        <span class="n">resolvers</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_implicit_resolvers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[])</span>
        <span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">regexp</span> <span class="ow">in</span> <span class="n">resolvers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">regexp</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">tag</span>
        <span class="n">implicit</span> <span class="o">=</span> <span class="n">implicit</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">yaml_path_resolvers</span><span class="p">:</span>
        <span class="n">exact_paths</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolver_exact_paths</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">kind</span> <span class="ow">in</span> <span class="n">exact_paths</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">exact_paths</span><span class="p">[</span><span class="n">kind</span><span class="p">]</span>
        <span class="k">if</span> <span class="kc">None</span> <span class="ow">in</span> <span class="n">exact_paths</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">exact_paths</span><span class="p">[</span><span class="kc">None</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">kind</span> <span class="ow">is</span> <span class="n">ScalarNode</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_SCALAR_TAG</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="ow">is</span> <span class="n">SequenceNode</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_SEQUENCE_TAG</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="ow">is</span> <span class="n">MappingNode</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_MAPPING_TAG</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.save_possible_simple_key">
    <p>def <span class="ident">save_possible_simple_key</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.save_possible_simple_key', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.save_possible_simple_key" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">save_possible_simple_key</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># The next token may start a simple key. We check if it&#39;s possible</span>
    <span class="c1"># and save its position. This function is called for</span>
    <span class="c1">#   ALIAS, ANCHOR, TAG, SCALAR(flow), &#39;[&#39;, and &#39;{&#39;.</span>
    <span class="c1"># Check if a simple key is required at the current position.</span>
    <span class="n">required</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span>
    <span class="c1"># The next token might be a simple key. Let&#39;s save it&#39;s number and</span>
    <span class="c1"># position.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_possible_simple_key</span><span class="p">()</span>
        <span class="n">token_number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tokens_taken</span><span class="o">+</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="p">)</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">SimpleKey</span><span class="p">(</span><span class="n">token_number</span><span class="p">,</span> <span class="n">required</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">]</span> <span class="o">=</span> <span class="n">key</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_anchor">
    <p>def <span class="ident">scan_anchor</span>(</p><p>self, TokenClass)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_anchor', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_anchor" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">TokenClass</span><span class="p">):</span>
    <span class="c1"># The specification does not restrict characters for anchors and</span>
    <span class="c1"># aliases. This may lead to problems, for instance, the document:</span>
    <span class="c1">#   [ *alias, value ]</span>
    <span class="c1"># can be interpreted in two ways, as</span>
    <span class="c1">#   [ &quot;value&quot; ]</span>
    <span class="c1"># and</span>
    <span class="c1">#   [ *alias , &quot;value&quot; ]</span>
    <span class="c1"># Therefore we restrict aliases to numbers and ASCII letters.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="n">indicator</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">indicator</span> <span class="o">==</span> <span class="s1">&#39;*&#39;</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alias&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;anchor&#39;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">while</span> <span class="s1">&#39;0&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;9&#39;</span> <span class="ow">or</span> <span class="s1">&#39;A&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;Z&#39;</span> <span class="ow">or</span> <span class="s1">&#39;a&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;z&#39;</span>  \
            <span class="ow">or</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;-_&#39;</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">length</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning an </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected alphabetic or numeric character, but found </span><span class="si">%r</span><span class="s2">&quot;</span>
                <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">?:,]}%@`&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning an </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected alphabetic or numeric character, but found </span><span class="si">%r</span><span class="s2">&quot;</span>
                <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">TokenClass</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_block_scalar">
    <p>def <span class="ident">scan_block_scalar</span>(</p><p>self, style)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_block_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">:</span>
        <span class="n">folded</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">folded</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="c1"># Scan the header.</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">chomping</span><span class="p">,</span> <span class="n">increment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_block_scalar_indicators</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scan_block_scalar_ignored_line</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="c1"># Determine the indentation level and go to the first non-empty line.</span>
    <span class="n">min_indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="o">+</span><span class="mi">1</span>
    <span class="k">if</span> <span class="n">min_indent</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">min_indent</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">increment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">breaks</span><span class="p">,</span> <span class="n">max_indent</span><span class="p">,</span> <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_block_scalar_indentation</span><span class="p">()</span>
        <span class="n">indent</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">min_indent</span><span class="p">,</span> <span class="n">max_indent</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">indent</span> <span class="o">=</span> <span class="n">min_indent</span><span class="o">+</span><span class="n">increment</span><span class="o">-</span><span class="mi">1</span>
        <span class="n">breaks</span><span class="p">,</span> <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_block_scalar_breaks</span><span class="p">(</span><span class="n">indent</span><span class="p">)</span>
    <span class="n">line_break</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="c1"># Scan the inner part of the block scalar.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">==</span> <span class="n">indent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">breaks</span><span class="p">)</span>
        <span class="n">leading_non_space</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39; </span><span class="se">\t</span><span class="s1">&#39;</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="n">line_break</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">()</span>
        <span class="n">breaks</span><span class="p">,</span> <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_block_scalar_breaks</span><span class="p">(</span><span class="n">indent</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">==</span> <span class="n">indent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="c1"># Unfortunately, folding rules are ambiguous.</span>
            <span class="c1">#</span>
            <span class="c1"># This is the folding according to the specification:</span>
            
            <span class="k">if</span> <span class="n">folded</span> <span class="ow">and</span> <span class="n">line_break</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>    \
                    <span class="ow">and</span> <span class="n">leading_non_space</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39; </span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">breaks</span><span class="p">:</span>
                    <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_break</span><span class="p">)</span>
            
            <span class="c1"># This is Clark Evans&#39;s interpretation (also in the spec</span>
            <span class="c1"># examples):</span>
            <span class="c1">#</span>
            <span class="c1">#if folded and line_break == &#39;\n&#39;:</span>
            <span class="c1">#    if not breaks:</span>
            <span class="c1">#        if self.peek() not in &#39; \t&#39;:</span>
            <span class="c1">#            chunks.append(&#39; &#39;)</span>
            <span class="c1">#        else:</span>
            <span class="c1">#            chunks.append(line_break)</span>
            <span class="c1">#else:</span>
            <span class="c1">#    chunks.append(line_break)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="c1"># Chomp the tail.</span>
    <span class="k">if</span> <span class="n">chomping</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">False</span><span class="p">:</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_break</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">chomping</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">breaks</span><span class="p">)</span>
    <span class="c1"># We are done.</span>
    <span class="k">return</span> <span class="n">ScalarToken</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">chunks</span><span class="p">),</span> <span class="kc">False</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span>
            <span class="n">style</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_breaks">
    <p>def <span class="ident">scan_block_scalar_breaks</span>(</p><p>self, indent)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_breaks', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_breaks" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_block_scalar_breaks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indent</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">&lt;</span> <span class="n">indent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">())</span>
        <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">&lt;</span> <span class="n">indent</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">chunks</span><span class="p">,</span> <span class="n">end_mark</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_ignored_line">
    <p>def <span class="ident">scan_block_scalar_ignored_line</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_ignored_line', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_ignored_line" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_block_scalar_ignored_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a block scalar&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected a comment or a line break, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_indentation">
    <p>def <span class="ident">scan_block_scalar_indentation</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_indentation', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_indentation" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_block_scalar_indentation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">max_indent</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">in</span> <span class="s1">&#39; </span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">())</span>
            <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">&gt;</span> <span class="n">max_indent</span><span class="p">:</span>
                <span class="n">max_indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span>
    <span class="k">return</span> <span class="n">chunks</span><span class="p">,</span> <span class="n">max_indent</span><span class="p">,</span> <span class="n">end_mark</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_indicators">
    <p>def <span class="ident">scan_block_scalar_indicators</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_indicators', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_block_scalar_indicators" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_block_scalar_indicators</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">chomping</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">increment</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;+-&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
            <span class="n">chomping</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">chomping</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;0123456789&#39;</span><span class="p">:</span>
            <span class="n">increment</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">increment</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a block scalar&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                        <span class="s2">&quot;expected indentation indicator in the range 1-9, but found 0&quot;</span><span class="p">,</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;0123456789&#39;</span><span class="p">:</span>
        <span class="n">increment</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">increment</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a block scalar&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;expected indentation indicator in the range 1-9, but found 0&quot;</span><span class="p">,</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;+-&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;+&#39;</span><span class="p">:</span>
                <span class="n">chomping</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">chomping</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a block scalar&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected chomping or indentation indicators, but found </span><span class="si">%r</span><span class="s2">&quot;</span>
                <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">chomping</span><span class="p">,</span> <span class="n">increment</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_directive">
    <p>def <span class="ident">scan_directive</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_directive', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_directive" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_directive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_directive_name</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="n">value</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;YAML&#39;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_yaml_directive_value</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;TAG&#39;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_tag_directive_value</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
        <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scan_directive_ignored_line</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">DirectiveToken</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_directive_ignored_line">
    <p>def <span class="ident">scan_directive_ignored_line</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_directive_ignored_line', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_directive_ignored_line" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_directive_ignored_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a directive&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected a comment or a line break, but found </span><span class="si">%r</span><span class="s2">&quot;</span>
                    <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">()</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_directive_name">
    <p>def <span class="ident">scan_directive_name</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_directive_name', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_directive_name" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_directive_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">while</span> <span class="s1">&#39;0&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;9&#39;</span> <span class="ow">or</span> <span class="s1">&#39;A&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;Z&#39;</span> <span class="ow">or</span> <span class="s1">&#39;a&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;z&#39;</span>  \
            <span class="ow">or</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;-_&#39;</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">length</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a directive&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected alphabetic or numeric character, but found </span><span class="si">%r</span><span class="s2">&quot;</span>
                <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a directive&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected alphabetic or numeric character, but found </span><span class="si">%r</span><span class="s2">&quot;</span>
                <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar">
    <p>def <span class="ident">scan_flow_scalar</span>(</p><p>self, style)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_flow_scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">style</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="c1"># Note that we loose indentation rules for quoted scalars. Quoted</span>
    <span class="c1"># scalars don&#39;t need to adhere indentation because &quot; and &#39; clearly</span>
    <span class="c1"># mark the beginning and the end of them. Therefore we are less</span>
    <span class="c1"># restrictive then the specification requires. We only need to check</span>
    <span class="c1"># that document separators are not included in scalars.</span>
    <span class="k">if</span> <span class="n">style</span> <span class="o">==</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">:</span>
        <span class="n">double</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">double</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="n">quote</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_flow_scalar_non_spaces</span><span class="p">(</span><span class="n">double</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">))</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">!=</span> <span class="n">quote</span><span class="p">:</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_flow_scalar_spaces</span><span class="p">(</span><span class="n">double</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">))</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_flow_scalar_non_spaces</span><span class="p">(</span><span class="n">double</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ScalarToken</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">chunks</span><span class="p">),</span> <span class="kc">False</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">,</span>
            <span class="n">style</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_breaks">
    <p>def <span class="ident">scan_flow_scalar_breaks</span>(</p><p>self, double, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_breaks', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_breaks" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_flow_scalar_breaks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">double</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># Instead of checking indentation, we check for document</span>
        <span class="c1"># separators.</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;---&#39;</span> <span class="ow">or</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span>   \
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a quoted scalar&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;found unexpected document separator&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">in</span> <span class="s1">&#39; </span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">chunks</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_non_spaces">
    <p>def <span class="ident">scan_flow_scalar_non_spaces</span>(</p><p>self, double, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_non_spaces', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_non_spaces" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_flow_scalar_non_spaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">double</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\&#39;\&quot;\\\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">length</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">double</span> <span class="ow">and</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">double</span> <span class="ow">and</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\&#39;</span><span class="s1">&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="n">double</span> <span class="ow">and</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\&quot;\\</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">double</span> <span class="ow">and</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ESCAPE_REPLACEMENTS</span><span class="p">:</span>
                <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ESCAPE_REPLACEMENTS</span><span class="p">[</span><span class="n">ch</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">ch</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ESCAPE_CODES</span><span class="p">:</span>
                <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ESCAPE_CODES</span><span class="p">[</span><span class="n">ch</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
                <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">length</span><span class="p">):</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;0123456789ABCDEFabcdef&#39;</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a double-quoted scalar&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                                <span class="s2">&quot;expected escape sequence of </span><span class="si">%d</span><span class="s2"> hexdecimal numbers, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span>
                                    <span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">k</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
                <span class="n">code</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">),</span> <span class="mi">16</span><span class="p">)</span>
                <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="n">code</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">()</span>
                <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_flow_scalar_breaks</span><span class="p">(</span><span class="n">double</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a double-quoted scalar&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                        <span class="s2">&quot;found unknown escape character </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">chunks</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_spaces">
    <p>def <span class="ident">scan_flow_scalar_spaces</span>(</p><p>self, double, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_spaces', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_flow_scalar_spaces" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_flow_scalar_spaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">double</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39; </span><span class="se">\t</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">whitespaces</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a quoted scalar&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;found unexpected end of stream&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="k">elif</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="n">line_break</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">()</span>
        <span class="n">breaks</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_flow_scalar_breaks</span><span class="p">(</span><span class="n">double</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line_break</span> <span class="o">!=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_break</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">breaks</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">breaks</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">whitespaces</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">chunks</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_line_break">
    <p>def <span class="ident">scan_line_break</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_line_break', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_line_break" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_line_break</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Transforms:</span>
    <span class="c1">#   &#39;\r\n&#39;      :   &#39;\n&#39;</span>
    <span class="c1">#   &#39;\r&#39;        :   &#39;\n&#39;</span>
    <span class="c1">#   &#39;\n&#39;        :   &#39;\n&#39;</span>
    <span class="c1">#   &#39;\x85&#39;      :   &#39;\n&#39;</span>
    <span class="c1">#   &#39;\u2028&#39;    :   &#39;\u2028&#39;</span>
    <span class="c1">#   &#39;\u2029     :   &#39;\u2029&#39;</span>
    <span class="c1">#   default     :   &#39;&#39;</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\r\n\x85</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="k">elif</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ch</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_plain">
    <p>def <span class="ident">scan_plain</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_plain', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_plain" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_plain</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="c1"># We add an additional restriction for the flow context:</span>
    <span class="c1">#   plain scalars in the flow context cannot contain &#39;,&#39; or &#39;?&#39;.</span>
    <span class="c1"># We also keep track of the `allow_simple_key` flag here.</span>
    <span class="c1"># Indentation rules are loosed for the flow context.</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="n">start_mark</span>
    <span class="n">indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="o">+</span><span class="mi">1</span>
    <span class="c1"># We allow zero indentation for scalars, but then we need to check for</span>
    <span class="c1"># document separators at the beginning of the line.</span>
    <span class="c1">#if indent == 0:</span>
    <span class="c1">#    indent = 1</span>
    <span class="n">spaces</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span>    \
                    <span class="ow">or</span> <span class="p">(</span><span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;:&#39;</span> <span class="ow">and</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span>
                                  <span class="o">+</span> <span class="p">(</span><span class="sa">u</span><span class="s1">&#39;,[]</span><span class="si">{}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="k">else</span> <span class="sa">u</span><span class="s1">&#39;&#39;</span><span class="p">))</span>\
                    <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="ow">and</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;,?[]</span><span class="si">{}</span><span class="s1">&#39;</span><span class="p">):</span>
                <span class="k">break</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">spaces</span><span class="p">)</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
        <span class="n">spaces</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_plain_spaces</span><span class="p">(</span><span class="n">indent</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">spaces</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span> \
                <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">column</span> <span class="o">&lt;</span> <span class="n">indent</span><span class="p">):</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">ScalarToken</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">chunks</span><span class="p">),</span> <span class="kc">True</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_plain_spaces">
    <p>def <span class="ident">scan_plain_spaces</span>(</p><p>self, indent, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_plain_spaces', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_plain_spaces" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_plain_spaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indent</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="c1"># The specification is really confusing about tabs in plain scalars.</span>
    <span class="c1"># We just forbid them completely. Do not use tabs in YAML!</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">whitespaces</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="n">line_break</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;---&#39;</span> <span class="ow">or</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span>   \
                <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">breaks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">in</span> <span class="s1">&#39; </span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">breaks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">())</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;---&#39;</span> <span class="ow">or</span> <span class="n">prefix</span> <span class="o">==</span> <span class="s1">&#39;...&#39;</span><span class="p">)</span>   \
                        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
                    <span class="k">return</span>
        <span class="k">if</span> <span class="n">line_break</span> <span class="o">!=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line_break</span><span class="p">)</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">breaks</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">breaks</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">whitespaces</span><span class="p">:</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">whitespaces</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">chunks</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_tag">
    <p>def <span class="ident">scan_tag</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_tag', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_tag" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">start_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;&lt;&#39;</span><span class="p">:</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_tag_uri</span><span class="p">(</span><span class="s1">&#39;tag&#39;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;&gt;&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while parsing a tag&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;expected &#39;&gt;&#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(),</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\t\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="s1">&#39;!&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">use_handle</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">while</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span>
                <span class="n">use_handle</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">break</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="n">handle</span> <span class="o">=</span> <span class="s1">&#39;!&#39;</span>
        <span class="k">if</span> <span class="n">use_handle</span><span class="p">:</span>
            <span class="n">handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_tag_handle</span><span class="p">(</span><span class="s1">&#39;tag&#39;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">handle</span> <span class="o">=</span> <span class="s1">&#39;!&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="n">suffix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_tag_uri</span><span class="p">(</span><span class="s1">&#39;tag&#39;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">)</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a tag&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected &#39; &#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">suffix</span><span class="p">)</span>
    <span class="n">end_mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">TagToken</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span> <span class="n">end_mark</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_handle">
    <p>def <span class="ident">scan_tag_directive_handle</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_handle', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_handle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_tag_directive_handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_tag_handle</span><span class="p">(</span><span class="s1">&#39;directive&#39;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">)</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">!=</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a directive&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected &#39; &#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_prefix">
    <p>def <span class="ident">scan_tag_directive_prefix</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_prefix', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_prefix" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_tag_directive_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_tag_uri</span><span class="p">(</span><span class="s1">&#39;directive&#39;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">)</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a directive&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected &#39; &#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_value">
    <p>def <span class="ident">scan_tag_directive_value</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_value', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_tag_directive_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_tag_directive_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">handle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_tag_directive_handle</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">prefix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_tag_directive_prefix</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">prefix</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_tag_handle">
    <p>def <span class="ident">scan_tag_handle</span>(</p><p>self, name, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_tag_handle', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_tag_handle" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_tag_handle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="c1"># For some strange reasons, the specification does not allow &#39;_&#39; in</span>
    <span class="c1"># tag handles. I have allowed it anyway.</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">!=</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected &#39;!&#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="n">length</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ch</span> <span class="o">!=</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="k">while</span> <span class="s1">&#39;0&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;9&#39;</span> <span class="ow">or</span> <span class="s1">&#39;A&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;Z&#39;</span> <span class="ow">or</span> <span class="s1">&#39;a&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;z&#39;</span>  \
                <span class="ow">or</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;-_&#39;</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ch</span> <span class="o">!=</span> <span class="s1">&#39;!&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                    <span class="s2">&quot;expected &#39;!&#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_tag_uri">
    <p>def <span class="ident">scan_tag_uri</span>(</p><p>self, name, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_tag_uri', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_tag_uri" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_tag_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="c1"># Note: we do not check if URI is well-formed.</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">while</span> <span class="s1">&#39;0&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;9&#39;</span> <span class="ow">or</span> <span class="s1">&#39;A&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;Z&#39;</span> <span class="ow">or</span> <span class="s1">&#39;a&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;z&#39;</span>  \
            <span class="ow">or</span> <span class="n">ch</span> <span class="ow">in</span> <span class="s1">&#39;-;/?:@&amp;=+$,_.!~*</span><span class="se">\&#39;</span><span class="s1">()[]%&#39;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ch</span> <span class="o">==</span> <span class="s1">&#39;%&#39;</span><span class="p">:</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
            <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scan_uri_escapes</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">length</span><span class="p">:</span>
        <span class="n">chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
        <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">chunks</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while parsing a </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected URI, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="k">return</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">chunks</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_to_next_token">
    <p>def <span class="ident">scan_to_next_token</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_to_next_token', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_to_next_token" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_to_next_token</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># We ignore spaces, line breaks and comments.</span>
    <span class="c1"># If we find a line break in the block context, we set the flag</span>
    <span class="c1"># `allow_simple_key` on.</span>
    <span class="c1"># The byte order mark is stripped if it&#39;s the first character in the</span>
    <span class="c1"># stream. We do not yet support BOM inside the stream as the</span>
    <span class="c1"># specification requires. Any such mark will be considered as a part</span>
    <span class="c1"># of the document.</span>
    <span class="c1">#</span>
    <span class="c1"># TODO: We need to make tab handling rules more sane. A good rule is</span>
    <span class="c1">#   Tabs cannot precede tokens</span>
    <span class="c1">#   BLOCK-SEQUENCE-START, BLOCK-MAPPING-START, BLOCK-END,</span>
    <span class="c1">#   KEY(block), VALUE(block), BLOCK-ENTRY</span>
    <span class="c1"># So the checking code is</span>
    <span class="c1">#   if &lt;TAB&gt;:</span>
    <span class="c1">#       self.allow_simple_keys = False</span>
    <span class="c1"># We also need to add the check for `allow_simple_keys == True` to</span>
    <span class="c1"># `unwind_indent` before issuing BLOCK-END.</span>
    <span class="c1"># Scanners for block, flow, and plain scalars need to be modified.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\uFEFF</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">found</span><span class="p">:</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;#&#39;</span><span class="p">:</span>
            <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_line_break</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">allow_simple_key</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_uri_escapes">
    <p>def <span class="ident">scan_uri_escapes</span>(</p><p>self, name, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_uri_escapes', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_uri_escapes" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_uri_escapes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">codes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;%&#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;0123456789ABCDEFabcdef&#39;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                        <span class="s2">&quot;expected URI escape sequence of 2 hexdecimal numbers, but found </span><span class="si">%r</span><span class="s2">&quot;</span>
                        <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">k</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
        <span class="n">codes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">bytes</span><span class="p">(</span><span class="n">codes</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">UnicodeDecodeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">name</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">),</span> <span class="n">mark</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_yaml_directive_number">
    <p>def <span class="ident">scan_yaml_directive_number</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_yaml_directive_number', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_yaml_directive_number" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_yaml_directive_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">&#39;0&#39;</span> <span class="o">&lt;=</span> <span class="n">ch</span> <span class="o">&lt;=</span> <span class="s1">&#39;9&#39;</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a directive&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected a digit, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">ch</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="n">length</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="s1">&#39;0&#39;</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(</span><span class="n">length</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="s1">&#39;9&#39;</span><span class="p">:</span>
        <span class="n">length</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prefix</span><span class="p">(</span><span class="n">length</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">length</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">value</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.scan_yaml_directive_value">
    <p>def <span class="ident">scan_yaml_directive_value</span>(</p><p>self, start_mark)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.scan_yaml_directive_value', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.scan_yaml_directive_value" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">scan_yaml_directive_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">):</span>
    <span class="c1"># See the specification for details.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">major</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_yaml_directive_number</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a directive&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected a digit or &#39;.&#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">forward</span><span class="p">()</span>
    <span class="n">minor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_yaml_directive_number</span><span class="p">(</span><span class="n">start_mark</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1"> </span><span class="se">\r\n\x85\u2028\u2029</span><span class="s1">&#39;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a directive&quot;</span><span class="p">,</span> <span class="n">start_mark</span><span class="p">,</span>
                <span class="s2">&quot;expected a digit or &#39; &#39;, but found </span><span class="si">%r</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">peek</span><span class="p">(),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">major</span><span class="p">,</span> <span class="n">minor</span><span class="p">)</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.stale_possible_simple_keys">
    <p>def <span class="ident">stale_possible_simple_keys</span>(</p><p>self)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.stale_possible_simple_keys', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.stale_possible_simple_keys" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">stale_possible_simple_keys</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Remove entries that are no longer possible simple keys. According to</span>
    <span class="c1"># the YAML specification, simple keys</span>
    <span class="c1"># - should be limited to a single line,</span>
    <span class="c1"># - should be no longer than 1024 characters.</span>
    <span class="c1"># Disabling this procedure will allow simple keys of any length and</span>
    <span class="c1"># height (may cause problems if indentation is broken though).</span>
    <span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">):</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">line</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span>  \
                <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">index</span><span class="o">-</span><span class="n">key</span><span class="o">.</span><span class="n">index</span> <span class="o">&gt;</span> <span class="mi">1024</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">required</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ScannerError</span><span class="p">(</span><span class="s2">&quot;while scanning a simple key&quot;</span><span class="p">,</span> <span class="n">key</span><span class="o">.</span><span class="n">mark</span><span class="p">,</span>
                        <span class="s2">&quot;could not find expected &#39;:&#39;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">())</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">possible_simple_keys</span><span class="p">[</span><span class="n">level</span><span class="p">]</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.unwind_indent">
    <p>def <span class="ident">unwind_indent</span>(</p><p>self, column)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.unwind_indent', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.unwind_indent" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">unwind_indent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">):</span>
    <span class="c1">## In flow context, tokens should respect indentation.</span>
    <span class="c1">## Actually the condition should be `self.indent &gt;= column` according to</span>
    <span class="c1">## the spec. But this condition will prohibit intuitively correct</span>
    <span class="c1">## constructions such as</span>
    <span class="c1">## key : {</span>
    <span class="c1">## }</span>
    <span class="c1">#if self.flow_level and self.indent &gt; column:</span>
    <span class="c1">#    raise ScannerError(None, None,</span>
    <span class="c1">#            &quot;invalid indentation or unclosed &#39;[&#39; or &#39;{&#39;&quot;,</span>
    <span class="c1">#            self.get_mark())</span>
    <span class="c1"># In the flow context, indentation is ignored. We make the scanner less</span>
    <span class="c1"># restrictive then specification requires.</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_level</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="c1"># In block context, we may need to issue the BLOCK-END tokens.</span>
    <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">&gt;</span> <span class="n">column</span><span class="p">:</span>
        <span class="n">mark</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_mark</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">indents</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">BlockEndToken</span><span class="p">(</span><span class="n">mark</span><span class="p">,</span> <span class="n">mark</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.update">
    <p>def <span class="ident">update</span>(</p><p>self, length)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.update', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.update" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">length</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pointer</span><span class="p">:]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pointer</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buffer</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">eof</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">update_raw</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_decode</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">data</span><span class="p">,</span> <span class="n">converted</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_decode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span><span class="p">,</span>
                        <span class="s1">&#39;strict&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">eof</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">UnicodeDecodeError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="n">character</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span><span class="p">[</span><span class="n">exc</span><span class="o">.</span><span class="n">start</span><span class="p">]</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">position</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream_pointer</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span><span class="p">)</span><span class="o">+</span><span class="n">exc</span><span class="o">.</span><span class="n">start</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">position</span> <span class="o">=</span> <span class="n">exc</span><span class="o">.</span><span class="n">start</span>
                <span class="k">raise</span> <span class="n">ReaderError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">character</span><span class="p">,</span>
                        <span class="n">exc</span><span class="o">.</span><span class="n">encoding</span><span class="p">,</span> <span class="n">exc</span><span class="o">.</span><span class="n">reason</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span>
            <span class="n">converted</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">check_printable</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">+=</span> <span class="n">data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span><span class="p">[</span><span class="n">converted</span><span class="p">:]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">eof</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buffer</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">break</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.update_raw">
    <p>def <span class="ident">update_raw</span>(</p><p>self, size=4096)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.update_raw', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.update_raw" class="source">
    <div class="codehilite"><pre><span></span><span class="k">def</span> <span class="nf">update_raw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">4096</span><span class="p">):</span>
    <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">size</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">raw_buffer</span> <span class="o">+=</span> <span class="n">data</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stream_pointer</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">eof</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>

  </div>
</div>

  </div>
  
          <h3>Methods</h3>
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.add_constructor">
    <p>def <span class="ident">add_constructor</span>(</p><p>cls, tag, constructor)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.add_constructor', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.add_constructor" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">add_constructor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">constructor</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;yaml_constructors&#39;</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_constructors</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_constructors</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_constructors</span><span class="p">[</span><span class="n">tag</span><span class="p">]</span> <span class="o">=</span> <span class="n">constructor</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.add_implicit_resolver">
    <p>def <span class="ident">add_implicit_resolver</span>(</p><p>cls, tag, regexp, first)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.add_implicit_resolver', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.add_implicit_resolver" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">add_implicit_resolver</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">regexp</span><span class="p">,</span> <span class="n">first</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;yaml_implicit_resolvers&#39;</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
        <span class="n">implicit_resolvers</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_implicit_resolvers</span><span class="p">:</span>
            <span class="n">implicit_resolvers</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_implicit_resolvers</span><span class="p">[</span><span class="n">key</span><span class="p">][:]</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_implicit_resolvers</span> <span class="o">=</span> <span class="n">implicit_resolvers</span>
    <span class="k">if</span> <span class="n">first</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">first</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">first</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_implicit_resolvers</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="p">[])</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">tag</span><span class="p">,</span> <span class="n">regexp</span><span class="p">))</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.add_multi_constructor">
    <p>def <span class="ident">add_multi_constructor</span>(</p><p>cls, tag_prefix, multi_constructor)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.add_multi_constructor', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.add_multi_constructor" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">add_multi_constructor</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tag_prefix</span><span class="p">,</span> <span class="n">multi_constructor</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;yaml_multi_constructors&#39;</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_multi_constructors</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_multi_constructors</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_multi_constructors</span><span class="p">[</span><span class="n">tag_prefix</span><span class="p">]</span> <span class="o">=</span> <span class="n">multi_constructor</span>
</pre></div>

  </div>
</div>

  </div>
  
            
  <div class="item">
    <div class="name def" id="flavio.io.yaml.SafeIncludeLoader.add_path_resolver">
    <p>def <span class="ident">add_path_resolver</span>(</p><p>cls, tag, path, kind=None)</p>
    </div>
    

    
  
  <div class="source_cont">
  <p class="source_link"><a href="javascript:void(0);" onclick="toggle('source-flavio.io.yaml.SafeIncludeLoader.add_path_resolver', this);">Show source &equiv;</a></p>
  <div id="source-flavio.io.yaml.SafeIncludeLoader.add_path_resolver" class="source">
    <div class="codehilite"><pre><span></span><span class="nd">@classmethod</span>
<span class="k">def</span> <span class="nf">add_path_resolver</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">tag</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="c1"># Note: `add_path_resolver` is experimental.  The API could be changed.</span>
    <span class="c1"># `new_path` is a pattern that is matched against the path from the</span>
    <span class="c1"># root to the node that is being considered.  `node_path` elements are</span>
    <span class="c1"># tuples `(node_check, index_check)`.  `node_check` is a node class:</span>
    <span class="c1"># `ScalarNode`, `SequenceNode`, `MappingNode` or `None`.  `None`</span>
    <span class="c1"># matches any kind of a node.  `index_check` could be `None`, a boolean</span>
    <span class="c1"># value, a string value, or a number.  `None` and `False` match against</span>
    <span class="c1"># any _value_ of sequence and mapping nodes.  `True` matches against</span>
    <span class="c1"># any _key_ of a mapping node.  A string `index_check` matches against</span>
    <span class="c1"># a mapping value that corresponds to a scalar key which content is</span>
    <span class="c1"># equal to the `index_check` value.  An integer `index_check` matches</span>
    <span class="c1"># against a sequence value with the index equal to `index_check`.</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;yaml_path_resolvers&#39;</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">:</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_path_resolvers</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_path_resolvers</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">new_path</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">element</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">node_check</span><span class="p">,</span> <span class="n">index_check</span> <span class="o">=</span> <span class="n">element</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">element</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">node_check</span> <span class="o">=</span> <span class="n">element</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">index_check</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">ResolverError</span><span class="p">(</span><span class="s2">&quot;Invalid path element: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">element</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">node_check</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">index_check</span> <span class="o">=</span> <span class="n">element</span>
        <span class="k">if</span> <span class="n">node_check</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
            <span class="n">node_check</span> <span class="o">=</span> <span class="n">ScalarNode</span>
        <span class="k">elif</span> <span class="n">node_check</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
            <span class="n">node_check</span> <span class="o">=</span> <span class="n">SequenceNode</span>
        <span class="k">elif</span> <span class="n">node_check</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
            <span class="n">node_check</span> <span class="o">=</span> <span class="n">MappingNode</span>
        <span class="k">elif</span> <span class="n">node_check</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ScalarNode</span><span class="p">,</span> <span class="n">SequenceNode</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">]</span>  \
                <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">node_check</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> \
                <span class="ow">and</span> <span class="n">node_check</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ResolverError</span><span class="p">(</span><span class="s2">&quot;Invalid node checker: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">node_check</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">index_check</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span>  \
                <span class="ow">and</span> <span class="n">index_check</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">ResolverError</span><span class="p">(</span><span class="s2">&quot;Invalid index checker: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">index_check</span><span class="p">)</span>
        <span class="n">new_path</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">node_check</span><span class="p">,</span> <span class="n">index_check</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">kind</span> <span class="ow">is</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">kind</span> <span class="o">=</span> <span class="n">ScalarNode</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="ow">is</span> <span class="nb">list</span><span class="p">:</span>
        <span class="n">kind</span> <span class="o">=</span> <span class="n">SequenceNode</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">kind</span> <span class="o">=</span> <span class="n">MappingNode</span>
    <span class="k">elif</span> <span class="n">kind</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ScalarNode</span><span class="p">,</span> <span class="n">SequenceNode</span><span class="p">,</span> <span class="n">MappingNode</span><span class="p">]</span>    \
            <span class="ow">and</span> <span class="n">kind</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ResolverError</span><span class="p">(</span><span class="s2">&quot;Invalid node kind: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">kind</span><span class="p">)</span>
    <span class="bp">cls</span><span class="o">.</span><span class="n">yaml_path_resolvers</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">new_path</span><span class="p">),</span> <span class="n">kind</span><span class="p">]</span> <span class="o">=</span> <span class="n">tag</span>
</pre></div>

  </div>
</div>

  </div>
  
      </div>
      </div>

  </section>

    </article>
  <div class="clear"> </div>
  <footer id="footer">
    <p>
      Documentation generated by
      <a href="https://github.com/BurntSushi/pdoc">pdoc 0.3.2</a>
    </p>

    <p>pdoc is in the public domain with the
      <a href="http://unlicense.org">UNLICENSE</a></p>

    <p>Design by <a href="http://nadh.in">Kailash Nadh</a></p>
  </footer>
</div>

    <script>
      renderMathInElement(document.body, options={delimiters:[
  {left: "$$", right: "$$", display: true},
  {left: "\\[", right: "\\]", display: true},
  {left: "\\(", right: "\\)", display: false},
  {left: "$", right: "$", display: false}
]});
    </script>
    <script type="text/javascript">
    $("script[type='math/tex; mode=display']").replaceWith(
      function(){
        var tex = $(this).text();
        return "<span class=\"katex-display\">" +
               katex.renderToString("\\displaystyle "+tex) +
               "</span>";
    });
    </script>

</body>
</html>
